// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <armory/trait/physics/bullet/PhysicsWorld.h>
extern armory__trait__physics__bullet__$PhysicsWorld g$e9bc575;
#include <armory/trait/physics/bullet/RigidBody.h>
vvirtual* haxe_ds_IntMap_iterator(haxe__ds__IntMap);
extern hl_type t$vrt_4825aa4;
extern hl_type t$fun_bf7849e;
extern hl_type t$fun_c434650;
void armory_trait_physics_bullet_PhysicsWorld_removeRigidBody(armory__trait__physics__bullet__PhysicsWorld,armory__trait__physics__bullet__RigidBody);
#include <kha/arrays/ByteArrayPrivate.h>
#include <iron/data/TSceneFormat.h>
#include <iron/Scene.h>
#include <hl/natives.h>
extern iron__$Scene g$_iron_Scene;
extern hl_type t$iron_math_Vec4;
void iron_math_Vec4_new(iron__math__Vec4,float*,float*,float*,float*);
void armory_trait_physics_bullet_PhysicsWorld_setGravity(armory__trait__physics__bullet__PhysicsWorld,iron__math__Vec4);
extern hl_type t$_ui16;
void haxe_ds_IntMap_set(haxe__ds__IntMap,int,vdynamic*);
#include <armory/trait/physics/bullet/PhysicsConstraint.h>
bool haxe_ds_IntMap_remove(haxe__ds__IntMap,int);
void armory_trait_physics_bullet_RigidBody_delete(armory__trait__physics__bullet__RigidBody);
void armory_trait_physics_bullet_PhysicsConstraint_delete(armory__trait__physics__bullet__PhysicsConstraint);
#include <armory/trait/physics/bullet/ContactPair.h>
extern hl_type t$armory_trait_physics_bullet_RigidBody;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
vdynamic* haxe_ds_IntMap_get(haxe__ds__IntMap,int);
int hl_types_ArrayObj_indexOf(hl__types__ArrayObj,vdynamic*,vdynamic*);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern hl_type t$armory_trait_physics_bullet_ContactPair;
double iron_system_Time_get_delta(void);
extern hl_type t$_i32;
extern hl_type t$_f32;
void armory_trait_physics_bullet_PhysicsWorld_updateContacts(armory__trait__physics__bullet__PhysicsWorld);
void armory_trait_physics_bullet_RigidBody_physicsUpdate(armory__trait__physics__bullet__RigidBody);
void hl_types_ArrayObj_resize(hl__types__ArrayObj,int);
void armory_trait_physics_bullet_ContactPair_new(armory__trait__physics__bullet__ContactPair,int,int);
#include <iron/object/CameraObject.h>
#include <iron/math/Mat4.h>
#include <iron/object/Transform.h>
#include <armory/trait/physics/bullet/Hit.h>
#include <kha/math/FastMatrix4.h>
void iron_math_RayCaster_getDirection(iron__math__Vec4,iron__math__Vec4,float,float,iron__object__CameraObject);
armory__trait__physics__bullet__Hit armory_trait_physics_bullet_PhysicsWorld_rayCast(armory__trait__physics__bullet__PhysicsWorld,iron__math__Vec4,iron__math__Vec4,int*,int*);
extern hl_type t$armory_trait_physics_bullet_Hit;
void armory_trait_physics_bullet_Hit_new(armory__trait__physics__bullet__Hit,armory__trait__physics__bullet__RigidBody,iron__math__Vec4,iron__math__Vec4);
#include <iron/math/Quat.h>
#include <armory/trait/physics/bullet/ConvexHit.h>
extern hl_type t$armory_trait_physics_bullet_ConvexHit;
void armory_trait_physics_bullet_ConvexHit_new(armory__trait__physics__bullet__ConvexHit,iron__math__Vec4,iron__math__Vec4,double);
extern hl_type t$fun_7b48b4f;
bool hl_types_ArrayObj_remove(hl__types__ArrayObj,vdynamic*);
void armory_trait_physics_bullet_PhysicsWorld_initDebugDrawing(armory__trait__physics__bullet__PhysicsWorld);
extern hl_type t$armory_trait_physics_bullet_DebugDrawHelper;
void armory_trait_physics_bullet_DebugDrawHelper_new(armory__trait__physics__bullet__DebugDrawHelper,armory__trait__physics__bullet__PhysicsWorld);
void armory_trait_physics_bullet_DebugDrawHelper_drawLine(armory__trait__physics__bullet__DebugDrawHelper,vbyte*,vbyte*,vbyte*);
extern hl_type t$fun_caf2b9c;
void armory_trait_physics_bullet_DebugDrawHelper_drawContactPoint(armory__trait__physics__bullet__DebugDrawHelper,vbyte*,vbyte*,float,int,vbyte*);
extern hl_type t$fun_75e4ff3;
void armory_trait_physics_bullet_DebugDrawHelper_reportErrorWarning(armory__trait__physics__bullet__DebugDrawHelper,vbyte*);
extern hl_type t$fun_38f933a;
void armory_trait_physics_bullet_DebugDrawHelper_draw3dText(armory__trait__physics__bullet__DebugDrawHelper,vbyte*,vbyte*);
extern hl_type t$fun_b408e5b;
#include <iron/App.h>
void iron_Trait_new(iron__Trait);
extern hl_type t$haxe_ds_IntMap;
void haxe_ds_IntMap_new(haxe__ds__IntMap);
extern hl_type t$fun_b71464e;
extern iron__$App g$_iron_App;
void hl_types_ArrayObj_insert(hl__types__ArrayObj,int,vdynamic*);
void iron_Scene_notifyOnRemove(iron__Scene,vclosure*);

void armory_trait_physics_bullet_PhysicsWorld_new__$1() {
	armory__trait__physics__bullet__$PhysicsWorld r1;
	bool r0;
	r0 = true;
	r1 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r1->sceneRemoved = r0;
	return;
}

void armory_trait_physics_bullet_PhysicsWorld_reset(armory__trait__physics__bullet__PhysicsWorld r0) {
	armory__trait__physics__bullet__PhysicsWorld r3;
	armory__trait__physics__bullet__RigidBody r8;
	armory__trait__physics__bullet__$PhysicsWorld r4;
	vvirtual *r1, *r5;
	bool r7;
	haxe__ds__IntMap r2;
	r4 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r3 = r4->active;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->rbMap;
	if( r2 == NULL ) hl_null_access();
	r1 = haxe_ds_IntMap_iterator(r2);
	r5 = hl_to_virtual(&t$vrt_4825aa4,(vdynamic*)r1);
	label$e588bd8_2_7:
	if( r5 == NULL ) hl_null_access();
	if( hl_vfields(r5)[0] ) r7 = ((bool (*)(vdynamic*))hl_vfields(r5)[0])(r5->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r5->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r7 = (bool)ret.v.i;
	}
	if( !r7 ) goto label$e588bd8_2_14;
	if( hl_vfields(r5)[1] ) r8 = ((armory__trait__physics__bullet__RigidBody (*)(vdynamic*))hl_vfields(r5)[1])(r5->value); else {
		r8 = (armory__trait__physics__bullet__RigidBody)hl_dyn_call_obj(r5->value,&t$fun_c434650,151160317/*next*/,NULL,NULL);
	}
	armory_trait_physics_bullet_PhysicsWorld_removeRigidBody(r0,r8);
	goto label$e588bd8_2_7;
	label$e588bd8_2_14:
	return;
}

void armory_trait_physics_bullet_PhysicsWorld_createPhysics(armory__trait__physics__bullet__PhysicsWorld r0) {
	iron__$Scene r9;
	iron__Scene r8;
	iron__math__Vec4 r10;
	kha__arrays__ByteArrayPrivate r6;
	iron__data__TSceneFormat r7;
	float r12, r14, r17, r20, r22, r24;
	double r16;
	float *r13, *r15, *r18, *r19;
	int r11, r23;
	vbyte *r1, *r3, *r4, *r5, *r21;
	r1 = bullet_btDbvtBroadphase_new0();
	r3 = NULL;
	r3 = bullet_btDefaultCollisionConfiguration_new1(r3);
	r4 = bullet_btCollisionDispatcher_new1(r3);
	r0->dispatcher = r4;
	r5 = bullet_btSequentialImpulseConstraintSolver_new0();
	r9 = (iron__$Scene)g$_iron_Scene;
	r8 = r9->active;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->raw;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->gravity;
	if( r6 ) goto label$e588bd8_3_26;
	r10 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r11 = 0;
	r12 = (float)r11;
	r13 = &r12;
	r11 = 0;
	r14 = (float)r11;
	r15 = &r14;
	r16 = -9.810000000000000497;
	r17 = (float)r16;
	r18 = &r17;
	r19 = NULL;
	iron_math_Vec4_new(r10,r13,r15,r18,r19);
	goto label$e588bd8_3_46;
	label$e588bd8_3_26:
	r10 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	if( r6 == NULL ) hl_null_access();
	r21 = r6->self;
	r11 = r6->byteArrayOffset;
	r20 = hl_kinc_bytearray_getfloat32(r21,r11);
	r13 = &r20;
	r21 = r6->self;
	r11 = r6->byteArrayOffset;
	r23 = 4;
	r11 = r11 + r23;
	r22 = hl_kinc_bytearray_getfloat32(r21,r11);
	r15 = &r22;
	r21 = r6->self;
	r11 = r6->byteArrayOffset;
	r23 = 8;
	r11 = r11 + r23;
	r24 = hl_kinc_bytearray_getfloat32(r21,r11);
	r18 = &r24;
	r19 = NULL;
	iron_math_Vec4_new(r10,r13,r15,r18,r19);
	label$e588bd8_3_46:
	r21 = r0->dispatcher;
	r21 = bullet_btDiscreteDynamicsWorld_new4(r21,r1,r5,r3);
	r0->world = r21;
	armory_trait_physics_bullet_PhysicsWorld_setGravity(r0,r10);
	return;
}

void armory_trait_physics_bullet_PhysicsWorld_setGravity(armory__trait__physics__bullet__PhysicsWorld r0,iron__math__Vec4 r1) {
	armory__trait__physics__bullet__$PhysicsWorld r4;
	float r5, r6, r7;
	vbyte *r3, *r8;
	r4 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r3 = r4->vec1;
	if( r1 == NULL ) hl_null_access();
	r5 = r1->x;
	r6 = r1->y;
	r7 = r1->z;
	bullet_btVector3_setValue3(r3,r5,r6,r7);
	r3 = r0->world;
	r4 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r8 = r4->vec1;
	bullet_btDiscreteDynamicsWorld_setGravity1(r3,r8);
	return;
}

iron__math__Vec4 armory_trait_physics_bullet_PhysicsWorld_getGravity(armory__trait__physics__bullet__PhysicsWorld r0) {
	iron__math__Vec4 r3;
	float r4, r6, r8;
	float *r5, *r7, *r9, *r10;
	vbyte *r1;
	r1 = r0->world;
	r1 = bullet_btDiscreteDynamicsWorld_getGravity0(r1);
	r3 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r4 = bullet_btVector3_x0(r1);
	r5 = &r4;
	r6 = bullet_btVector3_y0(r1);
	r7 = &r6;
	r8 = bullet_btVector3_z0(r1);
	r9 = &r8;
	r10 = NULL;
	iron_math_Vec4_new(r3,r5,r7,r9,r10);
	return r3;
}

void armory_trait_physics_bullet_PhysicsWorld_addRigidBody(armory__trait__physics__bullet__PhysicsWorld r0,armory__trait__physics__bullet__RigidBody r1) {
	haxe__ds__IntMap r10;
	unsigned short r6, r9;
	vdynamic *r7, *r8;
	int r5;
	vbyte *r2, *r4;
	r2 = r0->world;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->body;
	r5 = r1->group;
	r6 = (int)r5;
	r7 = hl_alloc_dynamic(&t$_ui16);
	r7->v.i = r6;
	r5 = r1->mask;
	r6 = (int)r5;
	r8 = hl_alloc_dynamic(&t$_ui16);
	r8->v.i = r6;
	if( r7 ) goto label$e588bd8_6_12;
	bullet_btDiscreteDynamicsWorld_addRigidBody1(r2,r4);
	goto label$e588bd8_6_15;
	label$e588bd8_6_12:
	r6 = r7 ? r7->v.ui16 : 0;
	r9 = r8 ? r8->v.ui16 : 0;
	bullet_btDiscreteDynamicsWorld_addRigidBody3(r2,r4,r6,r9);
	label$e588bd8_6_15:
	r10 = r0->rbMap;
	if( r10 == NULL ) hl_null_access();
	r5 = r1->id;
	haxe_ds_IntMap_set(r10,r5,((vdynamic*)r1));
	return;
}

void armory_trait_physics_bullet_PhysicsWorld_addPhysicsConstraint(armory__trait__physics__bullet__PhysicsWorld r0,armory__trait__physics__bullet__PhysicsConstraint r1) {
	bool r5;
	haxe__ds__IntMap r7;
	vdynamic *r6;
	int r8;
	vbyte *r3, *r4;
	r3 = r0->world;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->con;
	r5 = r1->disableCollisions;
	r6 = hl_alloc_dynbool(r5);
	bullet_btDiscreteDynamicsWorld_addConstraint2(r3,r4,r6);
	r7 = r0->conMap;
	if( r7 == NULL ) hl_null_access();
	r8 = r1->id;
	haxe_ds_IntMap_set(r7,r8,((vdynamic*)r1));
	return;
}

void armory_trait_physics_bullet_PhysicsWorld_removeRigidBody(armory__trait__physics__bullet__PhysicsWorld r0,armory__trait__physics__bullet__RigidBody r1) {
	bool r3;
	haxe__ds__IntMap r6;
	int r7;
	vbyte *r4, *r5;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->destroyed;
	if( !r3 ) goto label$e588bd8_8_4;
	return;
	label$e588bd8_8_4:
	r3 = true;
	r1->destroyed = r3;
	r4 = r0->world;
	if( !r4 ) goto label$e588bd8_8_11;
	r4 = r0->world;
	r5 = r1->body;
	bullet_btDiscreteDynamicsWorld_removeRigidBody1(r4,r5);
	label$e588bd8_8_11:
	r6 = r0->rbMap;
	if( r6 == NULL ) hl_null_access();
	r7 = r1->id;
	r3 = haxe_ds_IntMap_remove(r6,r7);
	armory_trait_physics_bullet_RigidBody_delete(r1);
	return;
}

void armory_trait_physics_bullet_PhysicsWorld_removePhysicsConstraint(armory__trait__physics__bullet__PhysicsWorld r0,armory__trait__physics__bullet__PhysicsConstraint r1) {
	bool r5;
	haxe__ds__IntMap r6;
	int r7;
	vbyte *r3, *r4;
	r3 = r0->world;
	if( !r3 ) goto label$e588bd8_9_6;
	r3 = r0->world;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->con;
	bullet_btDiscreteDynamicsWorld_removeConstraint1(r3,r4);
	label$e588bd8_9_6:
	r6 = r0->conMap;
	if( r6 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r7 = r1->id;
	r5 = haxe_ds_IntMap_remove(r6,r7);
	armory_trait_physics_bullet_PhysicsConstraint_delete(r1);
	return;
}

hl__types__ArrayObj armory_trait_physics_bullet_PhysicsWorld_getContacts(armory__trait__physics__bullet__PhysicsWorld r0,armory__trait__physics__bullet__RigidBody r1) {
	armory__trait__physics__bullet__RigidBody r13, r15;
	hl__types__ArrayObj r3, r8;
	armory__trait__physics__bullet__ContactPair r12;
	hl_type *r7;
	haxe__ds__IntMap r16;
	vdynamic *r5, *r17;
	vbyte *r14;
	varray *r6;
	int r2, r4, r9, r10, r11;
	r3 = r0->contacts;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	r4 = 0;
	if( r2 != r4 ) goto label$e588bd8_10_7;
	r3 = NULL;
	return r3;
	label$e588bd8_10_7:
	r7 = &t$armory_trait_physics_bullet_RigidBody;
	r2 = 0;
	r6 = hl_alloc_array(r7,r2);
	r3 = hl_types_ArrayObj_alloc(r6);
	r2 = 0;
	r8 = r0->contacts;
	if( r8 == NULL ) hl_null_access();
	r4 = r8->length;
	label$e588bd8_10_15:
	if( r2 >= r4 ) goto label$e588bd8_10_59;
	r9 = r2;
	++r2;
	r8 = r0->contacts;
	if( r8 == NULL ) hl_null_access();
	r11 = r8->length;
	if( ((unsigned)r9) < ((unsigned)r11) ) goto label$e588bd8_10_25;
	r12 = NULL;
	goto label$e588bd8_10_28;
	label$e588bd8_10_25:
	r6 = r8->array;
	r5 = ((vdynamic**)(r6 + 1))[r9];
	r12 = (armory__trait__physics__bullet__ContactPair)r5;
	label$e588bd8_10_28:
	r13 = NULL;
	if( r1 == NULL ) hl_null_access();
	r14 = r1->body;
	if( r12 == NULL ) hl_null_access();
	r10 = r12->a;
	r11 = bullet_btCollisionObject_getUserIndex0(r14);
	if( r10 != r11 ) goto label$e588bd8_10_42;
	r16 = r0->rbMap;
	if( r16 == NULL ) hl_null_access();
	r10 = r12->b;
	r5 = haxe_ds_IntMap_get(r16,r10);
	r15 = (armory__trait__physics__bullet__RigidBody)r5;
	r13 = r15;
	goto label$e588bd8_10_51;
	label$e588bd8_10_42:
	r10 = r12->b;
	r11 = bullet_btCollisionObject_getUserIndex0(r14);
	if( r10 != r11 ) goto label$e588bd8_10_51;
	r16 = r0->rbMap;
	if( r16 == NULL ) hl_null_access();
	r10 = r12->a;
	r5 = haxe_ds_IntMap_get(r16,r10);
	r15 = (armory__trait__physics__bullet__RigidBody)r5;
	r13 = r15;
	label$e588bd8_10_51:
	if( !r13 ) goto label$e588bd8_10_58;
	if( r3 == NULL ) hl_null_access();
	r17 = NULL;
	r10 = hl_types_ArrayObj_indexOf(r3,((vdynamic*)r13),r17);
	r11 = -1;
	if( r10 != r11 ) goto label$e588bd8_10_58;
	r10 = hl_types_ArrayObj_push(r3,((vdynamic*)r13));
	label$e588bd8_10_58:
	goto label$e588bd8_10_15;
	label$e588bd8_10_59:
	return r3;
}

hl__types__ArrayObj armory_trait_physics_bullet_PhysicsWorld_getContactPairs(armory__trait__physics__bullet__PhysicsWorld r0,armory__trait__physics__bullet__RigidBody r1) {
	hl__types__ArrayObj r3, r8;
	armory__trait__physics__bullet__ContactPair r12;
	hl_type *r7;
	vdynamic *r5;
	vbyte *r13;
	varray *r6;
	int r2, r4, r9, r10, r11;
	r3 = r0->contacts;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	r4 = 0;
	if( r2 != r4 ) goto label$e588bd8_11_7;
	r3 = NULL;
	return r3;
	label$e588bd8_11_7:
	r7 = &t$armory_trait_physics_bullet_ContactPair;
	r2 = 0;
	r6 = hl_alloc_array(r7,r2);
	r3 = hl_types_ArrayObj_alloc(r6);
	r2 = 0;
	r8 = r0->contacts;
	if( r8 == NULL ) hl_null_access();
	r4 = r8->length;
	label$e588bd8_11_15:
	if( r2 >= r4 ) goto label$e588bd8_11_43;
	r9 = r2;
	++r2;
	r8 = r0->contacts;
	if( r8 == NULL ) hl_null_access();
	r11 = r8->length;
	if( ((unsigned)r9) < ((unsigned)r11) ) goto label$e588bd8_11_25;
	r12 = NULL;
	goto label$e588bd8_11_28;
	label$e588bd8_11_25:
	r6 = r8->array;
	r5 = ((vdynamic**)(r6 + 1))[r9];
	r12 = (armory__trait__physics__bullet__ContactPair)r5;
	label$e588bd8_11_28:
	if( r1 == NULL ) hl_null_access();
	r13 = r1->body;
	if( r12 == NULL ) hl_null_access();
	r10 = r12->a;
	r11 = bullet_btCollisionObject_getUserIndex0(r13);
	if( r10 != r11 ) goto label$e588bd8_11_37;
	if( r3 == NULL ) hl_null_access();
	r10 = hl_types_ArrayObj_push(r3,((vdynamic*)r12));
	goto label$e588bd8_11_42;
	label$e588bd8_11_37:
	r10 = r12->b;
	r11 = bullet_btCollisionObject_getUserIndex0(r13);
	if( r10 != r11 ) goto label$e588bd8_11_42;
	if( r3 == NULL ) hl_null_access();
	r10 = hl_types_ArrayObj_push(r3,((vdynamic*)r12));
	label$e588bd8_11_42:
	goto label$e588bd8_11_15;
	label$e588bd8_11_43:
	return r3;
}

armory__trait__physics__bullet__RigidBody armory_trait_physics_bullet_PhysicsWorld_findBody(armory__trait__physics__bullet__PhysicsWorld r0,int r1) {
	armory__trait__physics__bullet__RigidBody r4;
	haxe__ds__IntMap r3;
	vdynamic *r2;
	r3 = r0->rbMap;
	if( r3 == NULL ) hl_null_access();
	r2 = haxe_ds_IntMap_get(r3,r1);
	r4 = (armory__trait__physics__bullet__RigidBody)r2;
	return r4;
}

void armory_trait_physics_bullet_PhysicsWorld_lateUpdate(armory__trait__physics__bullet__PhysicsWorld r0) {
	armory__trait__physics__bullet__RigidBody r23;
	vvirtual *r19, *r21;
	hl__types__ArrayObj r6;
	bool r22;
	haxe__ds__IntMap r20;
	float r15, r17;
	vclosure *r10;
	double r1, r2, r4, r12, r13;
	vdynamic *r5, *r16, *r18;
	vbyte *r14;
	varray *r11;
	int r7, r8, r9;
	r1 = iron_system_Time_get_delta();
	r2 = r0->timeScale;
	r1 = r1 * r2;
	r4 = 0.;
	if( r1 != r4 ) goto label$e588bd8_13_6;
	return;
	label$e588bd8_13_6:
	r6 = r0->preUpdates;
	if( !r6 ) goto label$e588bd8_13_25;
	r7 = 0;
	r6 = r0->preUpdates;
	label$e588bd8_13_10:
	if( r6 == NULL ) hl_null_access();
	r9 = r6->length;
	if( r7 >= r9 ) goto label$e588bd8_13_25;
	r9 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$e588bd8_13_18;
	r10 = NULL;
	goto label$e588bd8_13_21;
	label$e588bd8_13_18:
	r11 = r6->array;
	r5 = ((vdynamic**)(r11 + 1))[r7];
	r10 = (vclosure*)r5;
	label$e588bd8_13_21:
	++r7;
	if( r10 == NULL ) hl_null_access();
	r10->hasValue ? ((void (*)(vdynamic*))r10->fun)((vdynamic*)r10->value) : ((void (*)(void))r10->fun)();
	goto label$e588bd8_13_10;
	label$e588bd8_13_25:
	r2 = 0.01666666666666666644;
	r7 = r0->maxSteps;
	r13 = (double)r7;
	r12 = r2 * r13;
	if( !(r1 < r12) ) goto label$e588bd8_13_32;
	r7 = r0->maxSteps;
	goto label$e588bd8_13_33;
	label$e588bd8_13_32:
	r7 = 1;
	label$e588bd8_13_33:
	r14 = r0->world;
	r15 = (float)r1;
	r16 = hl_alloc_dynamic(&t$_i32);
	r16->v.i = r7;
	r17 = (float)r2;
	r18 = hl_alloc_dynamic(&t$_f32);
	r18->v.f = r17;
	r8 = bullet_btDiscreteDynamicsWorld_stepSimulation3(r14,r15,r16,r18);
	armory_trait_physics_bullet_PhysicsWorld_updateContacts(r0);
	r20 = r0->rbMap;
	if( r20 == NULL ) hl_null_access();
	r19 = haxe_ds_IntMap_iterator(r20);
	r21 = hl_to_virtual(&t$vrt_4825aa4,(vdynamic*)r19);
	label$e588bd8_13_44:
	if( r21 == NULL ) hl_null_access();
	if( hl_vfields(r21)[0] ) r22 = ((bool (*)(vdynamic*))hl_vfields(r21)[0])(r21->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r21->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r22 = (bool)ret.v.i;
	}
	if( !r22 ) goto label$e588bd8_13_52;
	if( hl_vfields(r21)[1] ) r23 = ((armory__trait__physics__bullet__RigidBody (*)(vdynamic*))hl_vfields(r21)[1])(r21->value); else {
		r23 = (armory__trait__physics__bullet__RigidBody)hl_dyn_call_obj(r21->value,&t$fun_c434650,151160317/*next*/,NULL,NULL);
	}
	if( r23 == NULL ) hl_null_access();
	armory_trait_physics_bullet_RigidBody_physicsUpdate(r23);
	goto label$e588bd8_13_44;
	label$e588bd8_13_52:
	return;
}

void armory_trait_physics_bullet_PhysicsWorld_updateContacts(armory__trait__physics__bullet__PhysicsWorld r0) {
	hl__types__ArrayObj r2;
	armory__trait__physics__bullet__ContactPair r20, r22;
	iron__math__Vec4 r24;
	float r25, r27, r29, r32, r33, r34, r35, r36, r37;
	double r38;
	float *r26, *r28, *r30, *r31;
	vbyte *r4, *r5, *r10, *r11, *r12, *r17, *r18, *r19, *r21;
	int r3, r6, r7, r8, r9, r13, r14, r15, r16, r23;
	r2 = r0->contacts;
	if( r2 == NULL ) hl_null_access();
	r3 = 0;
	hl_types_ArrayObj_resize(r2,r3);
	r4 = r0->dispatcher;
	r3 = bullet_btDispatcher_getNumManifolds0(r4);
	r6 = 0;
	r7 = r3;
	label$e588bd8_14_8:
	if( r6 >= r7 ) goto label$e588bd8_14_80;
	r8 = r6;
	++r6;
	r5 = bullet_btDispatcher_getManifoldByIndexInternal1(r4,r8);
	r10 = bullet_btPersistentManifold_getBody00(r5);
	r11 = bullet_btPersistentManifold_getBody10(r5);
	r9 = bullet_btPersistentManifold_getNumContacts0(r5);
	r13 = 0;
	r14 = r9;
	label$e588bd8_14_18:
	if( r13 >= r14 ) goto label$e588bd8_14_79;
	r15 = r13;
	++r13;
	r12 = bullet_btPersistentManifold_getContactPoint1(r5,r15);
	r17 = NULL;
	r18 = NULL;
	r19 = NULL;
	r20 = NULL;
	r21 = bullet_btManifoldPoint_get_m_positionWorldOnA(r12);
	r17 = r21;
	r21 = bullet_btManifoldPoint_get_m_positionWorldOnB(r12);
	r18 = r21;
	r21 = bullet_btManifoldPoint_get_m_normalWorldOnB(r12);
	r19 = r21;
	r22 = (armory__trait__physics__bullet__ContactPair)hl_alloc_obj(&t$armory_trait_physics_bullet_ContactPair);
	r16 = bullet_btCollisionObject_getUserIndex0(r10);
	r23 = bullet_btCollisionObject_getUserIndex0(r11);
	armory_trait_physics_bullet_ContactPair_new(r22,r16,r23);
	r24 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r25 = bullet_btVector3_x0(r17);
	r26 = &r25;
	r27 = bullet_btVector3_y0(r17);
	r28 = &r27;
	r29 = bullet_btVector3_z0(r17);
	r30 = &r29;
	r31 = NULL;
	iron_math_Vec4_new(r24,r26,r28,r30,r31);
	r22->posA = r24;
	r24 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r32 = bullet_btVector3_x0(r18);
	r26 = &r32;
	r33 = bullet_btVector3_y0(r18);
	r28 = &r33;
	r34 = bullet_btVector3_z0(r18);
	r30 = &r34;
	r31 = NULL;
	iron_math_Vec4_new(r24,r26,r28,r30,r31);
	r22->posB = r24;
	r24 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r35 = bullet_btVector3_x0(r19);
	r26 = &r35;
	r36 = bullet_btVector3_y0(r19);
	r28 = &r36;
	r37 = bullet_btVector3_z0(r19);
	r30 = &r37;
	r31 = NULL;
	iron_math_Vec4_new(r24,r26,r28,r30,r31);
	r22->normOnB = r24;
	r38 = bullet_btManifoldPoint_getAppliedImpulse0(r12);
	r22->impulse = r38;
	r38 = bullet_btManifoldPoint_getDistance0(r12);
	r22->distance = r38;
	r2 = r0->contacts;
	if( r2 == NULL ) hl_null_access();
	r16 = hl_types_ArrayObj_push(r2,((vdynamic*)r22));
	bullet_btManifoldPoint_delete(r12);
	bullet_btVector3_delete(r17);
	bullet_btVector3_delete(r18);
	bullet_btVector3_delete(r19);
	goto label$e588bd8_14_18;
	label$e588bd8_14_79:
	goto label$e588bd8_14_8;
	label$e588bd8_14_80:
	return;
}

armory__trait__physics__bullet__RigidBody armory_trait_physics_bullet_PhysicsWorld_pickClosest(armory__trait__physics__bullet__PhysicsWorld r0,double r1,double r2,int* r3,int* r4) {
	armory__trait__physics__bullet__RigidBody r28;
	kha__math__FastMatrix4 r23;
	iron__$Scene r9;
	iron__Scene r8;
	armory__trait__physics__bullet__Hit r22;
	iron__math__Vec4 r11, r16, r17;
	iron__object__Transform r21;
	iron__math__Mat4 r20;
	float r18, r19, r24, r25;
	iron__object__CameraObject r7;
	float *r12, *r13, *r14, *r15;
	int r5, r6, r26, r27;
	if( r3 ) goto label$e588bd8_15_3;
	r5 = 1;
	goto label$e588bd8_15_4;
	label$e588bd8_15_3:
	r5 = *r3;
	label$e588bd8_15_4:
	if( r4 ) goto label$e588bd8_15_7;
	r6 = -1;
	goto label$e588bd8_15_8;
	label$e588bd8_15_7:
	r6 = *r4;
	label$e588bd8_15_8:
	r9 = (iron__$Scene)g$_iron_Scene;
	r8 = r9->active;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->camera;
	r11 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r12 = NULL;
	r13 = NULL;
	r14 = NULL;
	r15 = NULL;
	iron_math_Vec4_new(r11,r12,r13,r14,r15);
	r16 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r12 = NULL;
	r13 = NULL;
	r14 = NULL;
	r15 = NULL;
	iron_math_Vec4_new(r16,r12,r13,r14,r15);
	r18 = (float)r1;
	r19 = (float)r2;
	iron_math_RayCaster_getDirection(r11,r16,r18,r19,r7);
	if( r7 == NULL ) hl_null_access();
	r21 = r7->transform;
	if( r21 == NULL ) hl_null_access();
	r20 = r21->world;
	r17 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	if( r20 == NULL ) hl_null_access();
	r23 = r20->self;
	if( r23 == NULL ) hl_null_access();
	r18 = r23->_30;
	r12 = &r18;
	r23 = r20->self;
	if( r23 == NULL ) hl_null_access();
	r19 = r23->_31;
	r13 = &r19;
	r23 = r20->self;
	if( r23 == NULL ) hl_null_access();
	r24 = r23->_32;
	r14 = &r24;
	r23 = r20->self;
	if( r23 == NULL ) hl_null_access();
	r25 = r23->_33;
	r15 = &r25;
	iron_math_Vec4_new(r17,r12,r13,r14,r15);
	r26 = r5;
	r3 = &r26;
	r27 = r6;
	r4 = &r27;
	r22 = armory_trait_physics_bullet_PhysicsWorld_rayCast(r0,r17,r16,r3,r4);
	if( !r22 ) goto label$e588bd8_15_59;
	if( r22 == NULL ) hl_null_access();
	r28 = r22->rb;
	goto label$e588bd8_15_60;
	label$e588bd8_15_59:
	r28 = NULL;
	label$e588bd8_15_60:
	return r28;
}

armory__trait__physics__bullet__Hit armory_trait_physics_bullet_PhysicsWorld_rayCast(armory__trait__physics__bullet__PhysicsWorld r0,iron__math__Vec4 r1,iron__math__Vec4 r2,int* r3,int* r4) {
	armory__trait__physics__bullet__RigidBody r22, r30;
	armory__trait__physics__bullet__$PhysicsWorld r8;
	bool r24;
	armory__trait__physics__bullet__Hit r23, r31;
	haxe__ds__IntMap r29;
	iron__math__Vec4 r13, r25;
	unsigned short r16;
	float r12, r14, r15, r26;
	double r27;
	vdynamic *r28;
	vbyte *r7, *r10, *r11, *r17, *r19, *r20, *r21;
	int r5, r6, r18;
	if( r3 ) goto label$e588bd8_16_3;
	r5 = 1;
	goto label$e588bd8_16_4;
	label$e588bd8_16_3:
	r5 = *r3;
	label$e588bd8_16_4:
	if( r4 ) goto label$e588bd8_16_7;
	r6 = -1;
	goto label$e588bd8_16_8;
	label$e588bd8_16_7:
	r6 = *r4;
	label$e588bd8_16_8:
	r8 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r7 = r8->vec1;
	r8 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r10 = r8->vec2;
	if( r1 == NULL ) hl_null_access();
	r12 = r1->x;
	r14 = r1->y;
	r15 = r1->z;
	bullet_btVector3_setValue3(r7,r12,r14,r15);
	if( r2 == NULL ) hl_null_access();
	r12 = r2->x;
	r14 = r2->y;
	r15 = r2->z;
	bullet_btVector3_setValue3(r10,r12,r14,r15);
	r11 = bullet_ClosestRayResultCallback_new2(r7,r10);
	r16 = (int)r5;
	r16 = bullet_RayResultCallback_set_m_collisionFilterGroup(r11,r16);
	r16 = (int)r6;
	r16 = bullet_RayResultCallback_set_m_collisionFilterMask(r11,r16);
	r17 = r0->world;
	bullet_btCollisionWorld_rayTest3(r17,r7,r10,r11);
	r22 = NULL;
	r23 = NULL;
	r24 = bullet_RayResultCallback_hasHit0(r11);
	if( !r24 ) goto label$e588bd8_16_68;
	r19 = bullet_ClosestRayResultCallback_get_m_hitPointWorld(r11);
	r13 = r0->hitPointWorld;
	r12 = bullet_btVector3_x0(r19);
	r14 = bullet_btVector3_y0(r19);
	r15 = bullet_btVector3_z0(r19);
	if( r13 == NULL ) hl_null_access();
	r13->x = r12;
	r13->y = r14;
	r13->z = r15;
	r27 = 1.;
	r26 = (float)r27;
	r13->w = r26;
	r20 = bullet_ClosestRayResultCallback_get_m_hitNormalWorld(r11);
	r13 = r0->hitNormalWorld;
	r12 = bullet_btVector3_x0(r20);
	r14 = bullet_btVector3_y0(r20);
	r15 = bullet_btVector3_z0(r20);
	if( r13 == NULL ) hl_null_access();
	r13->x = r12;
	r13->y = r14;
	r13->z = r15;
	r27 = 1.;
	r26 = (float)r27;
	r13->w = r26;
	r29 = r0->rbMap;
	if( r29 == NULL ) hl_null_access();
	r21 = bullet_RayResultCallback_get_m_collisionObject(r11);
	r18 = bullet_btCollisionObject_getUserIndex0(r21);
	r28 = haxe_ds_IntMap_get(r29,r18);
	r30 = (armory__trait__physics__bullet__RigidBody)r28;
	r31 = (armory__trait__physics__bullet__Hit)hl_alloc_obj(&t$armory_trait_physics_bullet_Hit);
	r13 = r0->hitPointWorld;
	r25 = r0->hitNormalWorld;
	armory_trait_physics_bullet_Hit_new(r31,r30,r13,r25);
	r23 = r31;
	label$e588bd8_16_68:
	bullet_ClosestRayResultCallback_delete(r11);
	return r23;
}

armory__trait__physics__bullet__ConvexHit armory_trait_physics_bullet_PhysicsWorld_convexSweepTest(armory__trait__physics__bullet__PhysicsWorld r0,armory__trait__physics__bullet__RigidBody r1,iron__math__Vec4 r2,iron__math__Vec4 r3,iron__math__Quat r4,int* r5,int* r6) {
	armory__trait__physics__bullet__ConvexHit r26, r29;
	armory__trait__physics__bullet__$PhysicsWorld r10;
	bool r27;
	iron__math__Vec4 r15, r28;
	unsigned short r20;
	float r14, r16, r17, r19;
	double r25;
	vbyte *r9, *r12, *r13, *r18, *r21, *r22, *r23, *r24;
	int r7, r8;
	if( r5 ) goto label$e588bd8_17_3;
	r7 = 1;
	goto label$e588bd8_17_4;
	label$e588bd8_17_3:
	r7 = *r5;
	label$e588bd8_17_4:
	if( r6 ) goto label$e588bd8_17_7;
	r8 = -1;
	goto label$e588bd8_17_8;
	label$e588bd8_17_7:
	r8 = *r6;
	label$e588bd8_17_8:
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r9 = r10->transform1;
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r12 = r10->transform2;
	bullet_btTransform_setIdentity0(r9);
	bullet_btTransform_setIdentity0(r12);
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r13 = r10->vec1;
	if( r2 == NULL ) hl_null_access();
	r14 = r2->x;
	r16 = r2->y;
	r17 = r2->z;
	bullet_btVector3_setValue3(r13,r14,r16,r17);
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r18 = r10->vec1;
	bullet_btTransform_setOrigin1(r9,r18);
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r13 = r10->quat1;
	if( r4 == NULL ) hl_null_access();
	r14 = r4->x;
	r16 = r4->y;
	r17 = r4->z;
	r19 = r4->w;
	bullet_btQuaternion_setValue4(r13,r14,r16,r17,r19);
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r18 = r10->quat1;
	bullet_btTransform_setRotation1(r9,r18);
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r13 = r10->vec2;
	if( r3 == NULL ) hl_null_access();
	r14 = r3->x;
	r16 = r3->y;
	r17 = r3->z;
	bullet_btVector3_setValue3(r13,r14,r16,r17);
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r18 = r10->vec2;
	bullet_btTransform_setOrigin1(r12,r18);
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r13 = r10->quat1;
	r14 = r4->x;
	r16 = r4->y;
	r17 = r4->z;
	r19 = r4->w;
	bullet_btQuaternion_setValue4(r13,r14,r16,r17,r19);
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r18 = r10->quat1;
	bullet_btTransform_setRotation1(r9,r18);
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r13 = r10->vec1;
	r10 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r18 = r10->vec2;
	r13 = bullet_ClosestConvexResultCallback_new2(r13,r18);
	r20 = (int)r7;
	r20 = bullet_ConvexResultCallback_set_m_collisionFilterGroup(r13,r20);
	r20 = (int)r8;
	r20 = bullet_ConvexResultCallback_set_m_collisionFilterMask(r13,r20);
	r21 = r0->world;
	if( r1 == NULL ) hl_null_access();
	r22 = r1->body;
	r22 = bullet_btCollisionObject_getCollisionShape0(r22);
	r25 = 0.;
	r14 = (float)r25;
	bullet_btCollisionWorld_convexSweepTest5(r21,r22,r9,r12,r13,r14);
	r26 = NULL;
	r27 = bullet_ConvexResultCallback_hasHit0(r13);
	if( !r27 ) goto label$e588bd8_17_105;
	r23 = bullet_ClosestConvexResultCallback_get_m_hitPointWorld(r13);
	r15 = r0->convexHitPointWorld;
	r14 = bullet_btVector3_x0(r23);
	r16 = bullet_btVector3_y0(r23);
	r17 = bullet_btVector3_z0(r23);
	if( r15 == NULL ) hl_null_access();
	r15->x = r14;
	r15->y = r16;
	r15->z = r17;
	r25 = 1.;
	r19 = (float)r25;
	r15->w = r19;
	r24 = bullet_ClosestConvexResultCallback_get_m_hitNormalWorld(r13);
	r15 = r0->convexHitNormalWorld;
	r14 = bullet_btVector3_x0(r24);
	r16 = bullet_btVector3_y0(r24);
	r17 = bullet_btVector3_z0(r24);
	if( r15 == NULL ) hl_null_access();
	r15->x = r14;
	r15->y = r16;
	r15->z = r17;
	r25 = 1.;
	r19 = (float)r25;
	r15->w = r19;
	r14 = bullet_ConvexResultCallback_get_m_closestHitFraction(r13);
	r29 = (armory__trait__physics__bullet__ConvexHit)hl_alloc_obj(&t$armory_trait_physics_bullet_ConvexHit);
	r15 = r0->convexHitPointWorld;
	r28 = r0->convexHitNormalWorld;
	r25 = (double)r14;
	armory_trait_physics_bullet_ConvexHit_new(r29,r15,r28,r25);
	r26 = r29;
	label$e588bd8_17_105:
	bullet_ClosestConvexResultCallback_delete(r13);
	return r26;
}

void armory_trait_physics_bullet_PhysicsWorld_notifyOnPreUpdate(armory__trait__physics__bullet__PhysicsWorld r0,vclosure* r1) {
	hl__types__ArrayObj r3;
	hl_type *r5;
	int r6;
	varray *r4;
	r3 = r0->preUpdates;
	if( r3 ) goto label$e588bd8_18_7;
	r5 = &t$fun_7b48b4f;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r0->preUpdates = r3;
	label$e588bd8_18_7:
	r3 = r0->preUpdates;
	if( r3 == NULL ) hl_null_access();
	r6 = hl_types_ArrayObj_push(r3,((vdynamic*)r1));
	return;
}

void armory_trait_physics_bullet_PhysicsWorld_removePreUpdate(armory__trait__physics__bullet__PhysicsWorld r0,vclosure* r1) {
	hl__types__ArrayObj r3;
	bool r2;
	r3 = r0->preUpdates;
	if( r3 == NULL ) hl_null_access();
	r2 = hl_types_ArrayObj_remove(r3,((vdynamic*)r1));
	return;
}

void armory_trait_physics_bullet_PhysicsWorld_setDebugDrawMode(armory__trait__physics__bullet__PhysicsWorld r0,int r1) {
	armory__trait__physics__bullet__DebugDrawHelper r3;
	int r4;
	r3 = r0->debugDrawHelper;
	if( r3 ) goto label$e588bd8_20_6;
	r4 = 0;
	if( r1 != r4 ) goto label$e588bd8_20_5;
	return;
	label$e588bd8_20_5:
	armory_trait_physics_bullet_PhysicsWorld_initDebugDrawing(r0);
	label$e588bd8_20_6:
	bullet_debugDrawer_setDebugMode(r1);
	return;
}

int armory_trait_physics_bullet_PhysicsWorld_getDebugDrawMode(armory__trait__physics__bullet__PhysicsWorld r0) {
	armory__trait__physics__bullet__DebugDrawHelper r1;
	int r2;
	r1 = r0->debugDrawHelper;
	if( r1 ) goto label$e588bd8_21_4;
	r2 = 0;
	return r2;
	label$e588bd8_21_4:
	r2 = bullet_debugDrawer_getDebugMode();
	return r2;
}

void armory_trait_physics_bullet_PhysicsWorld_initDebugDrawing(armory__trait__physics__bullet__PhysicsWorld r0) {
	armory__trait__physics__bullet__DebugDrawHelper r1;
	vclosure *r3, *r4, *r5, *r6;
	vbyte *r7;
	r1 = (armory__trait__physics__bullet__DebugDrawHelper)hl_alloc_obj(&t$armory_trait_physics_bullet_DebugDrawHelper);
	armory_trait_physics_bullet_DebugDrawHelper_new(r1,r0);
	r0->debugDrawHelper = r1;
	r1 = r0->debugDrawHelper;
	if( r1 == NULL ) hl_null_access();
	r3 = hl_alloc_closure_ptr(&t$fun_caf2b9c,armory_trait_physics_bullet_DebugDrawHelper_drawLine,r1);
	bullet_debugDrawer_setDrawLine(r3);
	r1 = r0->debugDrawHelper;
	if( r1 == NULL ) hl_null_access();
	r4 = hl_alloc_closure_ptr(&t$fun_75e4ff3,armory_trait_physics_bullet_DebugDrawHelper_drawContactPoint,r1);
	bullet_debugDrawer_setDrawContactPoint(r4);
	r1 = r0->debugDrawHelper;
	if( r1 == NULL ) hl_null_access();
	r5 = hl_alloc_closure_ptr(&t$fun_38f933a,armory_trait_physics_bullet_DebugDrawHelper_reportErrorWarning,r1);
	bullet_debugDrawer_setReportErrorWarning(r5);
	r1 = r0->debugDrawHelper;
	if( r1 == NULL ) hl_null_access();
	r6 = hl_alloc_closure_ptr(&t$fun_b408e5b,armory_trait_physics_bullet_DebugDrawHelper_draw3dText,r1);
	bullet_debugDrawer_setDraw3dText(r6);
	r7 = r0->world;
	bullet_debugDrawer_worldSetGlobalDebugDrawer(r7);
	return;
}

void armory_trait_physics_bullet_PhysicsWorld_new(armory__trait__physics__bullet__PhysicsWorld r0,double* r1,int* r2,int* r3,int* r4) {
	armory__trait__physics__bullet__PhysicsWorld r32;
	armory__trait__physics__bullet__$PhysicsWorld r20;
	hl__types__ArrayObj r19;
	iron__$App r37;
	hl_type *r34;
	iron__$Scene r39;
	iron__Scene r38;
	bool r10;
	haxe__ds__IntMap r35;
	iron__math__Vec4 r11;
	float r22, r23, r24, r31;
	armory__trait__physics__bullet__DebugDrawHelper r9;
	vclosure *r36;
	double r5, r18;
	varray *r33;
	vbyte *r21, *r25, *r26, *r27, *r28, *r29, *r30;
	float *r12, *r13, *r14, *r15;
	int r6, r7, r8, r17;
	static vclosure cl$0 = { &t$fun_7b48b4f, armory_trait_physics_bullet_PhysicsWorld_new__$1, 0 };
	if( r1 ) goto label$e588bd8_23_3;
	r5 = 1.;
	goto label$e588bd8_23_4;
	label$e588bd8_23_3:
	r5 = *r1;
	label$e588bd8_23_4:
	if( r2 ) goto label$e588bd8_23_7;
	r6 = 10;
	goto label$e588bd8_23_8;
	label$e588bd8_23_7:
	r6 = *r2;
	label$e588bd8_23_8:
	if( r3 ) goto label$e588bd8_23_11;
	r7 = 10;
	goto label$e588bd8_23_12;
	label$e588bd8_23_11:
	r7 = *r3;
	label$e588bd8_23_12:
	if( r4 ) goto label$e588bd8_23_15;
	r8 = 0;
	goto label$e588bd8_23_16;
	label$e588bd8_23_15:
	r8 = *r4;
	label$e588bd8_23_16:
	r9 = NULL;
	r0->debugDrawHelper = r9;
	r10 = false;
	r0->pairCache = r10;
	r11 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r12 = NULL;
	r13 = NULL;
	r14 = NULL;
	r15 = NULL;
	iron_math_Vec4_new(r11,r12,r13,r14,r15);
	r0->convexHitNormalWorld = r11;
	r11 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r12 = NULL;
	r13 = NULL;
	r14 = NULL;
	r15 = NULL;
	iron_math_Vec4_new(r11,r12,r13,r14,r15);
	r0->convexHitPointWorld = r11;
	r11 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r12 = NULL;
	r13 = NULL;
	r14 = NULL;
	r15 = NULL;
	iron_math_Vec4_new(r11,r12,r13,r14,r15);
	r0->hitNormalWorld = r11;
	r11 = (iron__math__Vec4)hl_alloc_obj(&t$iron_math_Vec4);
	r12 = NULL;
	r13 = NULL;
	r14 = NULL;
	r15 = NULL;
	iron_math_Vec4_new(r11,r12,r13,r14,r15);
	r0->hitPointWorld = r11;
	r17 = 10;
	r0->solverIterations = r17;
	r17 = 1;
	r0->maxSteps = r17;
	r18 = 1.;
	r0->timeScale = r18;
	r19 = NULL;
	r0->preUpdates = r19;
	r10 = false;
	r0->gimpactRegistered = r10;
	iron_Trait_new(((iron__Trait)r0));
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r10 = r20->nullvec;
	if( !r10 ) goto label$e588bd8_23_110;
	r10 = false;
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r20->nullvec = r10;
	r17 = 0;
	r22 = (float)r17;
	r17 = 0;
	r23 = (float)r17;
	r17 = 0;
	r24 = (float)r17;
	r21 = bullet_btVector3_new3(r22,r23,r24);
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r20->vec1 = r21;
	r17 = 0;
	r22 = (float)r17;
	r17 = 0;
	r23 = (float)r17;
	r17 = 0;
	r24 = (float)r17;
	r25 = bullet_btVector3_new3(r22,r23,r24);
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r20->vec2 = r25;
	r26 = NULL;
	if( r26 ) goto label$e588bd8_23_87;
	r27 = bullet_btTransform_new0();
	goto label$e588bd8_23_89;
	label$e588bd8_23_87:
	r28 = NULL;
	r27 = bullet_btTransform_new2(r26,r28);
	label$e588bd8_23_89:
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r20->transform1 = r27;
	r27 = NULL;
	if( r27 ) goto label$e588bd8_23_95;
	r29 = bullet_btTransform_new0();
	goto label$e588bd8_23_97;
	label$e588bd8_23_95:
	r30 = NULL;
	r29 = bullet_btTransform_new2(r27,r30);
	label$e588bd8_23_97:
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r20->transform2 = r29;
	r17 = 0;
	r22 = (float)r17;
	r17 = 0;
	r23 = (float)r17;
	r17 = 0;
	r24 = (float)r17;
	r18 = 1.;
	r31 = (float)r18;
	r29 = bullet_btQuaternion_new4(r22,r23,r24,r31);
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r20->quat1 = r29;
	label$e588bd8_23_110:
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r32 = r20->active;
	if( !r32 ) goto label$e588bd8_23_117;
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r10 = r20->sceneRemoved;
	if( r10 ) goto label$e588bd8_23_117;
	return;
	label$e588bd8_23_117:
	r10 = false;
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r20->sceneRemoved = r10;
	r0->timeScale = r5;
	r0->maxSteps = r6;
	r0->solverIterations = r7;
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r32 = r20->active;
	if( r32 ) goto label$e588bd8_23_128;
	armory_trait_physics_bullet_PhysicsWorld_createPhysics(r0);
	goto label$e588bd8_23_143;
	label$e588bd8_23_128:
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r32 = r20->active;
	if( r32 == NULL ) hl_null_access();
	r21 = r32->world;
	r0->world = r21;
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r32 = r20->active;
	if( r32 == NULL ) hl_null_access();
	r21 = r32->dispatcher;
	r0->dispatcher = r21;
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r32 = r20->active;
	if( r32 == NULL ) hl_null_access();
	r10 = r32->gimpactRegistered;
	r0->gimpactRegistered = r10;
	label$e588bd8_23_143:
	r34 = &t$armory_trait_physics_bullet_ContactPair;
	r17 = 0;
	r33 = hl_alloc_array(r34,r17);
	r19 = hl_types_ArrayObj_alloc(r33);
	r0->contacts = r19;
	r35 = (haxe__ds__IntMap)hl_alloc_obj(&t$haxe_ds_IntMap);
	haxe_ds_IntMap_new(r35);
	r0->rbMap = r35;
	r35 = (haxe__ds__IntMap)hl_alloc_obj(&t$haxe_ds_IntMap);
	haxe_ds_IntMap_new(r35);
	r0->conMap = r35;
	r20 = (armory__trait__physics__bullet__$PhysicsWorld)g$e9bc575;
	r20->active = r0;
	r34 = &t$fun_7b48b4f;
	r17 = 1;
	r33 = hl_alloc_array(r34,r17);
	r36 = hl_alloc_closure_ptr(&t$fun_b71464e,armory_trait_physics_bullet_PhysicsWorld_lateUpdate,r0);
	r17 = 0;
	((vclosure**)(r33 + 1))[r17] = r36;
	r19 = hl_types_ArrayObj_alloc(r33);
	r0->_lateUpdate = r19;
	r37 = (iron__$App)g$_iron_App;
	r19 = r37->traitLateUpdates;
	if( r19 == NULL ) hl_null_access();
	r17 = 0;
	r36 = hl_alloc_closure_ptr(&t$fun_b71464e,armory_trait_physics_bullet_PhysicsWorld_lateUpdate,r0);
	hl_types_ArrayObj_insert(r19,r17,((vdynamic*)r36));
	armory_trait_physics_bullet_PhysicsWorld_setDebugDrawMode(r0,r8);
	r39 = (iron__$Scene)g$_iron_Scene;
	r38 = r39->active;
	if( r38 == NULL ) hl_null_access();
	r36 = &cl$0;
	iron_Scene_notifyOnRemove(r38,r36);
	return;
}

