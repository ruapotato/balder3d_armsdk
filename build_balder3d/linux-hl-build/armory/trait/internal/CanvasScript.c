// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <armory/trait/internal/CanvasScript.h>
#include <kha/Kravur.h>
#include <haxe/ds/IntMap.h>
#include <armory/ui/Canvas.h>
extern armory__ui__$Canvas g$_armory_ui_Canvas;
extern hl_type t$_i32;
void haxe_ds_IntMap_set(haxe__ds__IntMap,int,vdynamic*);
void hl_types_ArrayBytes_Int___expand(hl__types__ArrayBytes_Int,int);
extern hl_type t$hl_types_ArrayObj;
#include <kha/Image.h>
vvirtual* armory_ui_Canvas_parseCanvasFromBlob(kha__internal__BytesBlob);
extern hl_type t$String;
extern hl_type t$vrt_feeb735;
vvirtual* armory_ui_Canvas_getTheme(String);
extern hl_type t$zui_Zui;
extern hl_type t$vrt_ec9b7f7;
extern hl_type t$kha_Kravur;
extern hl_type t$vrt_1478bc9;
void zui_Zui_new(zui__Zui,vvirtual*);
#include <hl/natives.h>
hl__types__ArrayBytes_Int hl_types_ArrayBase_allocI32(vbyte*,int);
extern hl_type t$vrt_6bfdb92;
String String_toLowerCase(String);
extern String s$_ttf;
bool StringTools_endsWith(String,String);
extern hl_type t$ctx_b630e3a;
extern hl_type t$fun_ceb10e6;
void iron_data_Data_getFont(String,vclosure*);
extern hl_type t$fun_6f927cb;
void iron_data_Data_getImage(String,vclosure*,bool*,String);
#include <haxe/format/JsonParser.h>
#include <hl/types/ArrayDyn.h>
#include <haxe/Log.h>
#include <armory/ui/Themes.h>
int kha_internal_BytesBlob_get_length(kha__internal__BytesBlob);
extern hl_type t$haxe_format_JsonParser;
String kha_internal_BytesBlob_toString(kha__internal__BytesBlob);
void haxe_format_JsonParser_new(haxe__format__JsonParser,String);
vdynamic* haxe_format_JsonParser_doParse(haxe__format__JsonParser);
extern hl_type t$_dyn;
extern haxe__$Log g$_haxe_Log;
extern String s$fd5f24f;
extern hl_type t$vrt_329ffa8;
extern String s$ffd800f;
extern String s$0026874;
extern String s$new;
extern hl_type t$vrt_eaa6a3b;
extern armory__ui__$Themes g$_armory_ui_Themes;
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern hl_type t$fun_ef99ca2;
extern String s$_themes_json;
extern hl_type t$ctx_a908ca5;
extern hl_type t$fun_65a89fd;
void iron_data_Data_getBlob(String,vclosure*);
#include <kha/graphics2/Graphics.h>
int kha_System_windowWidth(int*);
int kha_System_windowHeight(int*);
void armory_trait_internal_CanvasScript_setCanvasDimensions(armory__trait__internal__CanvasScript,int,int);
hl__types__ArrayObj armory_ui_Canvas_draw(zui__Zui,vvirtual*,kha__graphics2__Graphics);
hl__types__ArrayObj armory_system_Event_get(String);
extern hl_type t$vrt_68dcaf9;
extern hl_type t$fun_7b48b4f;
void hl_types_ArrayObj_resize(hl__types__ArrayObj,int);
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type t$vrt_c5bc1e7;
int String___compare(String,vdynamic*);
void zui_Zui_setScale(zui__Zui,double);
extern hl_type t$nul_f64;
extern hl_type t$_bool;
#include <zui/Handle.h>
void zui_Zui_startTextEdit(zui__Zui,zui__Handle,int*);
void zui_Zui_deselectText(zui__Zui);
vdynamic* haxe_ds_IntMap_get(haxe__ds__IntMap,int);
#include <iron/Scene.h>
#include <iron/object/CameraObject.h>
extern iron__$Scene g$_iron_Scene;
extern armory__trait__internal__$CanvasScript g$1e15706;
vdynamic* iron_Scene_getTrait(iron__Scene,hl__Class);
extern hl_type t$armory_trait_internal_CanvasScript;
iron__Trait iron_object_Object_getTrait(iron__object__Object,hl__Class);
extern String s$font_default_ttf;
void iron_Trait_new(iron__Trait);
extern String s$_json;
String String___add__(String,String);
extern hl_type t$ctx_cc7f9ad;
extern hl_type t$fun_89cc08e;
extern hl_type t$fun_3559b8d;
void iron_Trait_notifyOnRender2D(iron__Trait,vclosure*);

bool armory_trait_internal_CanvasScript_get_ready(armory__trait__internal__CanvasScript r0) {
	vvirtual *r2, *r3;
	bool r1;
	r2 = r0->canvas;
	r3 = NULL;
	if( r2 != r3 && (!r2 || !r3 || !r2->value || !r3->value || r2->value != r3->value) ) goto label$64f856d_1_5;
	r1 = false;
	goto label$64f856d_1_6;
	label$64f856d_1_5:
	r1 = true;
	label$64f856d_1_6:
	return r1;
}

void armory_trait_internal_CanvasScript_new__$4(venum* r0,kha__Kravur r1) {
	hl__types__ArrayObj r11;
	vvirtual *r6, *r12;
	armory__ui__$Canvas r4;
	haxe__ds__IntMap r3;
	hl__types__ArrayBytes_Int r7;
	armory__trait__internal__CanvasScript r13;
	vbyte *r9;
	int r5, r8, r10;
	r4 = (armory__ui__$Canvas)g$_armory_ui_Canvas;
	r3 = r4->assetMap;
	if( r3 == NULL ) hl_null_access();
	r6 = ((Enumt$ctx_b630e3a*)r0)->p3;
	if( r6 == NULL ) hl_null_access();
	r5 = hl_vfields(r6)[1] ? (*(int*)(hl_vfields(r6)[1])) : (int)hl_dyn_geti(r6->value,23515/*id*/,&t$_i32);
	haxe_ds_IntMap_set(r3,r5,((vdynamic*)r1));
	r7 = ((Enumt$ctx_b630e3a*)r0)->p2;
	if( r7 == NULL ) hl_null_access();
	r5 = 0;
	r8 = r7->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$64f856d_2_13;
	hl_types_ArrayBytes_Int___expand(r7,r5);
	label$64f856d_2_13:
	r9 = r7->bytes;
	r8 = 2;
	r8 = r5 << r8;
	r10 = *(int*)(r9 + r8);
	++r10;
	*(int*)(r9 + r8) = r10;
	r12 = ((Enumt$ctx_b630e3a*)r0)->p0;
	if( r12 == NULL ) hl_null_access();
	r11 = hl_vfields(r12)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r12)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r12->value,201542029/*assets*/,&t$hl_types_ArrayObj);
	if( r11 == NULL ) hl_null_access();
	r5 = r11->length;
	if( r10 < r5 ) goto label$64f856d_2_29;
	r13 = ((Enumt$ctx_b630e3a*)r0)->p1;
	if( r13 == NULL ) hl_null_access();
	r12 = ((Enumt$ctx_b630e3a*)r0)->p0;
	r13->canvas = r12;
	label$64f856d_2_29:
	return;
}

void armory_trait_internal_CanvasScript_new__$5(venum* r0,kha__Image r1) {
	hl__types__ArrayObj r11;
	vvirtual *r6, *r12;
	armory__ui__$Canvas r4;
	haxe__ds__IntMap r3;
	hl__types__ArrayBytes_Int r7;
	armory__trait__internal__CanvasScript r13;
	vbyte *r9;
	int r5, r8, r10;
	r4 = (armory__ui__$Canvas)g$_armory_ui_Canvas;
	r3 = r4->assetMap;
	if( r3 == NULL ) hl_null_access();
	r6 = ((Enumt$ctx_b630e3a*)r0)->p3;
	if( r6 == NULL ) hl_null_access();
	r5 = hl_vfields(r6)[1] ? (*(int*)(hl_vfields(r6)[1])) : (int)hl_dyn_geti(r6->value,23515/*id*/,&t$_i32);
	haxe_ds_IntMap_set(r3,r5,((vdynamic*)r1));
	r7 = ((Enumt$ctx_b630e3a*)r0)->p2;
	if( r7 == NULL ) hl_null_access();
	r5 = 0;
	r8 = r7->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$64f856d_3_13;
	hl_types_ArrayBytes_Int___expand(r7,r5);
	label$64f856d_3_13:
	r9 = r7->bytes;
	r8 = 2;
	r8 = r5 << r8;
	r10 = *(int*)(r9 + r8);
	++r10;
	*(int*)(r9 + r8) = r10;
	r12 = ((Enumt$ctx_b630e3a*)r0)->p0;
	if( r12 == NULL ) hl_null_access();
	r11 = hl_vfields(r12)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r12)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r12->value,201542029/*assets*/,&t$hl_types_ArrayObj);
	if( r11 == NULL ) hl_null_access();
	r5 = r11->length;
	if( r10 < r5 ) goto label$64f856d_3_29;
	r13 = ((Enumt$ctx_b630e3a*)r0)->p1;
	if( r13 == NULL ) hl_null_access();
	r12 = ((Enumt$ctx_b630e3a*)r0)->p0;
	r13->canvas = r12;
	label$64f856d_3_29:
	return;
}

void armory_trait_internal_CanvasScript_new__$3(venum* r0,kha__Kravur r1) {
	bool *r27;
	String r5, r21, r23;
	hl__types__ArrayObj r6;
	vvirtual *r2, *r10, *r15, *r16, *r20;
	venum *r25;
	bool r22;
	armory__ui__$Canvas r7;
	hl__types__ArrayBytes_Int r17;
	zui__Zui r14;
	kha__internal__BytesBlob r3;
	vclosure *r24, *r26;
	vdynamic *r11;
	vbyte *r18;
	armory__trait__internal__CanvasScript r13;
	varray *r12;
	int r8, r9, r19;
	r3 = ((Enumt$ctx_a908ca5*)r0)->p1;
	r2 = armory_ui_Canvas_parseCanvasFromBlob(r3);
	if( r2 == NULL ) hl_null_access();
	r5 = hl_vfields(r2)[5] ? (*(String*)(hl_vfields(r2)[5])) : (String)hl_dyn_getp(r2->value,260472329/*theme*/,&t$String);
	if( r5 ) goto label$64f856d_4_19;
	r7 = (armory__ui__$Canvas)g$_armory_ui_Canvas;
	r6 = r7->themes;
	if( r6 == NULL ) hl_null_access();
	r8 = 0;
	r9 = r6->length;
	if( ((unsigned)r8) < ((unsigned)r9) ) goto label$64f856d_4_13;
	r10 = NULL;
	goto label$64f856d_4_16;
	label$64f856d_4_13:
	r12 = r6->array;
	r11 = ((vdynamic**)(r12 + 1))[r8];
	r10 = hl_to_virtual(&t$vrt_feeb735,(vdynamic*)r11);
	label$64f856d_4_16:
	if( r10 == NULL ) hl_null_access();
	r5 = hl_vfields(r10)[23] ? (*(String*)(hl_vfields(r10)[23])) : (String)hl_dyn_getp(r10->value,331365072/*NAME*/,&t$String);
	if( hl_vfields(r2)[5] ) *(String*)(hl_vfields(r2)[5]) = (String)r5; else hl_dyn_setp(r2->value,260472329/*theme*/,&t$String,r5);
	label$64f856d_4_19:
	r5 = hl_vfields(r2)[5] ? (*(String*)(hl_vfields(r2)[5])) : (String)hl_dyn_getp(r2->value,260472329/*theme*/,&t$String);
	r10 = armory_ui_Canvas_getTheme(r5);
	r13 = ((Enumt$ctx_a908ca5*)r0)->p2;
	if( r13 == NULL ) hl_null_access();
	r14 = (zui__Zui)hl_alloc_obj(&t$zui_Zui);
	r15 = hl_alloc_virtual(&t$vrt_ec9b7f7);
	if( hl_vfields(r15)[0] ) *(kha__Kravur*)(hl_vfields(r15)[0]) = (kha__Kravur)r1; else hl_dyn_setp(r15->value,62938841/*font*/,&t$kha_Kravur,r1);
	if( hl_vfields(r15)[1] ) *(vvirtual**)(hl_vfields(r15)[1]) = (vvirtual*)r10; else hl_dyn_setp(r15->value,260472329/*theme*/,&t$vrt_feeb735,r10);
	r16 = hl_to_virtual(&t$vrt_1478bc9,(vdynamic*)r15);
	zui_Zui_new(r14,r16);
	r13->cui = r14;
	r6 = hl_vfields(r2)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r2)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r2->value,201542029/*assets*/,&t$hl_types_ArrayObj);
	if( !r6 ) goto label$64f856d_4_37;
	r6 = hl_vfields(r2)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r2)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r2->value,201542029/*assets*/,&t$hl_types_ArrayObj);
	if( r6 == NULL ) hl_null_access();
	r8 = r6->length;
	r9 = 0;
	if( r8 != r9 ) goto label$64f856d_4_41;
	label$64f856d_4_37:
	r13 = ((Enumt$ctx_a908ca5*)r0)->p2;
	if( r13 == NULL ) hl_null_access();
	r13->canvas = r2;
	goto label$64f856d_4_93;
	label$64f856d_4_41:
	r8 = 4;
	r18 = hl_alloc_bytes(r8);
	r8 = 0;
	r9 = 0;
	r19 = 2;
	r19 = r8 << r19;
	*(int*)(r18 + r19) = r9;
	++r8;
	r8 = 1;
	r17 = hl_types_ArrayBase_allocI32(r18,r8);
	r8 = 0;
	r6 = hl_vfields(r2)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r2)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r2->value,201542029/*assets*/,&t$hl_types_ArrayObj);
	label$64f856d_4_53:
	if( r6 == NULL ) hl_null_access();
	r19 = r6->length;
	if( r8 >= r19 ) goto label$64f856d_4_93;
	r19 = r6->length;
	if( ((unsigned)r8) < ((unsigned)r19) ) goto label$64f856d_4_61;
	r20 = NULL;
	goto label$64f856d_4_64;
	label$64f856d_4_61:
	r12 = r6->array;
	r11 = ((vdynamic**)(r12 + 1))[r8];
	r20 = hl_to_virtual(&t$vrt_6bfdb92,(vdynamic*)r11);
	label$64f856d_4_64:
	++r8;
	if( r20 == NULL ) hl_null_access();
	r5 = hl_vfields(r20)[2] ? (*(String*)(hl_vfields(r20)[2])) : (String)hl_dyn_getp(r20->value,150958933/*name*/,&t$String);
	if( !r5 ) goto label$64f856d_4_82;
	if( r5 == NULL ) hl_null_access();
	r21 = String_toLowerCase(r5);
	r23 = (String)s$_ttf;
	r22 = StringTools_endsWith(r21,r23);
	if( !r22 ) goto label$64f856d_4_82;
	r25 = hl_alloc_enum(&t$ctx_b630e3a,0);
	((Enumt$ctx_b630e3a*)r25)->p0 = (vvirtual*)r2;
	r13 = ((Enumt$ctx_a908ca5*)r0)->p2;
	((Enumt$ctx_b630e3a*)r25)->p1 = (armory__trait__internal__CanvasScript)r13;
	((Enumt$ctx_b630e3a*)r25)->p2 = (hl__types__ArrayBytes_Int)r17;
	((Enumt$ctx_b630e3a*)r25)->p3 = (vvirtual*)r20;
	r24 = hl_alloc_closure_ptr(&t$fun_ceb10e6,armory_trait_internal_CanvasScript_new__$4,r25);
	iron_data_Data_getFont(r5,r24);
	goto label$64f856d_4_92;
	label$64f856d_4_82:
	r25 = hl_alloc_enum(&t$ctx_b630e3a,0);
	((Enumt$ctx_b630e3a*)r25)->p0 = (vvirtual*)r2;
	r13 = ((Enumt$ctx_a908ca5*)r0)->p2;
	((Enumt$ctx_b630e3a*)r25)->p1 = (armory__trait__internal__CanvasScript)r13;
	((Enumt$ctx_b630e3a*)r25)->p2 = (hl__types__ArrayBytes_Int)r17;
	((Enumt$ctx_b630e3a*)r25)->p3 = (vvirtual*)r20;
	r26 = hl_alloc_closure_ptr(&t$fun_6f927cb,armory_trait_internal_CanvasScript_new__$5,r25);
	r27 = NULL;
	r23 = NULL;
	iron_data_Data_getImage(r5,r26,r27,r23);
	label$64f856d_4_92:
	goto label$64f856d_4_53;
	label$64f856d_4_93:
	return;
}

void armory_trait_internal_CanvasScript_new__$2(venum* r0,kha__internal__BytesBlob r1) {
	String r7, r13;
	armory__ui__$Themes r16;
	vvirtual *r12, *r14, *r15;
	hl__types__ArrayObj r8;
	armory__ui__$Canvas r9;
	haxe__format__JsonParser r6;
	haxe__$Log r11;
	vclosure *r10, *r17;
	vdynamic *r5;
	int r3, r4;
	if( r1 == NULL ) hl_null_access();
	r3 = kha_internal_BytesBlob_get_length(r1);
	r4 = 0;
	if( r3 == r4 ) goto label$64f856d_5_12;
	r6 = (haxe__format__JsonParser)hl_alloc_obj(&t$haxe_format_JsonParser);
	r7 = kha_internal_BytesBlob_toString(r1);
	haxe_format_JsonParser_new(r6,r7);
	r5 = haxe_format_JsonParser_doParse(r6);
	r8 = (hl__types__ArrayObj)hl_dyn_castp(&r5,&t$_dyn,&t$hl_types_ArrayObj);
	r9 = (armory__ui__$Canvas)g$_armory_ui_Canvas;
	r9->themes = r8;
	goto label$64f856d_5_27;
	label$64f856d_5_12:
	r11 = (haxe__$Log)g$_haxe_Log;
	r10 = r11->trace;
	if( r10 == NULL ) hl_null_access();
	r7 = (String)s$fd5f24f;
	r12 = hl_alloc_virtual(&t$vrt_329ffa8);
	r13 = (String)s$ffd800f;
	if( hl_vfields(r12)[1] ) *(String*)(hl_vfields(r12)[1]) = (String)r13; else hl_dyn_setp(r12->value,37969014/*fileName*/,&t$String,r13);
	r3 = 39;
	if( hl_vfields(r12)[2] ) *(int*)(hl_vfields(r12)[2]) = (int)r3; else hl_dyn_seti(r12->value,371360620/*lineNumber*/,&t$_i32,r3);
	r13 = (String)s$0026874;
	if( hl_vfields(r12)[0] ) *(String*)(hl_vfields(r12)[0]) = (String)r13; else hl_dyn_setp(r12->value,-63073762/*className*/,&t$String,r13);
	r13 = (String)s$new;
	if( hl_vfields(r12)[3] ) *(String*)(hl_vfields(r12)[3]) = (String)r13; else hl_dyn_setp(r12->value,302979532/*methodName*/,&t$String,r13);
	r14 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r12);
	r10->hasValue ? ((void (*)(vdynamic*,vdynamic*,vvirtual*))r10->fun)((vdynamic*)r10->value,((vdynamic*)r7),r14) : ((void (*)(vdynamic*,vvirtual*))r10->fun)(((vdynamic*)r7),r14);
	label$64f856d_5_27:
	r9 = (armory__ui__$Canvas)g$_armory_ui_Canvas;
	r8 = r9->themes;
	if( r8 == NULL ) hl_null_access();
	r3 = r8->length;
	r4 = 0;
	if( r3 != r4 ) goto label$64f856d_5_39;
	r9 = (armory__ui__$Canvas)g$_armory_ui_Canvas;
	r8 = r9->themes;
	if( r8 == NULL ) hl_null_access();
	r16 = (armory__ui__$Themes)g$_armory_ui_Themes;
	r15 = r16->light;
	r3 = hl_types_ArrayObj_push(r8,((vdynamic*)r15));
	label$64f856d_5_39:
	r7 = ((Enumt$ctx_a908ca5*)r0)->p0;
	r17 = hl_alloc_closure_ptr(&t$fun_ef99ca2,armory_trait_internal_CanvasScript_new__$3,r0);
	iron_data_Data_getFont(r7,r17);
	return;
}

void armory_trait_internal_CanvasScript_new__$1(venum* r0,kha__internal__BytesBlob r1) {
	String r3, r6;
	venum *r5;
	vclosure *r4;
	armory__trait__internal__CanvasScript r7;
	r3 = (String)s$_themes_json;
	r5 = hl_alloc_enum(&t$ctx_a908ca5,0);
	r6 = ((Enumt$ctx_cc7f9ad*)r0)->p0;
	((Enumt$ctx_a908ca5*)r5)->p0 = (String)r6;
	((Enumt$ctx_a908ca5*)r5)->p1 = (kha__internal__BytesBlob)r1;
	r7 = ((Enumt$ctx_cc7f9ad*)r0)->p1;
	((Enumt$ctx_a908ca5*)r5)->p2 = (armory__trait__internal__CanvasScript)r7;
	r4 = hl_alloc_closure_ptr(&t$fun_65a89fd,armory_trait_internal_CanvasScript_new__$2,r5);
	iron_data_Data_getBlob(r3,r4);
	return;
}

void armory_trait_internal_CanvasScript_new__$6(armory__trait__internal__CanvasScript r0,kha__graphics2__Graphics r1) {
	String r12;
	hl__types__ArrayObj r8, r11;
	vvirtual *r3, *r15;
	zui__Zui r9;
	vclosure *r16;
	int *r6;
	vdynamic *r4;
	varray *r13;
	int r5, r7, r10, r14;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->canvas;
	if( r3 ) goto label$64f856d_7_4;
	return;
	label$64f856d_7_4:
	r6 = NULL;
	r5 = kha_System_windowWidth(r6);
	r6 = NULL;
	r7 = kha_System_windowHeight(r6);
	armory_trait_internal_CanvasScript_setCanvasDimensions(r0,r5,r7);
	r9 = r0->cui;
	r3 = r0->canvas;
	r8 = armory_ui_Canvas_draw(r9,r3,r1);
	r5 = 0;
	label$64f856d_7_13:
	if( r8 == NULL ) hl_null_access();
	r10 = r8->length;
	if( r5 >= r10 ) goto label$64f856d_7_46;
	r10 = r8->length;
	if( ((unsigned)r5) < ((unsigned)r10) ) goto label$64f856d_7_21;
	r12 = NULL;
	goto label$64f856d_7_24;
	label$64f856d_7_21:
	r13 = r8->array;
	r4 = ((vdynamic**)(r13 + 1))[r5];
	r12 = (String)r4;
	label$64f856d_7_24:
	++r5;
	r11 = armory_system_Event_get(r12);
	if( !r11 ) goto label$64f856d_7_45;
	r7 = 0;
	label$64f856d_7_28:
	if( r11 == NULL ) hl_null_access();
	r14 = r11->length;
	if( r7 >= r14 ) goto label$64f856d_7_45;
	r14 = r11->length;
	if( ((unsigned)r7) < ((unsigned)r14) ) goto label$64f856d_7_36;
	r15 = NULL;
	goto label$64f856d_7_39;
	label$64f856d_7_36:
	r13 = r11->array;
	r4 = ((vdynamic**)(r13 + 1))[r7];
	r15 = hl_to_virtual(&t$vrt_68dcaf9,(vdynamic*)r4);
	label$64f856d_7_39:
	++r7;
	if( r15 == NULL ) hl_null_access();
	r16 = hl_vfields(r15)[2] ? (*(vclosure**)(hl_vfields(r15)[2])) : (vclosure*)hl_dyn_getp(r15->value,201483899/*onEvent*/,&t$fun_7b48b4f);
	if( r16 == NULL ) hl_null_access();
	r16->hasValue ? ((void (*)(vdynamic*))r16->fun)((vdynamic*)r16->value) : ((void (*)(void))r16->fun)();
	goto label$64f856d_7_28;
	label$64f856d_7_45:
	goto label$64f856d_7_13;
	label$64f856d_7_46:
	if( r0 == NULL ) hl_null_access();
	r11 = r0->onReadyFuncs;
	if( !r11 ) goto label$64f856d_7_71;
	r5 = 0;
	r11 = r0->onReadyFuncs;
	label$64f856d_7_51:
	if( r11 == NULL ) hl_null_access();
	r10 = r11->length;
	if( r5 >= r10 ) goto label$64f856d_7_66;
	r10 = r11->length;
	if( ((unsigned)r5) < ((unsigned)r10) ) goto label$64f856d_7_59;
	r16 = NULL;
	goto label$64f856d_7_62;
	label$64f856d_7_59:
	r13 = r11->array;
	r4 = ((vdynamic**)(r13 + 1))[r5];
	r16 = (vclosure*)r4;
	label$64f856d_7_62:
	++r5;
	if( r16 == NULL ) hl_null_access();
	r16->hasValue ? ((void (*)(vdynamic*))r16->fun)((vdynamic*)r16->value) : ((void (*)(void))r16->fun)();
	goto label$64f856d_7_51;
	label$64f856d_7_66:
	if( r0 == NULL ) hl_null_access();
	r11 = r0->onReadyFuncs;
	if( r11 == NULL ) hl_null_access();
	r5 = 0;
	hl_types_ArrayObj_resize(r11,r5);
	label$64f856d_7_71:
	return;
}

void armory_trait_internal_CanvasScript_notifyOnReady(armory__trait__internal__CanvasScript r0,vclosure* r1) {
	hl__types__ArrayObj r3;
	hl_type *r5;
	int r6;
	varray *r4;
	r3 = r0->onReadyFuncs;
	if( r3 ) goto label$64f856d_8_7;
	r5 = &t$fun_7b48b4f;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r0->onReadyFuncs = r3;
	label$64f856d_8_7:
	r3 = r0->onReadyFuncs;
	if( r3 == NULL ) hl_null_access();
	r6 = hl_types_ArrayObj_push(r3,((vdynamic*)r1));
	return;
}

vvirtual* armory_trait_internal_CanvasScript_getElement(armory__trait__internal__CanvasScript r0,String r1) {
	String r9;
	vvirtual *r4, *r6;
	hl__types__ArrayObj r3;
	vdynamic *r7;
	varray *r8;
	int r2, r5;
	r2 = 0;
	r4 = r0->canvas;
	if( r4 == NULL ) hl_null_access();
	r3 = hl_vfields(r4)[1] ? (*(hl__types__ArrayObj*)(hl_vfields(r4)[1])) : (hl__types__ArrayObj)hl_dyn_getp(r4->value,-473680728/*elements*/,&t$hl_types_ArrayObj);
	label$64f856d_9_4:
	if( r3 == NULL ) hl_null_access();
	r5 = r3->length;
	if( r2 >= r5 ) goto label$64f856d_9_21;
	r5 = r3->length;
	if( ((unsigned)r2) < ((unsigned)r5) ) goto label$64f856d_9_12;
	r6 = NULL;
	goto label$64f856d_9_15;
	label$64f856d_9_12:
	r8 = r3->array;
	r7 = ((vdynamic**)(r8 + 1))[r2];
	r6 = hl_to_virtual(&t$vrt_c5bc1e7,(vdynamic*)r7);
	label$64f856d_9_15:
	++r2;
	if( r6 == NULL ) hl_null_access();
	r9 = hl_vfields(r6)[13] ? (*(String*)(hl_vfields(r6)[13])) : (String)hl_dyn_getp(r6->value,150958933/*name*/,&t$String);
	if( r9 != r1 && (!r9 || !r1 || String___compare(r9,(vdynamic*)r1) != 0) ) goto label$64f856d_9_20;
	return r6;
	label$64f856d_9_20:
	goto label$64f856d_9_4;
	label$64f856d_9_21:
	r6 = NULL;
	return r6;
}

hl__types__ArrayObj armory_trait_internal_CanvasScript_getElements(armory__trait__internal__CanvasScript r0) {
	vvirtual *r2;
	hl__types__ArrayObj r1;
	r2 = r0->canvas;
	if( r2 == NULL ) hl_null_access();
	r1 = hl_vfields(r2)[1] ? (*(hl__types__ArrayObj*)(hl_vfields(r2)[1])) : (hl__types__ArrayObj)hl_dyn_getp(r2->value,-473680728/*elements*/,&t$hl_types_ArrayObj);
	return r1;
}

vvirtual* armory_trait_internal_CanvasScript_getCanvas(armory__trait__internal__CanvasScript r0) {
	vvirtual *r1;
	r1 = r0->canvas;
	return r1;
}

void armory_trait_internal_CanvasScript_setUiScale(armory__trait__internal__CanvasScript r0,double r1) {
	zui__Zui r3;
	r3 = r0->cui;
	if( r3 == NULL ) hl_null_access();
	zui_Zui_setScale(r3,r1);
	return;
}

double armory_trait_internal_CanvasScript_getUiScale(armory__trait__internal__CanvasScript r0) {
	vvirtual *r2;
	zui__Zui r3;
	double r4;
	vdynamic *r1;
	r3 = r0->cui;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->ops;
	if( r2 == NULL ) hl_null_access();
	r1 = hl_vfields(r2)[5] ? (*(vdynamic**)(hl_vfields(r2)[5])) : (vdynamic*)hl_dyn_getp(r2->value,-267297164/*scaleFactor*/,&t$nul_f64);
	r4 = r1 ? r1->v.d : 0;
	return r4;
}

void armory_trait_internal_CanvasScript_setCanvasVisibility(armory__trait__internal__CanvasScript r0,bool r1) {
	vvirtual *r2;
	r2 = r0->canvas;
	if( r2 == NULL ) hl_null_access();
	if( hl_vfields(r2)[6] ) *(bool*)(hl_vfields(r2)[6]) = (bool)r1; else hl_dyn_seti(r2->value,-484149400/*visible*/,&t$_bool,r1);
	return;
}

void armory_trait_internal_CanvasScript_setCanvasVisible(armory__trait__internal__CanvasScript r0,bool r1) {
	vvirtual *r2;
	r2 = r0->canvas;
	if( r2 == NULL ) hl_null_access();
	if( hl_vfields(r2)[6] ) *(bool*)(hl_vfields(r2)[6]) = (bool)r1; else hl_dyn_seti(r2->value,-484149400/*visible*/,&t$_bool,r1);
	return;
}

bool armory_trait_internal_CanvasScript_getCanvasVisible(armory__trait__internal__CanvasScript r0) {
	vvirtual *r2;
	bool r1;
	r2 = r0->canvas;
	if( r2 == NULL ) hl_null_access();
	r1 = hl_vfields(r2)[6] ? (*(bool*)(hl_vfields(r2)[6])) : (bool)hl_dyn_geti(r2->value,-484149400/*visible*/,&t$_bool);
	return r1;
}

void armory_trait_internal_CanvasScript_setCanvasDimensions(armory__trait__internal__CanvasScript r0,int r1,int r2) {
	vvirtual *r3;
	r3 = r0->canvas;
	if( r3 == NULL ) hl_null_access();
	if( hl_vfields(r3)[7] ) *(int*)(hl_vfields(r3)[7]) = (int)r1; else hl_dyn_seti(r3->value,-362629759/*width*/,&t$_i32,r1);
	r3 = r0->canvas;
	if( r3 == NULL ) hl_null_access();
	if( hl_vfields(r3)[2] ) *(int*)(hl_vfields(r3)[2]) = (int)r2; else hl_dyn_seti(r3->value,38537191/*height*/,&t$_i32,r2);
	return;
}

void armory_trait_internal_CanvasScript_setCanvasFontSize(armory__trait__internal__CanvasScript r0,int r1) {
	vvirtual *r2, *r6;
	zui__Zui r3, r7;
	double r8;
	vdynamic *r5;
	r3 = r0->cui;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->_t;
	if( r2 == NULL ) hl_null_access();
	if( hl_vfields(r2)[18] ) *(int*)(hl_vfields(r2)[18]) = (int)r1; else hl_dyn_seti(r2->value,-532812062/*FONT_SIZE*/,&t$_i32,r1);
	r3 = r0->cui;
	if( r3 == NULL ) hl_null_access();
	r7 = r0->cui;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->ops;
	if( r6 == NULL ) hl_null_access();
	r5 = hl_vfields(r6)[5] ? (*(vdynamic**)(hl_vfields(r6)[5])) : (vdynamic*)hl_dyn_getp(r6->value,-267297164/*scaleFactor*/,&t$nul_f64);
	r8 = r5 ? r5->v.d : 0;
	zui_Zui_setScale(r3,r8);
	return;
}

int armory_trait_internal_CanvasScript_getCanvasFontSize(armory__trait__internal__CanvasScript r0) {
	vvirtual *r2;
	zui__Zui r3;
	int r1;
	r3 = r0->cui;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->_t;
	if( r2 == NULL ) hl_null_access();
	r1 = hl_vfields(r2)[18] ? (*(int*)(hl_vfields(r2)[18])) : (int)hl_dyn_geti(r2->value,-532812062/*FONT_SIZE*/,&t$_i32);
	return r1;
}

void armory_trait_internal_CanvasScript_setCanvasInputTextFocus(armory__trait__internal__CanvasScript r0,zui__Handle r1,bool r2) {
	bool r4;
	zui__Zui r5;
	int *r6;
	r4 = true;
	if( r2 != r4 ) goto label$64f856d_20_7;
	r5 = r0->cui;
	if( r5 == NULL ) hl_null_access();
	r6 = NULL;
	zui_Zui_startTextEdit(r5,r1,r6);
	goto label$64f856d_20_10;
	label$64f856d_20_7:
	r5 = r0->cui;
	if( r5 == NULL ) hl_null_access();
	zui_Zui_deselectText(r5);
	label$64f856d_20_10:
	return;
}

zui__Handle armory_trait_internal_CanvasScript_getHandle(armory__trait__internal__CanvasScript r0,String r1) {
	vvirtual *r7;
	armory__ui__$Canvas r5;
	haxe__ds__IntMap r3;
	zui__Handle r4;
	vdynamic *r2;
	int r6;
	r5 = (armory__ui__$Canvas)g$_armory_ui_Canvas;
	r4 = r5->h;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->children;
	if( r3 == NULL ) hl_null_access();
	r7 = armory_trait_internal_CanvasScript_getElement(r0,r1);
	if( r7 == NULL ) hl_null_access();
	r6 = hl_vfields(r7)[12] ? (*(int*)(hl_vfields(r7)[12])) : (int)hl_dyn_geti(r7->value,23515/*id*/,&t$_i32);
	r2 = haxe_ds_IntMap_get(r3,r6);
	r4 = (zui__Handle)r2;
	return r4;
}

armory__trait__internal__CanvasScript armory_trait_internal_CanvasScript_getActiveCanvas() {
	armory__trait__internal__$CanvasScript r3;
	iron__$Scene r2;
	iron__Scene r1;
	iron__Trait r6;
	iron__object__CameraObject r7;
	vdynamic *r0;
	armory__trait__internal__CanvasScript r4, r5;
	r2 = (iron__$Scene)g$_iron_Scene;
	r1 = r2->active;
	if( r1 == NULL ) hl_null_access();
	r3 = (armory__trait__internal__$CanvasScript)g$1e15706;
	r0 = iron_Scene_getTrait(r1,((hl__Class)r3));
	r4 = (armory__trait__internal__CanvasScript)hl_dyn_castp(&r0,&t$_dyn,&t$armory_trait_internal_CanvasScript);
	if( r4 ) goto label$64f856d_22_16;
	r2 = (iron__$Scene)g$_iron_Scene;
	r1 = r2->active;
	if( r1 == NULL ) hl_null_access();
	r7 = r1->camera;
	if( r7 == NULL ) hl_null_access();
	r3 = (armory__trait__internal__$CanvasScript)g$1e15706;
	r6 = iron_object_Object_getTrait(((iron__object__Object)r7),((hl__Class)r3));
	r5 = (armory__trait__internal__CanvasScript)r6;
	r4 = r5;
	label$64f856d_22_16:
	return r4;
}

void armory_trait_internal_CanvasScript_new(armory__trait__internal__CanvasScript r0,String r1,String r2) {
	String r3, r7;
	vvirtual *r5;
	hl__types__ArrayObj r4;
	venum *r9;
	vclosure *r8, *r10;
	if( r2 ) goto label$64f856d_23_3;
	r3 = (String)s$font_default_ttf;
	r2 = r3;
	label$64f856d_23_3:
	r4 = NULL;
	r0->onReadyFuncs = r4;
	r5 = NULL;
	r0->canvas = r5;
	iron_Trait_new(((iron__Trait)r0));
	r0->cnvName = r1;
	r7 = (String)s$_json;
	r3 = String___add__(r1,r7);
	r9 = hl_alloc_enum(&t$ctx_cc7f9ad,0);
	((Enumt$ctx_cc7f9ad*)r9)->p0 = (String)r2;
	((Enumt$ctx_cc7f9ad*)r9)->p1 = (armory__trait__internal__CanvasScript)r0;
	r8 = hl_alloc_closure_ptr(&t$fun_89cc08e,armory_trait_internal_CanvasScript_new__$1,r9);
	iron_data_Data_getBlob(r3,r8);
	r10 = hl_alloc_closure_ptr(&t$fun_3559b8d,armory_trait_internal_CanvasScript_new__$6,r0);
	iron_Trait_notifyOnRender2D(((iron__Trait)r0),r10);
	return;
}

