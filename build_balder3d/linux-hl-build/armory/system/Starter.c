// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <armory/system/Starter.h>
#include <hl/types/ArrayObj.h>
#include <iron/Scene.h>
#include <iron/data/Data.h>
extern iron__$Scene g$_iron_Scene;
void iron_App_removeRender2D(vclosure*);
extern armory__system__$Starter g$_armory_system_Starter;
extern iron__data__$Data g$_iron_data_Data;
#include <iron/object/Object.h>
void iron_RenderPath_setActive(iron__RenderPath);
extern hl_type t$fun_0e31624;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type t$fun_a2f9e9e;
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
void iron_App_notifyOnRender2D(vclosure*);
extern hl_type t$fun_d7dda74;
void iron_Scene_setActive(String,vclosure*);
#include <kha/Window.h>
extern hl_type t$fun_a618032;
void iron_App_init(vclosure*);
#include <armory/data/Config.h>
#include <kha/SystemOptions.h>
#include <kha/WindowOptions.h>
#include <kha/FramebufferOptions.h>
extern armory__data__$Config g$_armory_data_Config;
extern hl_type t$vrt_9442311;
extern hl_type t$nul_i32;
extern hl_type t$_i32;
extern hl_type t$nul_bool;
extern hl_type t$nul_f64;
extern hl_type t$_f64;
void armory_object_Uniforms_register(void);
extern hl_type t$kha_SystemOptions;
extern String s$balder3d;
extern hl_type t$kha_WindowOptions;
void kha_WindowOptions_new(kha__WindowOptions,String,vdynamic*,vdynamic*,vdynamic*,vdynamic*,vdynamic*,vdynamic*,vdynamic*,vdynamic*);
extern hl_type t$kha_FramebufferOptions;
void kha_FramebufferOptions_new(kha__FramebufferOptions,vdynamic*,vdynamic*,vdynamic*,vdynamic*,vdynamic*,vdynamic*);
void kha_SystemOptions_new(kha__SystemOptions,String,vdynamic*,vdynamic*,kha__WindowOptions,kha__FramebufferOptions);
extern hl_type t$fun_46cf449;
void kha_System_start(kha__SystemOptions,vclosure*);
hl__types__ArrayBytes_Int hl_types_ArrayBase_allocI32(vbyte*,int);
extern hl_type t$ctx_0a4f392;
void hl_types_ArrayBytes_Int___expand(hl__types__ArrayBytes_Int,int);

void armory_system_Starter_main__$4(hl__types__ArrayObj r0,kha__graphics2__Graphics r1) {
	bool r5;
	iron__$Scene r4;
	iron__Scene r3;
	armory__system__$Starter r12;
	vclosure *r8, *r11;
	vdynamic *r9;
	iron__data__$Data r13;
	varray *r10;
	int r6, r7;
	r4 = (iron__$Scene)g$_iron_Scene;
	r3 = r4->active;
	if( !r3 ) goto label$fb84227_1_19;
	r4 = (iron__$Scene)g$_iron_Scene;
	r3 = r4->active;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->ready;
	if( !r5 ) goto label$fb84227_1_19;
	if( r0 == NULL ) hl_null_access();
	r6 = 0;
	r7 = r0->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$fb84227_1_14;
	r8 = NULL;
	goto label$fb84227_1_17;
	label$fb84227_1_14:
	r10 = r0->array;
	r9 = ((vdynamic**)(r10 + 1))[r6];
	r8 = (vclosure*)r9;
	label$fb84227_1_17:
	iron_App_removeRender2D(r8);
	goto label$fb84227_1_27;
	label$fb84227_1_19:
	r12 = (armory__system__$Starter)g$_armory_system_Starter;
	r11 = r12->drawLoading;
	if( r11 == NULL ) hl_null_access();
	r13 = (iron__data__$Data)g$_iron_data_Data;
	r6 = r13->assetsLoaded;
	r12 = (armory__system__$Starter)g$_armory_system_Starter;
	r7 = r12->numAssets;
	r11->hasValue ? ((void (*)(vdynamic*,kha__graphics2__Graphics,int,int))r11->fun)((vdynamic*)r11->value,r1,r6,r7) : ((void (*)(kha__graphics2__Graphics,int,int))r11->fun)(r1,r6,r7);
	label$fb84227_1_27:
	return;
}

void armory_system_Starter_main__$5(venum* r0,iron__object__Object r1) {
	vclosure *r4;
	iron__RenderPath r3;
	r4 = ((Enumt$ctx_0a4f392*)r0)->p9;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->hasValue ? ((iron__RenderPath (*)(vdynamic*))r4->fun)((vdynamic*)r4->value) : ((iron__RenderPath (*)(void))r4->fun)();
	iron_RenderPath_setActive(r3);
	return;
}

void armory_system_Starter_main__$3(venum* r0) {
	String r9;
	hl__types__ArrayObj r1;
	hl_type *r3;
	vclosure *r5, *r10;
	vdynamic *r8;
	int r4, r7;
	varray *r2;
	r3 = &t$fun_0e31624;
	r4 = 1;
	r2 = hl_alloc_array(r3,r4);
	r5 = NULL;
	r4 = 0;
	((vclosure**)(r2 + 1))[r4] = r5;
	r1 = hl_types_ArrayObj_alloc(r2);
	if( r1 == NULL ) hl_null_access();
	r4 = 0;
	r5 = hl_alloc_closure_ptr(&t$fun_a2f9e9e,armory_system_Starter_main__$4,r1);
	r7 = r1->length;
	if( ((unsigned)r4) < ((unsigned)r7) ) goto label$fb84227_3_13;
	hl_types_ArrayObj___expand(r1,r4);
	label$fb84227_3_13:
	r2 = r1->array;
	((vclosure**)(r2 + 1))[r4] = r5;
	r4 = 0;
	r7 = r1->length;
	if( ((unsigned)r4) < ((unsigned)r7) ) goto label$fb84227_3_20;
	r5 = NULL;
	goto label$fb84227_3_23;
	label$fb84227_3_20:
	r2 = r1->array;
	r8 = ((vdynamic**)(r2 + 1))[r4];
	r5 = (vclosure*)r8;
	label$fb84227_3_23:
	iron_App_notifyOnRender2D(r5);
	r9 = ((Enumt$ctx_0a4f392*)r0)->p0;
	r10 = hl_alloc_closure_ptr(&t$fun_d7dda74,armory_system_Starter_main__$5,r0);
	iron_Scene_setActive(r9,r10);
	return;
}

void armory_system_Starter_main__$2(venum* r0,kha__Window r1) {
	vclosure *r3;
	r3 = hl_alloc_closure_ptr(&t$fun_a618032,armory_system_Starter_main__$3,r0);
	iron_App_init(r3);
	return;
}

void armory_system_Starter_main__$1(venum* r0) {
	String r18, r20;
	vdynobj *r8;
	vvirtual *r6;
	bool r11;
	hl__types__ArrayBytes_Int r2;
	kha__FramebufferOptions r28;
	kha__SystemOptions r17;
	vclosure *r29;
	double r13;
	armory__data__$Config r7;
	vdynamic *r9, *r10, *r12, *r14, *r21, *r22, *r23, *r24, *r25, *r26, *r27;
	kha__WindowOptions r19;
	vbyte *r5;
	int r3, r4, r15, r16;
	r2 = ((Enumt$ctx_0a4f392*)r0)->p10;
	if( r2 == NULL ) hl_null_access();
	r3 = 0;
	r4 = r2->length;
	if( ((unsigned)r3) < ((unsigned)r4) ) goto label$fb84227_5_7;
	r3 = 0;
	goto label$fb84227_5_11;
	label$fb84227_5_7:
	r5 = r2->bytes;
	r4 = 2;
	r4 = r3 << r4;
	r3 = *(int*)(r5 + r4);
	label$fb84227_5_11:
	r4 = 0;
	if( r4 >= r3 ) goto label$fb84227_5_14;
	return;
	label$fb84227_5_14:
	r7 = (armory__data__$Config)g$_armory_data_Config;
	r6 = r7->raw;
	if( r6 ) goto label$fb84227_5_21;
	r8 = hl_alloc_dynobj();
	r6 = hl_to_virtual(&t$vrt_9442311,(vdynamic*)r8);
	r7 = (armory__data__$Config)g$_armory_data_Config;
	r7->raw = r6;
	label$fb84227_5_21:
	r7 = (armory__data__$Config)g$_armory_data_Config;
	r6 = r7->raw;
	if( r6 == NULL ) hl_null_access();
	r9 = hl_vfields(r6)[13] ? (*(vdynamic**)(hl_vfields(r6)[13])) : (vdynamic*)hl_dyn_getp(r6->value,420943452/*window_mode*/,&t$nul_i32);
	if( r9 ) goto label$fb84227_5_29;
	r3 = ((Enumt$ctx_0a4f392*)r0)->p1;
	r9 = hl_alloc_dynamic(&t$_i32);
	r9->v.i = r3;
	if( hl_vfields(r6)[13] ) *(vdynamic**)(hl_vfields(r6)[13]) = (vdynamic*)r9; else hl_dyn_setp(r6->value,420943452/*window_mode*/,&t$nul_i32,r9);
	label$fb84227_5_29:
	r10 = hl_vfields(r6)[15] ? (*(vdynamic**)(hl_vfields(r6)[15])) : (vdynamic*)hl_dyn_getp(r6->value,110727964/*window_resizable*/,&t$nul_bool);
	if( r10 ) goto label$fb84227_5_34;
	r11 = ((Enumt$ctx_0a4f392*)r0)->p2;
	r10 = hl_alloc_dynbool(r11);
	if( hl_vfields(r6)[15] ) *(vdynamic**)(hl_vfields(r6)[15]) = (vdynamic*)r10; else hl_dyn_setp(r6->value,110727964/*window_resizable*/,&t$nul_bool,r10);
	label$fb84227_5_34:
	r10 = hl_vfields(r6)[12] ? (*(vdynamic**)(hl_vfields(r6)[12])) : (vdynamic*)hl_dyn_getp(r6->value,221172604/*window_minimizable*/,&t$nul_bool);
	if( r10 ) goto label$fb84227_5_39;
	r11 = ((Enumt$ctx_0a4f392*)r0)->p3;
	r10 = hl_alloc_dynbool(r11);
	if( hl_vfields(r6)[12] ) *(vdynamic**)(hl_vfields(r6)[12]) = (vdynamic*)r10; else hl_dyn_setp(r6->value,221172604/*window_minimizable*/,&t$nul_bool,r10);
	label$fb84227_5_39:
	r10 = hl_vfields(r6)[11] ? (*(vdynamic**)(hl_vfields(r6)[11])) : (vdynamic*)hl_dyn_getp(r6->value,-397857803/*window_maximizable*/,&t$nul_bool);
	if( r10 ) goto label$fb84227_5_44;
	r11 = ((Enumt$ctx_0a4f392*)r0)->p4;
	r10 = hl_alloc_dynbool(r11);
	if( hl_vfields(r6)[11] ) *(vdynamic**)(hl_vfields(r6)[11]) = (vdynamic*)r10; else hl_dyn_setp(r6->value,-397857803/*window_maximizable*/,&t$nul_bool,r10);
	label$fb84227_5_44:
	r9 = hl_vfields(r6)[18] ? (*(vdynamic**)(hl_vfields(r6)[18])) : (vdynamic*)hl_dyn_getp(r6->value,500024503/*window_w*/,&t$nul_i32);
	if( r9 ) goto label$fb84227_5_49;
	r3 = ((Enumt$ctx_0a4f392*)r0)->p5;
	r9 = hl_alloc_dynamic(&t$_i32);
	r9->v.i = r3;
	if( hl_vfields(r6)[18] ) *(vdynamic**)(hl_vfields(r6)[18]) = (vdynamic*)r9; else hl_dyn_setp(r6->value,500024503/*window_w*/,&t$nul_i32,r9);
	label$fb84227_5_49:
	r9 = hl_vfields(r6)[10] ? (*(vdynamic**)(hl_vfields(r6)[10])) : (vdynamic*)hl_dyn_getp(r6->value,500024488/*window_h*/,&t$nul_i32);
	if( r9 ) goto label$fb84227_5_54;
	r3 = ((Enumt$ctx_0a4f392*)r0)->p6;
	r9 = hl_alloc_dynamic(&t$_i32);
	r9->v.i = r3;
	if( hl_vfields(r6)[10] ) *(vdynamic**)(hl_vfields(r6)[10]) = (vdynamic*)r9; else hl_dyn_setp(r6->value,500024488/*window_h*/,&t$nul_i32,r9);
	label$fb84227_5_54:
	r12 = hl_vfields(r6)[16] ? (*(vdynamic**)(hl_vfields(r6)[16])) : (vdynamic*)hl_dyn_getp(r6->value,127024571/*window_scale*/,&t$nul_f64);
	if( r12 ) goto label$fb84227_5_59;
	r13 = 1.;
	r12 = hl_alloc_dynamic(&t$_f64);
	r12->v.d = r13;
	if( hl_vfields(r6)[16] ) *(vdynamic**)(hl_vfields(r6)[16]) = (vdynamic*)r12; else hl_dyn_setp(r6->value,127024571/*window_scale*/,&t$nul_f64,r12);
	label$fb84227_5_59:
	r9 = hl_vfields(r6)[14] ? (*(vdynamic**)(hl_vfields(r6)[14])) : (vdynamic*)hl_dyn_getp(r6->value,421141695/*window_msaa*/,&t$nul_i32);
	if( r9 ) goto label$fb84227_5_64;
	r3 = ((Enumt$ctx_0a4f392*)r0)->p7;
	r9 = hl_alloc_dynamic(&t$_i32);
	r9->v.i = r3;
	if( hl_vfields(r6)[14] ) *(vdynamic**)(hl_vfields(r6)[14]) = (vdynamic*)r9; else hl_dyn_setp(r6->value,421141695/*window_msaa*/,&t$nul_i32,r9);
	label$fb84227_5_64:
	r10 = hl_vfields(r6)[17] ? (*(vdynamic**)(hl_vfields(r6)[17])) : (vdynamic*)hl_dyn_getp(r6->value,-328491907/*window_vsync*/,&t$nul_bool);
	if( r10 ) goto label$fb84227_5_69;
	r11 = ((Enumt$ctx_0a4f392*)r0)->p8;
	r10 = hl_alloc_dynbool(r11);
	if( hl_vfields(r6)[17] ) *(vdynamic**)(hl_vfields(r6)[17]) = (vdynamic*)r10; else hl_dyn_setp(r6->value,-328491907/*window_vsync*/,&t$nul_bool,r10);
	label$fb84227_5_69:
	armory_object_Uniforms_register();
	r9 = hl_vfields(r6)[13] ? (*(vdynamic**)(hl_vfields(r6)[13])) : (vdynamic*)hl_dyn_getp(r6->value,420943452/*window_mode*/,&t$nul_i32);
	r3 = 0;
	r14 = hl_alloc_dynamic(&t$_i32);
	r14->v.i = r3;
	if( r9 != r14 && (!r9 || !r14 || (r9->v.i != r14->v.i)) ) goto label$fb84227_5_76;
	r3 = 0;
	goto label$fb84227_5_77;
	label$fb84227_5_76:
	r3 = 1;
	label$fb84227_5_77:
	r4 = 0;
	r10 = hl_vfields(r6)[15] ? (*(vdynamic**)(hl_vfields(r6)[15])) : (vdynamic*)hl_dyn_getp(r6->value,110727964/*window_resizable*/,&t$nul_bool);
	r11 = r10 ? r10->v.b : 0;
	if( !r11 ) goto label$fb84227_5_84;
	r16 = 1;
	r15 = r4 | r16;
	r4 = r15;
	label$fb84227_5_84:
	r10 = hl_vfields(r6)[11] ? (*(vdynamic**)(hl_vfields(r6)[11])) : (vdynamic*)hl_dyn_getp(r6->value,-397857803/*window_maximizable*/,&t$nul_bool);
	r11 = r10 ? r10->v.b : 0;
	if( !r11 ) goto label$fb84227_5_90;
	r16 = 4;
	r15 = r4 | r16;
	r4 = r15;
	label$fb84227_5_90:
	r10 = hl_vfields(r6)[12] ? (*(vdynamic**)(hl_vfields(r6)[12])) : (vdynamic*)hl_dyn_getp(r6->value,221172604/*window_minimizable*/,&t$nul_bool);
	r11 = r10 ? r10->v.b : 0;
	if( !r11 ) goto label$fb84227_5_96;
	r16 = 2;
	r15 = r4 | r16;
	r4 = r15;
	label$fb84227_5_96:
	r17 = (kha__SystemOptions)hl_alloc_obj(&t$kha_SystemOptions);
	r18 = (String)s$balder3d;
	r9 = hl_vfields(r6)[18] ? (*(vdynamic**)(hl_vfields(r6)[18])) : (vdynamic*)hl_dyn_getp(r6->value,500024503/*window_w*/,&t$nul_i32);
	r14 = hl_vfields(r6)[10] ? (*(vdynamic**)(hl_vfields(r6)[10])) : (vdynamic*)hl_dyn_getp(r6->value,500024488/*window_h*/,&t$nul_i32);
	r19 = (kha__WindowOptions)hl_alloc_obj(&t$kha_WindowOptions);
	r20 = NULL;
	r15 = -1;
	r21 = hl_alloc_dynamic(&t$_i32);
	r21->v.i = r15;
	r15 = -1;
	r22 = hl_alloc_dynamic(&t$_i32);
	r22->v.i = r15;
	r15 = 800;
	r23 = hl_alloc_dynamic(&t$_i32);
	r23->v.i = r15;
	r15 = 600;
	r24 = hl_alloc_dynamic(&t$_i32);
	r24->v.i = r15;
	r15 = -1;
	r25 = hl_alloc_dynamic(&t$_i32);
	r25->v.i = r15;
	r11 = true;
	r10 = hl_alloc_dynbool(r11);
	r26 = hl_alloc_dynamic(&t$_i32);
	r26->v.i = r4;
	r27 = hl_alloc_dynamic(&t$_i32);
	r27->v.i = r3;
	kha_WindowOptions_new(r19,r20,r21,r22,r23,r24,r25,r10,r26,r27);
	r28 = (kha__FramebufferOptions)hl_alloc_obj(&t$kha_FramebufferOptions);
	r15 = 60;
	r21 = hl_alloc_dynamic(&t$_i32);
	r21->v.i = r15;
	r10 = hl_vfields(r6)[17] ? (*(vdynamic**)(hl_vfields(r6)[17])) : (vdynamic*)hl_dyn_getp(r6->value,-328491907/*window_vsync*/,&t$nul_bool);
	r15 = 32;
	r22 = hl_alloc_dynamic(&t$_i32);
	r22->v.i = r15;
	r15 = 16;
	r23 = hl_alloc_dynamic(&t$_i32);
	r23->v.i = r15;
	r15 = 8;
	r24 = hl_alloc_dynamic(&t$_i32);
	r24->v.i = r15;
	r25 = hl_vfields(r6)[14] ? (*(vdynamic**)(hl_vfields(r6)[14])) : (vdynamic*)hl_dyn_getp(r6->value,421141695/*window_msaa*/,&t$nul_i32);
	kha_FramebufferOptions_new(r28,r21,r10,r22,r23,r24,r25);
	kha_SystemOptions_new(r17,r18,r9,r14,r19,r28);
	r29 = hl_alloc_closure_ptr(&t$fun_46cf449,armory_system_Starter_main__$2,r0);
	kha_System_start(r17,r29);
	return;
}

void armory_system_Starter_main(String r0,int r1,bool r2,bool r3,bool r4,int r5,int r6,int r7,bool r8,vclosure* r9) {
	venum *r17;
	hl__types__ArrayBytes_Int r10;
	vclosure *r16;
	int r12, r13, r14;
	vbyte *r11;
	r12 = 4;
	r11 = hl_alloc_bytes(r12);
	r12 = 0;
	r13 = 0;
	r14 = 2;
	r14 = r12 << r14;
	*(int*)(r11 + r14) = r13;
	++r12;
	r12 = 1;
	r10 = hl_types_ArrayBase_allocI32(r11,r12);
	r17 = hl_alloc_enum(&t$ctx_0a4f392,0);
	((Enumt$ctx_0a4f392*)r17)->p0 = (String)r0;
	((Enumt$ctx_0a4f392*)r17)->p1 = (int)r1;
	((Enumt$ctx_0a4f392*)r17)->p2 = (bool)r2;
	((Enumt$ctx_0a4f392*)r17)->p3 = (bool)r3;
	((Enumt$ctx_0a4f392*)r17)->p4 = (bool)r4;
	((Enumt$ctx_0a4f392*)r17)->p5 = (int)r5;
	((Enumt$ctx_0a4f392*)r17)->p6 = (int)r6;
	((Enumt$ctx_0a4f392*)r17)->p7 = (int)r7;
	((Enumt$ctx_0a4f392*)r17)->p8 = (bool)r8;
	((Enumt$ctx_0a4f392*)r17)->p9 = (vclosure*)r9;
	((Enumt$ctx_0a4f392*)r17)->p10 = (hl__types__ArrayBytes_Int)r10;
	r16 = hl_alloc_closure_ptr(&t$fun_a618032,armory_system_Starter_main__$1,r17);
	if( r10 == NULL ) hl_null_access();
	r12 = 0;
	r13 = 1;
	r14 = r10->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$fb84227_6_29;
	hl_types_ArrayBytes_Int___expand(r10,r12);
	label$fb84227_6_29:
	r11 = r10->bytes;
	r14 = 2;
	r14 = r12 << r14;
	*(int*)(r11 + r14) = r13;
	r12 = 0;
	r13 = r10->length;
	if( ((unsigned)r12) < ((unsigned)r13) ) goto label$fb84227_6_37;
	hl_types_ArrayBytes_Int___expand(r10,r12);
	label$fb84227_6_37:
	r11 = r10->bytes;
	r13 = 2;
	r13 = r12 << r13;
	r14 = *(int*)(r11 + r13);
	--r14;
	*(int*)(r11 + r13) = r14;
	if( r16 == NULL ) hl_null_access();
	r16->hasValue ? ((void (*)(vdynamic*))r16->fun)((vdynamic*)r16->value) : ((void (*)(void))r16->fun)();
	return;
}

