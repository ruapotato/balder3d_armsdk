// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <armory/system/Event.h>
extern armory__system__$Event g$_armory_system_Event;
vdynamic* haxe_ds_StringMap_get(haxe__ds__StringMap,String);
extern hl_type t$hl_types_ArrayObj;
extern hl_type t$_dyn;
extern hl_type t$vrt_68dcaf9;
extern hl_type t$String;
extern hl_type t$fun_7b48b4f;
extern hl_type t$_i32;
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
void haxe_ds_StringMap_set(haxe__ds__StringMap,String,vdynamic*);
bool hl_types_ArrayObj_remove(hl__types__ArrayObj,vdynamic*);
bool haxe_ds_StringMap_remove(haxe__ds__StringMap,String);

hl__types__ArrayObj armory_system_Event_get(String r0) {
	hl__types__ArrayObj r4;
	haxe__ds__StringMap r2;
	armory__system__$Event r3;
	vdynamic *r1;
	r3 = (armory__system__$Event)g$_armory_system_Event;
	r2 = r3->events;
	if( r2 == NULL ) hl_null_access();
	r1 = haxe_ds_StringMap_get(r2,r0);
	r4 = (hl__types__ArrayObj)hl_dyn_castp(&r1,&t$_dyn,&t$hl_types_ArrayObj);
	return r4;
}

vvirtual* armory_system_Event_add(String r0,vclosure* r1,int* r2) {
	hl__types__ArrayObj r10, r11;
	haxe__ds__StringMap r8;
	vvirtual *r4;
	hl_type *r13;
	armory__system__$Event r9;
	vdynamic *r7;
	varray *r12;
	int r3, r5;
	if( r2 ) goto label$9d9ad3a_2_3;
	r3 = -1;
	goto label$9d9ad3a_2_4;
	label$9d9ad3a_2_3:
	r3 = *r2;
	label$9d9ad3a_2_4:
	r4 = hl_alloc_virtual(&t$vrt_68dcaf9);
	if( hl_vfields(r4)[1] ) *(String*)(hl_vfields(r4)[1]) = (String)r0; else hl_dyn_setp(r4->value,150958933/*name*/,&t$String,r0);
	if( hl_vfields(r4)[2] ) *(vclosure**)(hl_vfields(r4)[2]) = (vclosure*)r1; else hl_dyn_setp(r4->value,201483899/*onEvent*/,&t$fun_7b48b4f,r1);
	if( hl_vfields(r4)[0] ) *(int*)(hl_vfields(r4)[0]) = (int)r3; else hl_dyn_seti(r4->value,139870710/*mask*/,&t$_i32,r3);
	r9 = (armory__system__$Event)g$_armory_system_Event;
	r8 = r9->events;
	if( r8 == NULL ) hl_null_access();
	r7 = haxe_ds_StringMap_get(r8,r0);
	r10 = (hl__types__ArrayObj)hl_dyn_castp(&r7,&t$_dyn,&t$hl_types_ArrayObj);
	if( !r10 ) goto label$9d9ad3a_2_17;
	if( r10 == NULL ) hl_null_access();
	r5 = hl_types_ArrayObj_push(r10,((vdynamic*)r4));
	goto label$9d9ad3a_2_27;
	label$9d9ad3a_2_17:
	r9 = (armory__system__$Event)g$_armory_system_Event;
	r8 = r9->events;
	if( r8 == NULL ) hl_null_access();
	r13 = &t$vrt_68dcaf9;
	r5 = 1;
	r12 = hl_alloc_array(r13,r5);
	r5 = 0;
	((vvirtual**)(r12 + 1))[r5] = r4;
	r11 = hl_types_ArrayObj_alloc(r12);
	haxe_ds_StringMap_set(r8,r0,((vdynamic*)r11));
	label$9d9ad3a_2_27:
	return r4;
}

void armory_system_Event_removeListener(vvirtual* r0) {
	String r4;
	hl__types__ArrayObj r5;
	haxe__ds__StringMap r2;
	bool r7;
	armory__system__$Event r3;
	vdynamic *r1;
	int r8, r9;
	r3 = (armory__system__$Event)g$_armory_system_Event;
	r2 = r3->events;
	if( r2 == NULL ) hl_null_access();
	if( r0 == NULL ) hl_null_access();
	r4 = hl_vfields(r0)[1] ? (*(String*)(hl_vfields(r0)[1])) : (String)hl_dyn_getp(r0->value,150958933/*name*/,&t$String);
	r1 = haxe_ds_StringMap_get(r2,r4);
	r5 = (hl__types__ArrayObj)hl_dyn_castp(&r1,&t$_dyn,&t$hl_types_ArrayObj);
	if( !r5 ) goto label$9d9ad3a_3_18;
	if( r5 == NULL ) hl_null_access();
	r7 = hl_types_ArrayObj_remove(r5,((vdynamic*)r0));
	r8 = r5->length;
	r9 = 0;
	if( r8 != r9 ) goto label$9d9ad3a_3_18;
	r3 = (armory__system__$Event)g$_armory_system_Event;
	r2 = r3->events;
	if( r2 == NULL ) hl_null_access();
	r4 = hl_vfields(r0)[1] ? (*(String*)(hl_vfields(r0)[1])) : (String)hl_dyn_getp(r0->value,150958933/*name*/,&t$String);
	r7 = haxe_ds_StringMap_remove(r2,r4);
	label$9d9ad3a_3_18:
	return;
}

