// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <armory/logicnode/SetRotationNode.h>
void armory_logicnode_LogicNode_new(armory__logicnode__LogicNode,armory__logicnode__LogicTree);
#include <armory/logicnode/LogicNodeLink.h>
#include <iron/object/Object.h>
#include <iron/math/Quat.h>
#include <iron/object/Transform.h>
#include <iron/Trait.h>
#include <armory/trait/physics/bullet/RigidBody.h>
extern hl_type t$iron_object_Object;
extern hl_type t$_dyn;
extern hl_type t$iron_math_Quat;
#include <hl/natives.h>
void iron_object_Transform_buildMatrix(iron__object__Transform);
extern armory__trait__physics__bullet__$RigidBody g$0d95481;
iron__Trait iron_object_Object_getTrait(iron__object__Object,hl__Class);
void armory_trait_physics_bullet_RigidBody_syncTransform(armory__trait__physics__bullet__RigidBody);
void armory_logicnode_LogicNode_runOutput(armory__logicnode__LogicNode,int);

void armory_logicnode_SetRotationNode_new(armory__logicnode__SetRotationNode r0,armory__logicnode__LogicTree r1) {
	armory_logicnode_LogicNode_new(((armory__logicnode__LogicNode)r0),r1);
	return;
}

void armory_logicnode_SetRotationNode_run(armory__logicnode__SetRotationNode r0,int r1) {
	armory__trait__physics__bullet__RigidBody r26;
	iron__math__Quat r12, r13;
	armory__logicnode__LogicNodeLink r5, r10;
	hl__types__ArrayObj r2;
	iron__Trait r24;
	armory__trait__physics__bullet__$RigidBody r25;
	armory__logicnode__LogicNode r9;
	iron__object__Transform r23;
	float r14, r15, r16, r17, r19, r20;
	double r18, r21, r22;
	iron__object__Object r11;
	vdynamic *r6;
	varray *r7;
	int r3, r4;
	r2 = r0->inputs;
	if( r2 == NULL ) hl_null_access();
	r3 = 1;
	r4 = r2->length;
	if( ((unsigned)r3) < ((unsigned)r4) ) goto label$566bae6_2_7;
	r5 = NULL;
	goto label$566bae6_2_10;
	label$566bae6_2_7:
	r7 = r2->array;
	r6 = ((vdynamic**)(r7 + 1))[r3];
	r5 = (armory__logicnode__LogicNodeLink)r6;
	label$566bae6_2_10:
	if( r5 == NULL ) hl_null_access();
	r9 = r5->fromNode;
	if( r9 == NULL ) hl_null_access();
	r3 = r5->fromIndex;
	r6 = ((vdynamic* (*)(armory__logicnode__LogicNode,int))r9->$type->vobj_proto[1])(r9,r3);
	r11 = (iron__object__Object)hl_dyn_castp(&r6,&t$_dyn,&t$iron_object_Object);
	if( r11 ) goto label$566bae6_2_18;
	return;
	label$566bae6_2_18:
	r2 = r0->inputs;
	if( r2 == NULL ) hl_null_access();
	r3 = 2;
	r4 = r2->length;
	if( ((unsigned)r3) < ((unsigned)r4) ) goto label$566bae6_2_25;
	r10 = NULL;
	goto label$566bae6_2_28;
	label$566bae6_2_25:
	r7 = r2->array;
	r6 = ((vdynamic**)(r7 + 1))[r3];
	r10 = (armory__logicnode__LogicNodeLink)r6;
	label$566bae6_2_28:
	if( r10 == NULL ) hl_null_access();
	r9 = r10->fromNode;
	if( r9 == NULL ) hl_null_access();
	r3 = r10->fromIndex;
	r6 = ((vdynamic* (*)(armory__logicnode__LogicNode,int))r9->$type->vobj_proto[1])(r9,r3);
	r12 = (iron__math__Quat)hl_dyn_castp(&r6,&t$_dyn,&t$iron_math_Quat);
	if( r12 ) goto label$566bae6_2_36;
	return;
	label$566bae6_2_36:
	if( r12 == NULL ) hl_null_access();
	r14 = r12->x;
	r15 = r12->y;
	r16 = r12->z;
	r17 = r12->w;
	r19 = r14 * r14;
	r20 = r15 * r15;
	r19 = r19 + r20;
	r20 = r16 * r16;
	r19 = r19 + r20;
	r20 = r17 * r17;
	r19 = r19 + r20;
	r18 = (double)r19;
	r18 = hl_math_sqrt(r18);
	r22 = 0.;
	if( r18 != r22 ) goto label$566bae6_2_65;
	r3 = 0;
	r19 = (float)r3;
	r14 = r19;
	r3 = 0;
	r19 = (float)r3;
	r15 = r19;
	r3 = 0;
	r19 = (float)r3;
	r16 = r19;
	r3 = 0;
	r19 = (float)r3;
	r17 = r19;
	goto label$566bae6_2_79;
	label$566bae6_2_65:
	r21 = 1.;
	r21 = r21 / r18;
	r20 = (float)r21;
	r19 = r14 * r20;
	r14 = r19;
	r20 = (float)r21;
	r19 = r15 * r20;
	r15 = r19;
	r20 = (float)r21;
	r19 = r16 * r20;
	r16 = r19;
	r20 = (float)r21;
	r19 = r17 * r20;
	r17 = r19;
	label$566bae6_2_79:
	if( r11 == NULL ) hl_null_access();
	r23 = r11->transform;
	if( r23 == NULL ) hl_null_access();
	r13 = r23->rot;
	if( r13 == NULL ) hl_null_access();
	r13->x = r14;
	r13->y = r15;
	r13->z = r16;
	r13->w = r17;
	r23 = r11->transform;
	if( r23 == NULL ) hl_null_access();
	iron_object_Transform_buildMatrix(r23);
	r25 = (armory__trait__physics__bullet__$RigidBody)g$0d95481;
	r24 = iron_object_Object_getTrait(r11,((hl__Class)r25));
	r26 = (armory__trait__physics__bullet__RigidBody)r24;
	if( !r26 ) goto label$566bae6_2_97;
	if( r26 == NULL ) hl_null_access();
	armory_trait_physics_bullet_RigidBody_syncTransform(r26);
	label$566bae6_2_97:
	r3 = 0;
	armory_logicnode_LogicNode_runOutput(((armory__logicnode__LogicNode)r0),r3);
	return;
}

