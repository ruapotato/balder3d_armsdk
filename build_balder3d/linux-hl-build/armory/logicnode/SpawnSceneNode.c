// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <armory/logicnode/SpawnSceneNode.h>
void armory_logicnode_LogicNode_new(armory__logicnode__LogicNode,armory__logicnode__LogicTree);
void armory_logicnode_LogicNode_runOutput(armory__logicnode__LogicNode,int);
#include <armory/logicnode/LogicNodeLink.h>
#include <iron/math/Mat4.h>
#include <iron/Scene.h>
#include <iron/object/Transform.h>
extern hl_type t$String;
extern hl_type t$_dyn;
extern hl_type t$iron_math_Mat4;
extern iron__$Scene g$_iron_Scene;
iron__object__Object iron_Scene_addObject(iron__Scene,iron__object__Object);
void iron_object_Transform_setMatrix(iron__object__Transform,iron__math__Mat4);
void iron_object_Transform_buildMatrix(iron__object__Transform);
extern hl_type t$fun_1f02c95;
void iron_Scene_addScene(iron__Scene,String,iron__object__Object,vclosure*);

void armory_logicnode_SpawnSceneNode_new(armory__logicnode__SpawnSceneNode r0,armory__logicnode__LogicTree r1) {
	armory_logicnode_LogicNode_new(((armory__logicnode__LogicNode)r0),r1);
	return;
}

void armory_logicnode_SpawnSceneNode_run__$1(armory__logicnode__SpawnSceneNode r0,iron__object__Object r1) {
	int r3;
	if( r0 == NULL ) hl_null_access();
	r3 = 0;
	armory_logicnode_LogicNode_runOutput(((armory__logicnode__LogicNode)r0),r3);
	return;
}

void armory_logicnode_SpawnSceneNode_run(armory__logicnode__SpawnSceneNode r0,int r1) {
	String r11;
	armory__logicnode__LogicNodeLink r6, r10;
	hl__types__ArrayObj r3;
	iron__$Scene r15;
	iron__Scene r14;
	armory__logicnode__LogicNode r9;
	iron__object__Transform r16;
	iron__math__Mat4 r12;
	vclosure *r17;
	iron__object__Object r13;
	vdynamic *r7;
	varray *r8;
	int r4, r5;
	r3 = r0->inputs;
	if( r3 == NULL ) hl_null_access();
	r4 = 1;
	r5 = r3->length;
	if( ((unsigned)r4) < ((unsigned)r5) ) goto label$d2b5748_3_7;
	r6 = NULL;
	goto label$d2b5748_3_10;
	label$d2b5748_3_7:
	r8 = r3->array;
	r7 = ((vdynamic**)(r8 + 1))[r4];
	r6 = (armory__logicnode__LogicNodeLink)r7;
	label$d2b5748_3_10:
	if( r6 == NULL ) hl_null_access();
	r9 = r6->fromNode;
	if( r9 == NULL ) hl_null_access();
	r4 = r6->fromIndex;
	r7 = ((vdynamic* (*)(armory__logicnode__LogicNode,int))r9->$type->vobj_proto[1])(r9,r4);
	r11 = (String)hl_dyn_castp(&r7,&t$_dyn,&t$String);
	r3 = r0->inputs;
	if( r3 == NULL ) hl_null_access();
	r4 = 2;
	r5 = r3->length;
	if( ((unsigned)r4) < ((unsigned)r5) ) goto label$d2b5748_3_23;
	r10 = NULL;
	goto label$d2b5748_3_26;
	label$d2b5748_3_23:
	r8 = r3->array;
	r7 = ((vdynamic**)(r8 + 1))[r4];
	r10 = (armory__logicnode__LogicNodeLink)r7;
	label$d2b5748_3_26:
	if( r10 == NULL ) hl_null_access();
	r9 = r10->fromNode;
	if( r9 == NULL ) hl_null_access();
	r4 = r10->fromIndex;
	r7 = ((vdynamic* (*)(armory__logicnode__LogicNode,int))r9->$type->vobj_proto[1])(r9,r4);
	r12 = (iron__math__Mat4)hl_dyn_castp(&r7,&t$_dyn,&t$iron_math_Mat4);
	r15 = (iron__$Scene)g$_iron_Scene;
	r14 = r15->active;
	if( r14 == NULL ) hl_null_access();
	r13 = NULL;
	r13 = iron_Scene_addObject(r14,r13);
	r0->root = r13;
	r13 = r0->root;
	if( r13 == NULL ) hl_null_access();
	r13->name = r11;
	if( !r12 ) goto label$d2b5748_3_52;
	r13 = r0->root;
	if( r13 == NULL ) hl_null_access();
	r16 = r13->transform;
	if( r16 == NULL ) hl_null_access();
	iron_object_Transform_setMatrix(r16,r12);
	r13 = r0->root;
	if( r13 == NULL ) hl_null_access();
	r16 = r13->transform;
	if( r16 == NULL ) hl_null_access();
	iron_object_Transform_buildMatrix(r16);
	label$d2b5748_3_52:
	r15 = (iron__$Scene)g$_iron_Scene;
	r14 = r15->active;
	if( r14 == NULL ) hl_null_access();
	r13 = r0->root;
	r17 = hl_alloc_closure_ptr(&t$fun_1f02c95,armory_logicnode_SpawnSceneNode_run__$1,r0);
	iron_Scene_addScene(r14,r11,r13,r17);
	return;
}

vdynamic* armory_logicnode_SpawnSceneNode_get(armory__logicnode__SpawnSceneNode r0,int r1) {
	iron__object__Object r2;
	r2 = r0->root;
	return ((vdynamic*)r2);
}

