// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <iron/data/ShaderData.h>
#include <iron/data/ShaderContext.h>
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
void hl_types_ArrayBytes_Int___expand(hl__types__ArrayBytes_Int,int);
#include <iron/data/TSceneFormat.h>
#include <hl/types/ArrayDyn.h>
#include <haxe/Log.h>
iron__data__TShaderData iron_data_Data_getShaderRawByName(hl__types__ArrayObj,String);
extern haxe__$Log g$_haxe_Log;
extern String s$Shader_data_;
String String___add__(String,String);
extern String s$_not_found_;
extern hl_type t$vrt_329ffa8;
extern String s$Sources_iron_data_ShaderData_hx;
extern hl_type t$String;
extern hl_type t$_i32;
extern String s$iron_data_ShaderData;
extern String s$parse;
extern hl_type t$vrt_eaa6a3b;
extern hl_type t$iron_data_ShaderData;
void iron_data_ShaderData_new(iron__data__ShaderData,iron__data__TShaderData,vclosure*,iron__data__TShaderOverride);
extern hl_type t$ctx_84ae9f9;
extern hl_type t$fun_c45d6f8;
void iron_data_Data_getSceneRaw(String,vclosure*);
#include <iron/data/TShaderContext.h>
int String___compare(String,vdynamic*);
extern hl_type t$iron_data_ShaderContext;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
hl__types__ArrayBytes_Int hl_types_ArrayBase_allocI32(vbyte*,int);
extern hl_type t$ctx_93df96f;
extern hl_type t$fun_953fe85;
void iron_data_ShaderContext_new(iron__data__ShaderContext,iron__data__TShaderContext,vclosure*,iron__data__TShaderOverride);

void iron_data_ShaderData_new__$1(venum* r0,iron__data__ShaderContext r1) {
	hl__types__ArrayObj r2;
	iron__data__TShaderData r11;
	hl__types__ArrayBytes_Int r8;
	vclosure *r12;
	iron__data__ShaderData r3;
	vbyte *r9;
	varray *r7;
	int r4, r5, r10;
	r3 = ((Enumt$ctx_93df96f*)r0)->p4;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->contexts;
	if( r2 == NULL ) hl_null_access();
	r4 = ((Enumt$ctx_93df96f*)r0)->p3;
	r5 = r2->length;
	if( ((unsigned)r4) < ((unsigned)r5) ) goto label$8acc9ae_1_8;
	hl_types_ArrayObj___expand(r2,r4);
	label$8acc9ae_1_8:
	r7 = r2->array;
	((iron__data__ShaderContext*)(r7 + 1))[r4] = r1;
	r8 = ((Enumt$ctx_93df96f*)r0)->p2;
	if( r8 == NULL ) hl_null_access();
	r4 = 0;
	r5 = r8->length;
	if( ((unsigned)r4) < ((unsigned)r5) ) goto label$8acc9ae_1_16;
	hl_types_ArrayBytes_Int___expand(r8,r4);
	label$8acc9ae_1_16:
	r9 = r8->bytes;
	r5 = 2;
	r5 = r4 << r5;
	r10 = *(int*)(r9 + r5);
	++r10;
	*(int*)(r9 + r5) = r10;
	r8 = ((Enumt$ctx_93df96f*)r0)->p2;
	if( r8 == NULL ) hl_null_access();
	r4 = 0;
	r5 = r8->length;
	if( ((unsigned)r4) < ((unsigned)r5) ) goto label$8acc9ae_1_29;
	r4 = 0;
	goto label$8acc9ae_1_33;
	label$8acc9ae_1_29:
	r9 = r8->bytes;
	r5 = 2;
	r5 = r4 << r5;
	r4 = *(int*)(r9 + r5);
	label$8acc9ae_1_33:
	r11 = ((Enumt$ctx_93df96f*)r0)->p0;
	if( r11 == NULL ) hl_null_access();
	r2 = r11->contexts;
	if( r2 == NULL ) hl_null_access();
	r5 = r2->length;
	if( r4 != r5 ) goto label$8acc9ae_1_43;
	r12 = ((Enumt$ctx_93df96f*)r0)->p1;
	if( r12 == NULL ) hl_null_access();
	r3 = ((Enumt$ctx_93df96f*)r0)->p4;
	r12->hasValue ? ((void (*)(vdynamic*,iron__data__ShaderData))r12->fun)((vdynamic*)r12->value,r3) : ((void (*)(iron__data__ShaderData))r12->fun)(r3);
	label$8acc9ae_1_43:
	return;
}

void iron_data_ShaderData_parse__$1(venum* r0,iron__data__TSceneFormat r1) {
	String r4, r8;
	vvirtual *r9, *r11;
	hl__types__ArrayObj r3;
	haxe__$Log r7;
	iron__data__TShaderData r2;
	iron__data__ShaderData r13;
	vclosure *r6, *r12;
	iron__data__TShaderOverride r14;
	int r10;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->shader_datas;
	r4 = ((Enumt$ctx_84ae9f9*)r0)->p0;
	r2 = iron_data_Data_getShaderRawByName(r3,r4);
	if( r2 ) goto label$8acc9ae_2_28;
	r7 = (haxe__$Log)g$_haxe_Log;
	r6 = r7->trace;
	if( r6 == NULL ) hl_null_access();
	r4 = (String)s$Shader_data_;
	r8 = ((Enumt$ctx_84ae9f9*)r0)->p0;
	r4 = String___add__(r4,r8);
	r8 = (String)s$_not_found_;
	r4 = String___add__(r4,r8);
	r9 = hl_alloc_virtual(&t$vrt_329ffa8);
	r8 = (String)s$Sources_iron_data_ShaderData_hx;
	if( hl_vfields(r9)[1] ) *(String*)(hl_vfields(r9)[1]) = (String)r8; else hl_dyn_setp(r9->value,37969014/*fileName*/,&t$String,r8);
	r10 = 54;
	if( hl_vfields(r9)[2] ) *(int*)(hl_vfields(r9)[2]) = (int)r10; else hl_dyn_seti(r9->value,371360620/*lineNumber*/,&t$_i32,r10);
	r8 = (String)s$iron_data_ShaderData;
	if( hl_vfields(r9)[0] ) *(String*)(hl_vfields(r9)[0]) = (String)r8; else hl_dyn_setp(r9->value,-63073762/*className*/,&t$String,r8);
	r8 = (String)s$parse;
	if( hl_vfields(r9)[3] ) *(String*)(hl_vfields(r9)[3]) = (String)r8; else hl_dyn_setp(r9->value,302979532/*methodName*/,&t$String,r8);
	r11 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r9);
	r6->hasValue ? ((void (*)(vdynamic*,vdynamic*,vvirtual*))r6->fun)((vdynamic*)r6->value,((vdynamic*)r4),r11) : ((void (*)(vdynamic*,vvirtual*))r6->fun)(((vdynamic*)r4),r11);
	r12 = ((Enumt$ctx_84ae9f9*)r0)->p1;
	if( r12 == NULL ) hl_null_access();
	r13 = NULL;
	r12->hasValue ? ((void (*)(vdynamic*,iron__data__ShaderData))r12->fun)((vdynamic*)r12->value,r13) : ((void (*)(iron__data__ShaderData))r12->fun)(r13);
	label$8acc9ae_2_28:
	r13 = (iron__data__ShaderData)hl_alloc_obj(&t$iron_data_ShaderData);
	r12 = ((Enumt$ctx_84ae9f9*)r0)->p1;
	r14 = ((Enumt$ctx_84ae9f9*)r0)->p2;
	iron_data_ShaderData_new(r13,r2,r12,r14);
	return;
}

void iron_data_ShaderData_parse(String r0,String r1,vclosure* r2,iron__data__TShaderOverride r3) {
	venum *r6;
	vclosure *r5;
	r6 = hl_alloc_enum(&t$ctx_84ae9f9,0);
	((Enumt$ctx_84ae9f9*)r6)->p0 = (String)r1;
	((Enumt$ctx_84ae9f9*)r6)->p1 = (vclosure*)r2;
	((Enumt$ctx_84ae9f9*)r6)->p2 = (iron__data__TShaderOverride)r3;
	r5 = hl_alloc_closure_ptr(&t$fun_c45d6f8,iron_data_ShaderData_parse__$1,r6);
	iron_data_Data_getSceneRaw(r0,r5);
	return;
}

iron__data__ShaderContext iron_data_ShaderData_getContext(iron__data__ShaderData r0,String r1) {
	String r8;
	iron__data__ShaderContext r5;
	hl__types__ArrayObj r3;
	iron__data__TShaderContext r9;
	vdynamic *r6;
	varray *r7;
	int r2, r4;
	r2 = 0;
	r3 = r0->contexts;
	label$8acc9ae_4_2:
	if( r3 == NULL ) hl_null_access();
	r4 = r3->length;
	if( r2 >= r4 ) goto label$8acc9ae_4_21;
	r4 = r3->length;
	if( ((unsigned)r2) < ((unsigned)r4) ) goto label$8acc9ae_4_10;
	r5 = NULL;
	goto label$8acc9ae_4_13;
	label$8acc9ae_4_10:
	r7 = r3->array;
	r6 = ((vdynamic**)(r7 + 1))[r2];
	r5 = (iron__data__ShaderContext)r6;
	label$8acc9ae_4_13:
	++r2;
	if( r5 == NULL ) hl_null_access();
	r9 = r5->raw;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->name;
	if( r8 != r1 && (!r8 || !r1 || String___compare(r8,(vdynamic*)r1) != 0) ) goto label$8acc9ae_4_20;
	return r5;
	label$8acc9ae_4_20:
	goto label$8acc9ae_4_2;
	label$8acc9ae_4_21:
	r5 = NULL;
	return r5;
}

void iron_data_ShaderData_new(iron__data__ShaderData r0,iron__data__TShaderData r1,vclosure* r2,iron__data__TShaderOverride r3) {
	String r10;
	iron__data__ShaderContext r16;
	hl__types__ArrayObj r4, r13;
	venum *r21;
	hl_type *r6;
	iron__data__TShaderContext r14;
	hl__types__ArrayBytes_Int r17;
	vclosure *r20;
	iron__data__ShaderData r8;
	vdynamic *r15;
	vbyte *r18;
	int r7, r11, r12, r19;
	varray *r5;
	r6 = &t$iron_data_ShaderContext;
	r7 = 0;
	r5 = hl_alloc_array(r6,r7);
	r4 = hl_types_ArrayObj_alloc(r5);
	r0->contexts = r4;
	r8 = r0;
	r0->raw = r1;
	if( r1 == NULL ) hl_null_access();
	r10 = r1->name;
	r0->name = r10;
	r7 = 0;
	r4 = r1->contexts;
	label$8acc9ae_5_12:
	if( r4 == NULL ) hl_null_access();
	r12 = r4->length;
	if( r7 >= r12 ) goto label$8acc9ae_5_29;
	r12 = r4->length;
	if( ((unsigned)r7) < ((unsigned)r12) ) goto label$8acc9ae_5_20;
	r14 = NULL;
	goto label$8acc9ae_5_23;
	label$8acc9ae_5_20:
	r5 = r4->array;
	r15 = ((vdynamic**)(r5 + 1))[r7];
	r14 = (iron__data__TShaderContext)r15;
	label$8acc9ae_5_23:
	++r7;
	r13 = r0->contexts;
	if( r13 == NULL ) hl_null_access();
	r16 = NULL;
	r11 = hl_types_ArrayObj_push(r13,((vdynamic*)r16));
	goto label$8acc9ae_5_12;
	label$8acc9ae_5_29:
	r7 = 4;
	r18 = hl_alloc_bytes(r7);
	r7 = 0;
	r11 = 0;
	r12 = 2;
	r12 = r7 << r12;
	*(int*)(r18 + r12) = r11;
	++r7;
	r7 = 1;
	r17 = hl_types_ArrayBase_allocI32(r18,r7);
	r7 = 0;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->contexts;
	if( r4 == NULL ) hl_null_access();
	r11 = r4->length;
	label$8acc9ae_5_44:
	if( r7 >= r11 ) goto label$8acc9ae_5_68;
	r12 = r7;
	++r7;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->contexts;
	if( r4 == NULL ) hl_null_access();
	r19 = r4->length;
	if( ((unsigned)r12) < ((unsigned)r19) ) goto label$8acc9ae_5_55;
	r14 = NULL;
	goto label$8acc9ae_5_58;
	label$8acc9ae_5_55:
	r5 = r4->array;
	r15 = ((vdynamic**)(r5 + 1))[r12];
	r14 = (iron__data__TShaderContext)r15;
	label$8acc9ae_5_58:
	r16 = (iron__data__ShaderContext)hl_alloc_obj(&t$iron_data_ShaderContext);
	r21 = hl_alloc_enum(&t$ctx_93df96f,0);
	((Enumt$ctx_93df96f*)r21)->p0 = (iron__data__TShaderData)r1;
	((Enumt$ctx_93df96f*)r21)->p1 = (vclosure*)r2;
	((Enumt$ctx_93df96f*)r21)->p2 = (hl__types__ArrayBytes_Int)r17;
	((Enumt$ctx_93df96f*)r21)->p3 = (int)r12;
	((Enumt$ctx_93df96f*)r21)->p4 = (iron__data__ShaderData)r8;
	r20 = hl_alloc_closure_ptr(&t$fun_953fe85,iron_data_ShaderData_new__$1,r21);
	iron_data_ShaderContext_new(r16,r14,r20,r3);
	goto label$8acc9ae_5_44;
	label$8acc9ae_5_68:
	return;
}

