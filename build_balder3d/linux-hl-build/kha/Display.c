// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/Display.h>
extern kha__$Display g$_kha_Display;
#include <hl/natives.h>
extern hl_type t$kha_Display;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);

void kha_Display_new(kha__Display r0,int r1,bool r2) {
	r0->num = r1;
	r0->isPrimary = r2;
	return;
}

void kha_Display_init() {
	hl__types__ArrayObj r1;
	hl_type *r5;
	bool r10;
	kha__Display r9;
	kha__$Display r2;
	varray *r4;
	int r3, r6, r7, r8;
	r2 = (kha__$Display)g$_kha_Display;
	r1 = r2->displays;
	if( r1 ) goto label$69b4e0c_2_24;
	r3 = hl_kinc_display_init();
	r5 = &t$kha_Display;
	r3 = 0;
	r4 = hl_alloc_array(r5,r3);
	r1 = hl_types_ArrayObj_alloc(r4);
	r2 = (kha__$Display)g$_kha_Display;
	r2->displays = r1;
	r3 = 0;
	r6 = hl_kinc_display_count();
	label$69b4e0c_2_12:
	if( r3 >= r6 ) goto label$69b4e0c_2_24;
	r7 = r3;
	++r3;
	r2 = (kha__$Display)g$_kha_Display;
	r1 = r2->displays;
	if( r1 == NULL ) hl_null_access();
	r9 = (kha__Display)hl_alloc_obj(&t$kha_Display);
	r10 = hl_kinc_display_is_primary(r7);
	kha_Display_new(r9,r7,r10);
	r8 = hl_types_ArrayObj_push(r1,((vdynamic*)r9));
	goto label$69b4e0c_2_12;
	label$69b4e0c_2_24:
	return;
}

kha__Display kha_Display_get_primary() {
	hl__types__ArrayObj r2;
	bool r8;
	kha__Display r5;
	kha__$Display r3;
	vdynamic *r6;
	varray *r7;
	int r1, r4;
	kha_Display_init();
	r1 = 0;
	r3 = (kha__$Display)g$_kha_Display;
	r2 = r3->displays;
	label$69b4e0c_3_4:
	if( r2 == NULL ) hl_null_access();
	r4 = r2->length;
	if( r1 >= r4 ) goto label$69b4e0c_3_21;
	r4 = r2->length;
	if( ((unsigned)r1) < ((unsigned)r4) ) goto label$69b4e0c_3_12;
	r5 = NULL;
	goto label$69b4e0c_3_15;
	label$69b4e0c_3_12:
	r7 = r2->array;
	r6 = ((vdynamic**)(r7 + 1))[r1];
	r5 = (kha__Display)r6;
	label$69b4e0c_3_15:
	++r1;
	if( r5 == NULL ) hl_null_access();
	r8 = r5->isPrimary;
	if( !r8 ) goto label$69b4e0c_3_20;
	return r5;
	label$69b4e0c_3_20:
	goto label$69b4e0c_3_4;
	label$69b4e0c_3_21:
	r5 = NULL;
	return r5;
}

hl__types__ArrayObj kha_Display_get_all() {
	hl__types__ArrayObj r1;
	kha__$Display r2;
	kha_Display_init();
	r2 = (kha__$Display)g$_kha_Display;
	r1 = r2->displays;
	return r1;
}

int kha_Display_get_width(kha__Display r0) {
	int r1;
	r1 = r0->num;
	r1 = hl_kinc_display_width(r1);
	return r1;
}

int kha_Display_get_height(kha__Display r0) {
	int r1;
	r1 = r0->num;
	r1 = hl_kinc_display_height(r1);
	return r1;
}

int kha_Display_get_frequency(kha__Display r0) {
	int r1;
	r1 = 60;
	return r1;
}

