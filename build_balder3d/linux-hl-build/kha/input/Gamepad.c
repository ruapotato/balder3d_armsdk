// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/input/Gamepad.h>
extern kha__input__$Gamepad g$_kha_input_Gamepad;
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
bool hl_types_ArrayObj_remove(hl__types__ArrayObj,vdynamic*);
extern String s$unknown;
extern hl_type t$hl_types_ArrayObj;
void hl_types_ArrayObj_new(hl__types__ArrayObj);
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
void kha_SystemImpl_setGamepadRumble(int,double,double);
String kha_SystemImpl_getGamepadId(int);
String kha_SystemImpl_getGamepadVendor(int);

kha__input__Gamepad kha_input_Gamepad_get(int* r0) {
	hl__types__ArrayObj r3;
	kha__input__Gamepad r5;
	kha__input__$Gamepad r4;
	vdynamic *r6;
	varray *r7;
	int r1, r2;
	if( r0 ) goto label$818aeb4_1_3;
	r1 = 0;
	goto label$818aeb4_1_4;
	label$818aeb4_1_3:
	r1 = *r0;
	label$818aeb4_1_4:
	r4 = (kha__input__$Gamepad)g$_kha_input_Gamepad;
	r3 = r4->instances;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	if( r1 < r2 ) goto label$818aeb4_1_11;
	r5 = NULL;
	return r5;
	label$818aeb4_1_11:
	r4 = (kha__input__$Gamepad)g$_kha_input_Gamepad;
	r3 = r4->instances;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	if( ((unsigned)r1) < ((unsigned)r2) ) goto label$818aeb4_1_18;
	r5 = NULL;
	goto label$818aeb4_1_21;
	label$818aeb4_1_18:
	r7 = r3->array;
	r6 = ((vdynamic**)(r7 + 1))[r1];
	r5 = (kha__input__Gamepad)r6;
	label$818aeb4_1_21:
	return r5;
}

void kha_input_Gamepad_notifyOnConnect(vclosure* r0,vclosure* r1) {
	hl__types__ArrayObj r4;
	kha__input__$Gamepad r5;
	int r3;
	if( !r0 ) goto label$818aeb4_2_5;
	r5 = (kha__input__$Gamepad)g$_kha_input_Gamepad;
	r4 = r5->connectListeners;
	if( r4 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_push(r4,((vdynamic*)r0));
	label$818aeb4_2_5:
	if( !r1 ) goto label$818aeb4_2_10;
	r5 = (kha__input__$Gamepad)g$_kha_input_Gamepad;
	r4 = r5->disconnectListeners;
	if( r4 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_push(r4,((vdynamic*)r1));
	label$818aeb4_2_10:
	return;
}

void kha_input_Gamepad_removeConnect(vclosure* r0,vclosure* r1) {
	hl__types__ArrayObj r4;
	bool r3;
	kha__input__$Gamepad r5;
	if( !r0 ) goto label$818aeb4_3_5;
	r5 = (kha__input__$Gamepad)g$_kha_input_Gamepad;
	r4 = r5->connectListeners;
	if( r4 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_remove(r4,((vdynamic*)r0));
	label$818aeb4_3_5:
	if( !r1 ) goto label$818aeb4_3_10;
	r5 = (kha__input__$Gamepad)g$_kha_input_Gamepad;
	r4 = r5->disconnectListeners;
	if( r4 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_remove(r4,((vdynamic*)r1));
	label$818aeb4_3_10:
	return;
}

void kha_input_Gamepad_notify(kha__input__Gamepad r0,vclosure* r1,vclosure* r2) {
	hl__types__ArrayObj r5;
	int r4;
	if( !r1 ) goto label$818aeb4_4_4;
	r5 = r0->axisListeners;
	if( r5 == NULL ) hl_null_access();
	r4 = hl_types_ArrayObj_push(r5,((vdynamic*)r1));
	label$818aeb4_4_4:
	if( !r2 ) goto label$818aeb4_4_8;
	r5 = r0->buttonListeners;
	if( r5 == NULL ) hl_null_access();
	r4 = hl_types_ArrayObj_push(r5,((vdynamic*)r2));
	label$818aeb4_4_8:
	return;
}

void kha_input_Gamepad_remove(kha__input__Gamepad r0,vclosure* r1,vclosure* r2) {
	hl__types__ArrayObj r5;
	bool r4;
	if( !r1 ) goto label$818aeb4_5_4;
	r5 = r0->axisListeners;
	if( r5 == NULL ) hl_null_access();
	r4 = hl_types_ArrayObj_remove(r5,((vdynamic*)r1));
	label$818aeb4_5_4:
	if( !r2 ) goto label$818aeb4_5_8;
	r5 = r0->buttonListeners;
	if( r5 == NULL ) hl_null_access();
	r4 = hl_types_ArrayObj_remove(r5,((vdynamic*)r2));
	label$818aeb4_5_8:
	return;
}

void kha_input_Gamepad_new(kha__input__Gamepad r0,int* r1,String r2) {
	String r4;
	hl__types__ArrayObj r6;
	bool r5;
	kha__input__$Gamepad r8;
	varray *r10;
	int r3, r9;
	if( r1 ) goto label$818aeb4_6_3;
	r3 = 0;
	goto label$818aeb4_6_4;
	label$818aeb4_6_3:
	r3 = *r1;
	label$818aeb4_6_4:
	if( r2 ) goto label$818aeb4_6_6;
	r4 = (String)s$unknown;
	label$818aeb4_6_6:
	r5 = false;
	r0->connected = r5;
	r0->index = r3;
	r6 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r6);
	r0->axisListeners = r6;
	r6 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r6);
	r0->buttonListeners = r6;
	r8 = (kha__input__$Gamepad)g$_kha_input_Gamepad;
	r6 = r8->instances;
	if( r6 == NULL ) hl_null_access();
	r9 = r6->length;
	if( ((unsigned)r3) < ((unsigned)r9) ) goto label$818aeb4_6_21;
	hl_types_ArrayObj___expand(r6,r3);
	label$818aeb4_6_21:
	r10 = r6->array;
	((kha__input__Gamepad*)(r10 + 1))[r3] = r0;
	return;
}

void kha_input_Gamepad_rumble(kha__input__Gamepad r0,double r1,double r2) {
	int r4;
	r4 = r0->index;
	kha_SystemImpl_setGamepadRumble(r4,r1,r2);
	return;
}

String kha_input_Gamepad_get_id(kha__input__Gamepad r0) {
	String r1;
	int r2;
	r2 = r0->index;
	r1 = kha_SystemImpl_getGamepadId(r2);
	return r1;
}

String kha_input_Gamepad_get_vendor(kha__input__Gamepad r0) {
	String r1;
	int r2;
	r2 = r0->index;
	r1 = kha_SystemImpl_getGamepadVendor(r2);
	return r1;
}

void kha_input_Gamepad_sendAxisEvent(kha__input__Gamepad r0,int r1,double r2) {
	hl__types__ArrayObj r5;
	vclosure *r7;
	vdynamic *r8;
	varray *r9;
	int r3, r6;
	r3 = 0;
	r5 = r0->axisListeners;
	label$818aeb4_10_2:
	if( r5 == NULL ) hl_null_access();
	r6 = r5->length;
	if( r3 >= r6 ) goto label$818aeb4_10_17;
	r6 = r5->length;
	if( ((unsigned)r3) < ((unsigned)r6) ) goto label$818aeb4_10_10;
	r7 = NULL;
	goto label$818aeb4_10_13;
	label$818aeb4_10_10:
	r9 = r5->array;
	r8 = ((vdynamic**)(r9 + 1))[r3];
	r7 = (vclosure*)r8;
	label$818aeb4_10_13:
	++r3;
	if( r7 == NULL ) hl_null_access();
	r7->hasValue ? ((void (*)(vdynamic*,int,double))r7->fun)((vdynamic*)r7->value,r1,r2) : ((void (*)(int,double))r7->fun)(r1,r2);
	goto label$818aeb4_10_2;
	label$818aeb4_10_17:
	return;
}

void kha_input_Gamepad_sendButtonEvent(kha__input__Gamepad r0,int r1,double r2) {
	hl__types__ArrayObj r5;
	vclosure *r7;
	vdynamic *r8;
	varray *r9;
	int r3, r6;
	r3 = 0;
	r5 = r0->buttonListeners;
	label$818aeb4_11_2:
	if( r5 == NULL ) hl_null_access();
	r6 = r5->length;
	if( r3 >= r6 ) goto label$818aeb4_11_17;
	r6 = r5->length;
	if( ((unsigned)r3) < ((unsigned)r6) ) goto label$818aeb4_11_10;
	r7 = NULL;
	goto label$818aeb4_11_13;
	label$818aeb4_11_10:
	r9 = r5->array;
	r8 = ((vdynamic**)(r9 + 1))[r3];
	r7 = (vclosure*)r8;
	label$818aeb4_11_13:
	++r3;
	if( r7 == NULL ) hl_null_access();
	r7->hasValue ? ((void (*)(vdynamic*,int,double))r7->fun)((vdynamic*)r7->value,r1,r2) : ((void (*)(int,double))r7->fun)(r1,r2);
	goto label$818aeb4_11_2;
	label$818aeb4_11_17:
	return;
}

void kha_input_Gamepad_sendConnectEvent(int r0) {
	hl__types__ArrayObj r1;
	bool r8;
	kha__input__Gamepad r5;
	kha__input__$Gamepad r2;
	vclosure *r11;
	vdynamic *r6;
	varray *r7;
	int r3, r4, r10;
	r2 = (kha__input__$Gamepad)g$_kha_input_Gamepad;
	r1 = r2->instances;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->length;
	if( ((unsigned)r0) < ((unsigned)r4) ) goto label$818aeb4_12_7;
	r5 = NULL;
	goto label$818aeb4_12_10;
	label$818aeb4_12_7:
	r7 = r1->array;
	r6 = ((vdynamic**)(r7 + 1))[r0];
	r5 = (kha__input__Gamepad)r6;
	label$818aeb4_12_10:
	if( r5 == NULL ) hl_null_access();
	r8 = true;
	r5->connected = r8;
	r3 = 0;
	r2 = (kha__input__$Gamepad)g$_kha_input_Gamepad;
	r1 = r2->connectListeners;
	label$818aeb4_12_16:
	if( r1 == NULL ) hl_null_access();
	r10 = r1->length;
	if( r3 >= r10 ) goto label$818aeb4_12_31;
	r10 = r1->length;
	if( ((unsigned)r3) < ((unsigned)r10) ) goto label$818aeb4_12_24;
	r11 = NULL;
	goto label$818aeb4_12_27;
	label$818aeb4_12_24:
	r7 = r1->array;
	r6 = ((vdynamic**)(r7 + 1))[r3];
	r11 = (vclosure*)r6;
	label$818aeb4_12_27:
	++r3;
	if( r11 == NULL ) hl_null_access();
	r11->hasValue ? ((void (*)(vdynamic*,int))r11->fun)((vdynamic*)r11->value,r0) : ((void (*)(int))r11->fun)(r0);
	goto label$818aeb4_12_16;
	label$818aeb4_12_31:
	return;
}

void kha_input_Gamepad_sendDisconnectEvent(int r0) {
	hl__types__ArrayObj r1;
	bool r8;
	kha__input__Gamepad r5;
	kha__input__$Gamepad r2;
	vclosure *r11;
	vdynamic *r6;
	varray *r7;
	int r3, r4, r10;
	r2 = (kha__input__$Gamepad)g$_kha_input_Gamepad;
	r1 = r2->instances;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->length;
	if( ((unsigned)r0) < ((unsigned)r4) ) goto label$818aeb4_13_7;
	r5 = NULL;
	goto label$818aeb4_13_10;
	label$818aeb4_13_7:
	r7 = r1->array;
	r6 = ((vdynamic**)(r7 + 1))[r0];
	r5 = (kha__input__Gamepad)r6;
	label$818aeb4_13_10:
	if( r5 == NULL ) hl_null_access();
	r8 = false;
	r5->connected = r8;
	r3 = 0;
	r2 = (kha__input__$Gamepad)g$_kha_input_Gamepad;
	r1 = r2->disconnectListeners;
	label$818aeb4_13_16:
	if( r1 == NULL ) hl_null_access();
	r10 = r1->length;
	if( r3 >= r10 ) goto label$818aeb4_13_31;
	r10 = r1->length;
	if( ((unsigned)r3) < ((unsigned)r10) ) goto label$818aeb4_13_24;
	r11 = NULL;
	goto label$818aeb4_13_27;
	label$818aeb4_13_24:
	r7 = r1->array;
	r6 = ((vdynamic**)(r7 + 1))[r3];
	r11 = (vclosure*)r6;
	label$818aeb4_13_27:
	++r3;
	if( r11 == NULL ) hl_null_access();
	r11->hasValue ? ((void (*)(vdynamic*,int))r11->fun)((vdynamic*)r11->value,r0) : ((void (*)(int))r11->fun)(r0);
	goto label$818aeb4_13_16;
	label$818aeb4_13_31:
	return;
}

