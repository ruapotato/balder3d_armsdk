// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/graphics4/ColoredShaderPainter.h>
extern kha__graphics4__$ColoredShaderPainter g$59e5fb3;
#include <kha/graphics4/PerFramebufferPipelineCache.h>
kha__graphics4__VertexStructure kha_graphics4_Graphics2_createColoredVertexStructure(void);
kha__graphics4__PipelineState kha_graphics4_Graphics2_createColoredPipeline(kha__graphics4__VertexStructure);
extern hl_type t$kha_graphics4_PerFramebufferPipelineCache;
void kha_graphics4_PerFramebufferPipelineCache_new(kha__graphics4__PerFramebufferPipelineCache,kha__graphics4__PipelineState,bool);
extern hl_type t$vrt_39c470b;
extern hl_type t$kha_graphics4_VertexBuffer;
void kha_graphics4_VertexBuffer_new(kha__graphics4__VertexBuffer,int,kha__graphics4__VertexStructure,int,int*,bool*);
kha__arrays__ByteArrayPrivate kha_graphics4_VertexBuffer_lock(kha__graphics4__VertexBuffer,vdynamic*,vdynamic*);
extern hl_type t$kha_graphics4_IndexBuffer;
void kha_graphics4_IndexBuffer_new(kha__graphics4__IndexBuffer,int,int,bool*);
kha__arrays__ByteArrayPrivate kha_graphics4_IndexBuffer_lock(kha__graphics4__IndexBuffer,vdynamic*,vdynamic*);
#include <hl/natives.h>
void kha_graphics4_IndexBuffer_unlock(kha__graphics4__IndexBuffer,vdynamic*);
void kha_graphics4_ColoredShaderPainter_drawTriBuffer(kha__graphics4__ColoredShaderPainter,bool);
extern hl_type t$_i32;
void kha_graphics4_VertexBuffer_unlock(kha__graphics4__VertexBuffer,vdynamic*);
extern hl_type t$fun_c881552;
extern hl_type t$fun_c80ec77;
extern hl_type t$fun_a561c62;
extern hl_type t$fun_46c6b6e;
extern hl_type t$fun_896f717;
extern hl_type t$fun_8305be0;

vvirtual* kha_graphics4_ColoredShaderPainter_set_pipeline(kha__graphics4__ColoredShaderPainter r0,vvirtual* r1) {
	kha__graphics4__$ColoredShaderPainter r3;
	vvirtual *r2;
	if( !r1 ) goto label$e7917a1_1_3;
	r2 = r1;
	goto label$e7917a1_1_5;
	label$e7917a1_1_3:
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r2 = r3->standardColorPipeline;
	label$e7917a1_1_5:
	r0->myPipeline = r2;
	r2 = r0->myPipeline;
	return r2;
}

void kha_graphics4_ColoredShaderPainter_setProjection(kha__graphics4__ColoredShaderPainter r0,kha__math__FastMatrix4 r1) {
	r0->projectionMatrix = r1;
	return;
}

void kha_graphics4_ColoredShaderPainter_initShaders() {
	kha__graphics4__PipelineState r4;
	vvirtual *r3;
	kha__graphics4__$ColoredShaderPainter r2;
	bool r6;
	kha__graphics4__PerFramebufferPipelineCache r5;
	kha__graphics4__VertexStructure r1;
	r2 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r1 = r2->structure;
	if( r1 ) goto label$e7917a1_3_6;
	r1 = kha_graphics4_Graphics2_createColoredVertexStructure();
	r2 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r2->structure = r1;
	label$e7917a1_3_6:
	r2 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3 = r2->standardColorPipeline;
	if( r3 ) goto label$e7917a1_3_24;
	r2 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r1 = r2->structure;
	r4 = kha_graphics4_Graphics2_createColoredPipeline(r1);
	r5 = (kha__graphics4__PerFramebufferPipelineCache)hl_alloc_obj(&t$kha_graphics4_PerFramebufferPipelineCache);
	r6 = false;
	kha_graphics4_PerFramebufferPipelineCache_new(r5,r4,r6);
	if( r5 ) goto label$e7917a1_3_18;
	r3 = NULL;
	goto label$e7917a1_3_22;
	label$e7917a1_3_18:
	r3 = r5->f$1;
	if( r3 ) goto label$e7917a1_3_22;
	r3 = hl_to_virtual(&t$vrt_39c470b,(vdynamic*)r5);
	r5->f$1 = r3;
	label$e7917a1_3_22:
	r2 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r2->standardColorPipeline = r3;
	label$e7917a1_3_24:
	return;
}

void kha_graphics4_ColoredShaderPainter_initBuffers(kha__graphics4__ColoredShaderPainter r0) {
	bool *r8;
	kha__graphics4__$ColoredShaderPainter r3;
	int64 r19;
	kha__graphics4__VertexBuffer r2;
	kha__graphics4__IndexBuffer r12;
	kha__arrays__ByteArrayPrivate r9, r16;
	vdynamic *r10, *r11;
	int *r7;
	vbyte *r15;
	kha__graphics4__VertexStructure r5;
	int r4, r6, r13, r14, r17, r18;
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r2 = r3->rectVertexBuffer;
	if( r2 ) goto label$e7917a1_4_282;
	r2 = (kha__graphics4__VertexBuffer)hl_alloc_obj(&t$kha_graphics4_VertexBuffer);
	r4 = 4000;
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r5 = r3->structure;
	r6 = 1;
	r7 = NULL;
	r8 = NULL;
	kha_graphics4_VertexBuffer_new(r2,r4,r5,r6,r7,r8);
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3->rectVertexBuffer = r2;
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r2 = r3->rectVertexBuffer;
	if( r2 == NULL ) hl_null_access();
	r10 = NULL;
	r11 = NULL;
	r9 = kha_graphics4_VertexBuffer_lock(r2,r10,r11);
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3->rectVertices = r9;
	r12 = (kha__graphics4__IndexBuffer)hl_alloc_obj(&t$kha_graphics4_IndexBuffer);
	r4 = 6000;
	r6 = 0;
	r8 = NULL;
	kha_graphics4_IndexBuffer_new(r12,r4,r6,r8);
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3->indexBuffer = r12;
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r12 = r3->indexBuffer;
	if( r12 == NULL ) hl_null_access();
	r10 = NULL;
	r11 = NULL;
	r9 = kha_graphics4_IndexBuffer_lock(r12,r10,r11);
	r4 = 0;
	label$e7917a1_4_35:
	r13 = 1000;
	if( r4 >= r13 ) goto label$e7917a1_4_174;
	r6 = r4;
	++r4;
	r14 = 3;
	r13 = r6 * r14;
	r14 = 2;
	r13 = r13 * r14;
	if( r9 == NULL ) hl_null_access();
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r18 = 4;
	r17 = r6 * r18;
	r19 = (int)r17;
	hl_kinc_bytearray_setuint32(r15,r14,r19);
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r19 = hl_kinc_bytearray_getuint32(r15,r14);
	r14 = 3;
	r13 = r6 * r14;
	r14 = 2;
	r13 = r13 * r14;
	r14 = 1;
	r13 = r13 + r14;
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r18 = 4;
	r17 = r6 * r18;
	r18 = 1;
	r17 = r17 + r18;
	r19 = (int)r17;
	hl_kinc_bytearray_setuint32(r15,r14,r19);
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r19 = hl_kinc_bytearray_getuint32(r15,r14);
	r14 = 3;
	r13 = r6 * r14;
	r14 = 2;
	r13 = r13 * r14;
	r14 = 2;
	r13 = r13 + r14;
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r18 = 4;
	r17 = r6 * r18;
	r18 = 2;
	r17 = r17 + r18;
	r19 = (int)r17;
	hl_kinc_bytearray_setuint32(r15,r14,r19);
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r19 = hl_kinc_bytearray_getuint32(r15,r14);
	r14 = 3;
	r13 = r6 * r14;
	r14 = 2;
	r13 = r13 * r14;
	r14 = 3;
	r13 = r13 + r14;
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r18 = 4;
	r17 = r6 * r18;
	r19 = (int)r17;
	hl_kinc_bytearray_setuint32(r15,r14,r19);
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r19 = hl_kinc_bytearray_getuint32(r15,r14);
	r14 = 3;
	r13 = r6 * r14;
	r14 = 2;
	r13 = r13 * r14;
	r14 = 4;
	r13 = r13 + r14;
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r18 = 4;
	r17 = r6 * r18;
	r18 = 2;
	r17 = r17 + r18;
	r19 = (int)r17;
	hl_kinc_bytearray_setuint32(r15,r14,r19);
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r19 = hl_kinc_bytearray_getuint32(r15,r14);
	r14 = 3;
	r13 = r6 * r14;
	r14 = 2;
	r13 = r13 * r14;
	r14 = 5;
	r13 = r13 + r14;
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r18 = 4;
	r17 = r6 * r18;
	r18 = 3;
	r17 = r17 + r18;
	r19 = (int)r17;
	hl_kinc_bytearray_setuint32(r15,r14,r19);
	r15 = r9->self;
	r14 = r9->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r19 = hl_kinc_bytearray_getuint32(r15,r14);
	goto label$e7917a1_4_35;
	label$e7917a1_4_174:
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r12 = r3->indexBuffer;
	if( r12 == NULL ) hl_null_access();
	r10 = NULL;
	kha_graphics4_IndexBuffer_unlock(r12,r10);
	r2 = (kha__graphics4__VertexBuffer)hl_alloc_obj(&t$kha_graphics4_VertexBuffer);
	r4 = 3000;
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r5 = r3->structure;
	r6 = 1;
	r7 = NULL;
	r8 = NULL;
	kha_graphics4_VertexBuffer_new(r2,r4,r5,r6,r7,r8);
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3->triangleVertexBuffer = r2;
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r2 = r3->triangleVertexBuffer;
	if( r2 == NULL ) hl_null_access();
	r10 = NULL;
	r11 = NULL;
	r16 = kha_graphics4_VertexBuffer_lock(r2,r10,r11);
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3->triangleVertices = r16;
	r12 = (kha__graphics4__IndexBuffer)hl_alloc_obj(&t$kha_graphics4_IndexBuffer);
	r4 = 3000;
	r6 = 0;
	r8 = NULL;
	kha_graphics4_IndexBuffer_new(r12,r4,r6,r8);
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3->triangleIndexBuffer = r12;
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r12 = r3->triangleIndexBuffer;
	if( r12 == NULL ) hl_null_access();
	r10 = NULL;
	r11 = NULL;
	r16 = kha_graphics4_IndexBuffer_lock(r12,r10,r11);
	r4 = 0;
	label$e7917a1_4_211:
	r13 = 1000;
	if( r4 >= r13 ) goto label$e7917a1_4_277;
	r6 = r4;
	++r4;
	r14 = 3;
	r13 = r6 * r14;
	if( r16 == NULL ) hl_null_access();
	r15 = r16->self;
	r14 = r16->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r18 = 3;
	r17 = r6 * r18;
	r19 = (int)r17;
	hl_kinc_bytearray_setuint32(r15,r14,r19);
	r15 = r16->self;
	r14 = r16->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r19 = hl_kinc_bytearray_getuint32(r15,r14);
	r14 = 3;
	r13 = r6 * r14;
	r14 = 1;
	r13 = r13 + r14;
	r15 = r16->self;
	r14 = r16->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r18 = 3;
	r17 = r6 * r18;
	r18 = 1;
	r17 = r17 + r18;
	r19 = (int)r17;
	hl_kinc_bytearray_setuint32(r15,r14,r19);
	r15 = r16->self;
	r14 = r16->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r19 = hl_kinc_bytearray_getuint32(r15,r14);
	r14 = 3;
	r13 = r6 * r14;
	r14 = 2;
	r13 = r13 + r14;
	r15 = r16->self;
	r14 = r16->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r18 = 3;
	r17 = r6 * r18;
	r18 = 2;
	r17 = r17 + r18;
	r19 = (int)r17;
	hl_kinc_bytearray_setuint32(r15,r14,r19);
	r15 = r16->self;
	r14 = r16->byteArrayOffset;
	r18 = 4;
	r17 = r13 * r18;
	r14 = r14 + r17;
	r19 = hl_kinc_bytearray_getuint32(r15,r14);
	goto label$e7917a1_4_211;
	label$e7917a1_4_277:
	r3 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r12 = r3->triangleIndexBuffer;
	if( r12 == NULL ) hl_null_access();
	r10 = NULL;
	kha_graphics4_IndexBuffer_unlock(r12,r10);
	label$e7917a1_4_282:
	return;
}

void kha_graphics4_ColoredShaderPainter_setRectVertices(kha__graphics4__ColoredShaderPainter r0,double r1,double r2,double r3,double r4,double r5,double r6,double r7,double r8) {
	kha__graphics4__$ColoredShaderPainter r10;
	kha__arrays__ByteArrayPrivate r13;
	float r18;
	double r17;
	vbyte *r14;
	int r9, r11, r15, r16;
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r9 = r10->bufferIndex;
	r11 = 4;
	r9 = r9 * r11;
	r11 = 4;
	r9 = r9 * r11;
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 4;
	r15 = r9 * r16;
	r11 = r11 + r15;
	r18 = (float)r1;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 1;
	r15 = r9 + r16;
	r16 = 4;
	r15 = r15 * r16;
	r11 = r11 + r15;
	r18 = (float)r2;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 2;
	r15 = r9 + r16;
	r16 = 4;
	r15 = r15 * r16;
	r11 = r11 + r15;
	r17 = -5.;
	r18 = (float)r17;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 4;
	r15 = r9 + r16;
	r16 = 4;
	r15 = r15 * r16;
	r11 = r11 + r15;
	r18 = (float)r3;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 5;
	r15 = r9 + r16;
	r16 = 4;
	r15 = r15 * r16;
	r11 = r11 + r15;
	r18 = (float)r4;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 6;
	r15 = r9 + r16;
	r16 = 4;
	r15 = r15 * r16;
	r11 = r11 + r15;
	r17 = -5.;
	r18 = (float)r17;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 8;
	r15 = r9 + r16;
	r16 = 4;
	r15 = r15 * r16;
	r11 = r11 + r15;
	r18 = (float)r5;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 9;
	r15 = r9 + r16;
	r16 = 4;
	r15 = r15 * r16;
	r11 = r11 + r15;
	r18 = (float)r6;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 10;
	r15 = r9 + r16;
	r16 = 4;
	r15 = r15 * r16;
	r11 = r11 + r15;
	r17 = -5.;
	r18 = (float)r17;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 12;
	r15 = r9 + r16;
	r16 = 4;
	r15 = r15 * r16;
	r11 = r11 + r15;
	r18 = (float)r7;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 13;
	r15 = r9 + r16;
	r16 = 4;
	r15 = r15 * r16;
	r11 = r11 + r15;
	r18 = (float)r8;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	r10 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r13 = r10->rectVertices;
	if( r13 == NULL ) hl_null_access();
	r14 = r13->self;
	r11 = r13->byteArrayOffset;
	r16 = 14;
	r15 = r9 + r16;
	r16 = 4;
	r15 = r15 * r16;
	r11 = r11 + r15;
	r17 = -5.;
	r18 = (float)r17;
	hl_kinc_bytearray_setfloat32(r14,r11,r18);
	return;
}

void kha_graphics4_ColoredShaderPainter_setRectColors(kha__graphics4__ColoredShaderPainter r0,float r1,int r2) {
	kha__graphics4__$ColoredShaderPainter r4;
	kha__arrays__ByteArrayPrivate r15;
	float r7, r8, r11, r12, r13, r14;
	double r10;
	vbyte *r16;
	int r3, r5, r9, r17, r18;
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3 = r4->bufferIndex;
	r5 = 4;
	r3 = r3 * r5;
	r5 = 4;
	r3 = r3 * r5;
	r5 = 4;
	r3 = r3 * r5;
	r9 = 24;
	r5 = ((unsigned)r2) >> r9;
	r8 = (float)r5;
	r10 = 0.003921568627450980338;
	r11 = (float)r10;
	r8 = r8 * r11;
	r7 = r1 * r8;
	r9 = 16711680;
	r5 = r2 & r9;
	r9 = 16;
	r5 = ((unsigned)r5) >> r9;
	r11 = (float)r5;
	r10 = 0.003921568627450980338;
	r12 = (float)r10;
	r11 = r11 * r12;
	r8 = r7 * r11;
	r9 = 65280;
	r5 = r2 & r9;
	r9 = 8;
	r5 = ((unsigned)r5) >> r9;
	r12 = (float)r5;
	r10 = 0.003921568627450980338;
	r13 = (float)r10;
	r12 = r12 * r13;
	r11 = r7 * r12;
	r9 = 255;
	r5 = r2 & r9;
	r13 = (float)r5;
	r10 = 0.003921568627450980338;
	r14 = (float)r10;
	r13 = r13 * r14;
	r12 = r7 * r13;
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r8 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 12;
	r17 = r3 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r11 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 12;
	r17 = r3 + r18;
	r18 = 1;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r12 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 12;
	r17 = r3 + r18;
	r18 = 2;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r7 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 12;
	r17 = r3 + r18;
	r18 = 3;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r8 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 28;
	r17 = r3 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r11 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 28;
	r17 = r3 + r18;
	r18 = 1;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r12 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 28;
	r17 = r3 + r18;
	r18 = 2;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r7 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 28;
	r17 = r3 + r18;
	r18 = 3;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r8 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 44;
	r17 = r3 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r11 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 44;
	r17 = r3 + r18;
	r18 = 1;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r12 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 44;
	r17 = r3 + r18;
	r18 = 2;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r7 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 44;
	r17 = r3 + r18;
	r18 = 3;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r8 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 60;
	r17 = r3 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r11 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 60;
	r17 = r3 + r18;
	r18 = 1;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r12 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 60;
	r17 = r3 + r18;
	r18 = 2;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->rectVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r7 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 60;
	r17 = r3 + r18;
	r18 = 3;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	return;
}

void kha_graphics4_ColoredShaderPainter_setTriVertices(kha__graphics4__ColoredShaderPainter r0,double r1,double r2,double r3,double r4,double r5,double r6) {
	kha__graphics4__$ColoredShaderPainter r8;
	kha__arrays__ByteArrayPrivate r11;
	float r16;
	double r15;
	vbyte *r12;
	int r7, r9, r13, r14;
	r8 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r7 = r8->triangleBufferIndex;
	r9 = 4;
	r7 = r7 * r9;
	r9 = 3;
	r7 = r7 * r9;
	r8 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r11 = r8->triangleVertices;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->self;
	r9 = r11->byteArrayOffset;
	r14 = 4;
	r13 = r7 * r14;
	r9 = r9 + r13;
	r16 = (float)r1;
	hl_kinc_bytearray_setfloat32(r12,r9,r16);
	r8 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r11 = r8->triangleVertices;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->self;
	r9 = r11->byteArrayOffset;
	r14 = 1;
	r13 = r7 + r14;
	r14 = 4;
	r13 = r13 * r14;
	r9 = r9 + r13;
	r16 = (float)r2;
	hl_kinc_bytearray_setfloat32(r12,r9,r16);
	r8 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r11 = r8->triangleVertices;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->self;
	r9 = r11->byteArrayOffset;
	r14 = 2;
	r13 = r7 + r14;
	r14 = 4;
	r13 = r13 * r14;
	r9 = r9 + r13;
	r15 = -5.;
	r16 = (float)r15;
	hl_kinc_bytearray_setfloat32(r12,r9,r16);
	r8 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r11 = r8->triangleVertices;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->self;
	r9 = r11->byteArrayOffset;
	r14 = 4;
	r13 = r7 + r14;
	r14 = 4;
	r13 = r13 * r14;
	r9 = r9 + r13;
	r16 = (float)r3;
	hl_kinc_bytearray_setfloat32(r12,r9,r16);
	r8 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r11 = r8->triangleVertices;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->self;
	r9 = r11->byteArrayOffset;
	r14 = 5;
	r13 = r7 + r14;
	r14 = 4;
	r13 = r13 * r14;
	r9 = r9 + r13;
	r16 = (float)r4;
	hl_kinc_bytearray_setfloat32(r12,r9,r16);
	r8 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r11 = r8->triangleVertices;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->self;
	r9 = r11->byteArrayOffset;
	r14 = 6;
	r13 = r7 + r14;
	r14 = 4;
	r13 = r13 * r14;
	r9 = r9 + r13;
	r15 = -5.;
	r16 = (float)r15;
	hl_kinc_bytearray_setfloat32(r12,r9,r16);
	r8 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r11 = r8->triangleVertices;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->self;
	r9 = r11->byteArrayOffset;
	r14 = 8;
	r13 = r7 + r14;
	r14 = 4;
	r13 = r13 * r14;
	r9 = r9 + r13;
	r16 = (float)r5;
	hl_kinc_bytearray_setfloat32(r12,r9,r16);
	r8 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r11 = r8->triangleVertices;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->self;
	r9 = r11->byteArrayOffset;
	r14 = 9;
	r13 = r7 + r14;
	r14 = 4;
	r13 = r13 * r14;
	r9 = r9 + r13;
	r16 = (float)r6;
	hl_kinc_bytearray_setfloat32(r12,r9,r16);
	r8 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r11 = r8->triangleVertices;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->self;
	r9 = r11->byteArrayOffset;
	r14 = 10;
	r13 = r7 + r14;
	r14 = 4;
	r13 = r13 * r14;
	r9 = r9 + r13;
	r15 = -5.;
	r16 = (float)r15;
	hl_kinc_bytearray_setfloat32(r12,r9,r16);
	return;
}

void kha_graphics4_ColoredShaderPainter_setTriColors(kha__graphics4__ColoredShaderPainter r0,float r1,int r2) {
	kha__graphics4__$ColoredShaderPainter r4;
	kha__arrays__ByteArrayPrivate r15;
	float r7, r8, r11, r12, r13, r14;
	double r10;
	vbyte *r16;
	int r3, r5, r9, r17, r18;
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3 = r4->triangleBufferIndex;
	r5 = 4;
	r3 = r3 * r5;
	r5 = 4;
	r3 = r3 * r5;
	r5 = 3;
	r3 = r3 * r5;
	r9 = 24;
	r5 = ((unsigned)r2) >> r9;
	r8 = (float)r5;
	r10 = 0.003921568627450980338;
	r11 = (float)r10;
	r8 = r8 * r11;
	r7 = r1 * r8;
	r9 = 16711680;
	r5 = r2 & r9;
	r9 = 16;
	r5 = ((unsigned)r5) >> r9;
	r11 = (float)r5;
	r10 = 0.003921568627450980338;
	r12 = (float)r10;
	r11 = r11 * r12;
	r8 = r7 * r11;
	r9 = 65280;
	r5 = r2 & r9;
	r9 = 8;
	r5 = ((unsigned)r5) >> r9;
	r12 = (float)r5;
	r10 = 0.003921568627450980338;
	r13 = (float)r10;
	r12 = r12 * r13;
	r11 = r7 * r12;
	r9 = 255;
	r5 = r2 & r9;
	r13 = (float)r5;
	r10 = 0.003921568627450980338;
	r14 = (float)r10;
	r13 = r13 * r14;
	r12 = r7 * r13;
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r8 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 12;
	r17 = r3 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r11 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 12;
	r17 = r3 + r18;
	r18 = 1;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r12 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 12;
	r17 = r3 + r18;
	r18 = 2;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r7 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 12;
	r17 = r3 + r18;
	r18 = 3;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r8 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 28;
	r17 = r3 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r11 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 28;
	r17 = r3 + r18;
	r18 = 1;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r12 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 28;
	r17 = r3 + r18;
	r18 = 2;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r7 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 28;
	r17 = r3 + r18;
	r18 = 3;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r8 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 44;
	r17 = r3 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r11 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 44;
	r17 = r3 + r18;
	r18 = 1;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r12 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 44;
	r17 = r3 + r18;
	r18 = 2;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r15 = r4->triangleVertices;
	r5 = 255;
	r14 = (float)r5;
	r13 = r7 * r14;
	r5 = (int)r13;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->self;
	r9 = r15->byteArrayOffset;
	r18 = 44;
	r17 = r3 + r18;
	r18 = 3;
	r17 = r17 + r18;
	r9 = r9 + r17;
	hl_kinc_bytearray_setuint8(r16,r9,r5);
	return;
}

void kha_graphics4_ColoredShaderPainter_drawBuffer(kha__graphics4__ColoredShaderPainter r0,bool r1) {
	kha__graphics4__PipelineState r13;
	vvirtual *r10, *r12, *r15;
	kha__graphics4__$ColoredShaderPainter r4;
	kha__math__FastMatrix4 r16;
	bool r6;
	hl__types__ArrayBytes_Int r11;
	kha__graphics4__VertexBuffer r7;
	kha__arrays__ByteArrayPrivate r20;
	kha__graphics4__IndexBuffer r14;
	kha__graphics4__InternalPipeline r9;
	int *r17, *r19;
	vdynamic *r8, *r21;
	int r3, r5, r18;
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3 = r4->bufferIndex;
	r5 = 0;
	if( r3 != r5 ) goto label$e7917a1_9_5;
	return;
	label$e7917a1_9_5:
	if( r1 ) goto label$e7917a1_9_12;
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3 = r4->triangleBufferIndex;
	r5 = 0;
	if( r5 >= r3 ) goto label$e7917a1_9_12;
	r6 = true;
	kha_graphics4_ColoredShaderPainter_drawTriBuffer(r0,r6);
	label$e7917a1_9_12:
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r7 = r4->rectVertexBuffer;
	if( r7 == NULL ) hl_null_access();
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r3 = r4->bufferIndex;
	r5 = 4;
	r3 = r3 * r5;
	r8 = hl_alloc_dynamic(&t$_i32);
	r8->v.i = r3;
	kha_graphics4_VertexBuffer_unlock(r7,r8);
	r10 = r0->myPipeline;
	if( r10 == NULL ) hl_null_access();
	r11 = NULL;
	r3 = 3;
	if( hl_vfields(r10)[0] ) r9 = ((kha__graphics4__InternalPipeline (*)(vdynamic*,hl__types__ArrayBytes_Int,int))hl_vfields(r10)[0])(r10->value,r11,r3); else {
		void *args[] = {r11,&r3};
		r9 = (kha__graphics4__InternalPipeline)hl_dyn_call_obj(r10->value,&t$fun_c881552,5144726/*get*/,args,NULL);
	}
	r12 = r0->g;
	if( r12 == NULL ) hl_null_access();
	if( r9 == NULL ) hl_null_access();
	r13 = r9->pipeline;
	if( hl_vfields(r12)[8] ) ((void (*)(vdynamic*,kha__graphics4__PipelineState))hl_vfields(r12)[8])(r12->value,r13); else {
		void *args[] = {r13};
		hl_dyn_call_obj(r12->value,&t$fun_c80ec77,467961459/*setPipeline*/,args,NULL);
	}
	r12 = r0->g;
	if( r12 == NULL ) hl_null_access();
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r7 = r4->rectVertexBuffer;
	if( hl_vfields(r12)[2] ) ((void (*)(vdynamic*,kha__graphics4__VertexBuffer))hl_vfields(r12)[2])(r12->value,r7); else {
		void *args[] = {r7};
		hl_dyn_call_obj(r12->value,&t$fun_a561c62,-278953801/*setVertexBuffer*/,args,NULL);
	}
	r12 = r0->g;
	if( r12 == NULL ) hl_null_access();
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r14 = r4->indexBuffer;
	if( hl_vfields(r12)[12] ) ((void (*)(vdynamic*,kha__graphics4__IndexBuffer))hl_vfields(r12)[12])(r12->value,r14); else {
		void *args[] = {r14};
		hl_dyn_call_obj(r12->value,&t$fun_46c6b6e,-43737183/*setIndexBuffer*/,args,NULL);
	}
	r12 = r0->g;
	if( r12 == NULL ) hl_null_access();
	r15 = r9->projectionLocation;
	r16 = r0->projectionMatrix;
	if( hl_vfields(r12)[10] ) ((void (*)(vdynamic*,vvirtual*,kha__math__FastMatrix4))hl_vfields(r12)[10])(r12->value,r15,r16); else {
		void *args[] = {r15,r16};
		hl_dyn_call_obj(r12->value,&t$fun_896f717,460303235/*setMatrix*/,args,NULL);
	}
	r12 = r0->g;
	if( r12 == NULL ) hl_null_access();
	r3 = 0;
	r17 = &r3;
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r5 = r4->bufferIndex;
	r18 = 2;
	r5 = r5 * r18;
	r18 = 3;
	r5 = r5 * r18;
	r19 = &r5;
	if( hl_vfields(r12)[26] ) ((void (*)(vdynamic*,int*,int*))hl_vfields(r12)[26])(r12->value,r17,r19); else {
		void *args[] = {r17,r19};
		hl_dyn_call_obj(r12->value,&t$fun_8305be0,-519327652/*drawIndexedVertices*/,args,NULL);
	}
	r18 = 0;
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r4->bufferIndex = r18;
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r7 = r4->rectVertexBuffer;
	if( r7 == NULL ) hl_null_access();
	r8 = NULL;
	r21 = NULL;
	r20 = kha_graphics4_VertexBuffer_lock(r7,r8,r21);
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r4->rectVertices = r20;
	return;
}

void kha_graphics4_ColoredShaderPainter_drawTriBuffer(kha__graphics4__ColoredShaderPainter r0,bool r1) {
	kha__graphics4__PipelineState r13;
	vvirtual *r10, *r12, *r15;
	kha__graphics4__$ColoredShaderPainter r5;
	kha__math__FastMatrix4 r16;
	bool r3;
	hl__types__ArrayBytes_Int r11;
	kha__graphics4__VertexBuffer r7;
	kha__arrays__ByteArrayPrivate r20;
	kha__graphics4__IndexBuffer r14;
	kha__graphics4__InternalPipeline r9;
	int *r17, *r19;
	vdynamic *r8, *r21;
	int r4, r6, r18;
	if( r1 ) goto label$e7917a1_10_7;
	r5 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r4 = r5->bufferIndex;
	r6 = 0;
	if( r6 >= r4 ) goto label$e7917a1_10_7;
	r3 = true;
	kha_graphics4_ColoredShaderPainter_drawBuffer(r0,r3);
	label$e7917a1_10_7:
	r5 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r7 = r5->triangleVertexBuffer;
	if( r7 == NULL ) hl_null_access();
	r5 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r4 = r5->triangleBufferIndex;
	r6 = 3;
	r4 = r4 * r6;
	r8 = hl_alloc_dynamic(&t$_i32);
	r8->v.i = r4;
	kha_graphics4_VertexBuffer_unlock(r7,r8);
	r10 = r0->myPipeline;
	if( r10 == NULL ) hl_null_access();
	r11 = NULL;
	r4 = 3;
	if( hl_vfields(r10)[0] ) r9 = ((kha__graphics4__InternalPipeline (*)(vdynamic*,hl__types__ArrayBytes_Int,int))hl_vfields(r10)[0])(r10->value,r11,r4); else {
		void *args[] = {r11,&r4};
		r9 = (kha__graphics4__InternalPipeline)hl_dyn_call_obj(r10->value,&t$fun_c881552,5144726/*get*/,args,NULL);
	}
	r12 = r0->g;
	if( r12 == NULL ) hl_null_access();
	if( r9 == NULL ) hl_null_access();
	r13 = r9->pipeline;
	if( hl_vfields(r12)[8] ) ((void (*)(vdynamic*,kha__graphics4__PipelineState))hl_vfields(r12)[8])(r12->value,r13); else {
		void *args[] = {r13};
		hl_dyn_call_obj(r12->value,&t$fun_c80ec77,467961459/*setPipeline*/,args,NULL);
	}
	r12 = r0->g;
	if( r12 == NULL ) hl_null_access();
	r5 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r7 = r5->triangleVertexBuffer;
	if( hl_vfields(r12)[2] ) ((void (*)(vdynamic*,kha__graphics4__VertexBuffer))hl_vfields(r12)[2])(r12->value,r7); else {
		void *args[] = {r7};
		hl_dyn_call_obj(r12->value,&t$fun_a561c62,-278953801/*setVertexBuffer*/,args,NULL);
	}
	r12 = r0->g;
	if( r12 == NULL ) hl_null_access();
	r5 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r14 = r5->triangleIndexBuffer;
	if( hl_vfields(r12)[12] ) ((void (*)(vdynamic*,kha__graphics4__IndexBuffer))hl_vfields(r12)[12])(r12->value,r14); else {
		void *args[] = {r14};
		hl_dyn_call_obj(r12->value,&t$fun_46c6b6e,-43737183/*setIndexBuffer*/,args,NULL);
	}
	r12 = r0->g;
	if( r12 == NULL ) hl_null_access();
	r15 = r9->projectionLocation;
	r16 = r0->projectionMatrix;
	if( hl_vfields(r12)[10] ) ((void (*)(vdynamic*,vvirtual*,kha__math__FastMatrix4))hl_vfields(r12)[10])(r12->value,r15,r16); else {
		void *args[] = {r15,r16};
		hl_dyn_call_obj(r12->value,&t$fun_896f717,460303235/*setMatrix*/,args,NULL);
	}
	r12 = r0->g;
	if( r12 == NULL ) hl_null_access();
	r4 = 0;
	r17 = &r4;
	r5 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r6 = r5->triangleBufferIndex;
	r18 = 3;
	r6 = r6 * r18;
	r19 = &r6;
	if( hl_vfields(r12)[26] ) ((void (*)(vdynamic*,int*,int*))hl_vfields(r12)[26])(r12->value,r17,r19); else {
		void *args[] = {r17,r19};
		hl_dyn_call_obj(r12->value,&t$fun_8305be0,-519327652/*drawIndexedVertices*/,args,NULL);
	}
	r18 = 0;
	r5 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r5->triangleBufferIndex = r18;
	r5 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r7 = r5->triangleVertexBuffer;
	if( r7 == NULL ) hl_null_access();
	r8 = NULL;
	r21 = NULL;
	r20 = kha_graphics4_VertexBuffer_lock(r7,r8,r21);
	r5 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r5->triangleVertices = r20;
	return;
}

void kha_graphics4_ColoredShaderPainter_fillRect(kha__graphics4__ColoredShaderPainter r0,float r1,int r2,double r3,double r4,double r5,double r6,double r7,double r8,double r9,double r10) {
	kha__graphics4__$ColoredShaderPainter r13;
	bool r15;
	int r12, r14;
	r13 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r12 = r13->triangleBufferIndex;
	r14 = 0;
	if( r14 >= r12 ) goto label$e7917a1_11_6;
	r15 = true;
	kha_graphics4_ColoredShaderPainter_drawTriBuffer(r0,r15);
	label$e7917a1_11_6:
	r13 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r12 = r13->bufferIndex;
	r14 = 1;
	r12 = r12 + r14;
	r14 = 1000;
	if( r12 < r14 ) goto label$e7917a1_11_14;
	r15 = false;
	kha_graphics4_ColoredShaderPainter_drawBuffer(r0,r15);
	label$e7917a1_11_14:
	kha_graphics4_ColoredShaderPainter_setRectColors(r0,r1,r2);
	kha_graphics4_ColoredShaderPainter_setRectVertices(r0,r3,r4,r5,r6,r7,r8,r9,r10);
	r13 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r12 = r13->bufferIndex;
	++r12;
	r13->bufferIndex = r12;
	return;
}

void kha_graphics4_ColoredShaderPainter_fillTriangle(kha__graphics4__ColoredShaderPainter r0,float r1,int r2,double r3,double r4,double r5,double r6,double r7,double r8) {
	kha__graphics4__$ColoredShaderPainter r11;
	bool r13;
	int r10, r12;
	r11 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r10 = r11->bufferIndex;
	r12 = 0;
	if( r12 >= r10 ) goto label$e7917a1_12_6;
	r13 = true;
	kha_graphics4_ColoredShaderPainter_drawBuffer(r0,r13);
	label$e7917a1_12_6:
	r11 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r10 = r11->triangleBufferIndex;
	r12 = 1;
	r10 = r10 + r12;
	r12 = 1000;
	if( r10 < r12 ) goto label$e7917a1_12_14;
	r13 = false;
	kha_graphics4_ColoredShaderPainter_drawTriBuffer(r0,r13);
	label$e7917a1_12_14:
	kha_graphics4_ColoredShaderPainter_setTriColors(r0,r1,r2);
	kha_graphics4_ColoredShaderPainter_setTriVertices(r0,r3,r4,r5,r6,r7,r8);
	r11 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r10 = r11->triangleBufferIndex;
	++r10;
	r11->triangleBufferIndex = r10;
	return;
}

void kha_graphics4_ColoredShaderPainter_new(kha__graphics4__ColoredShaderPainter r0,vvirtual* r1) {
	kha__graphics4__$ColoredShaderPainter r4;
	vvirtual *r2;
	int r3;
	r2 = NULL;
	r0->myPipeline = r2;
	r0->g = r1;
	r3 = 0;
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r4->bufferIndex = r3;
	r3 = 0;
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r4->triangleBufferIndex = r3;
	kha_graphics4_ColoredShaderPainter_initShaders();
	r4 = (kha__graphics4__$ColoredShaderPainter)g$59e5fb3;
	r2 = r4->standardColorPipeline;
	r0->myPipeline = r2;
	kha_graphics4_ColoredShaderPainter_initBuffers(r0);
	return;
}

