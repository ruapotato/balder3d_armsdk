// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/graphics4/VertexBuffer.h>
#include <kha/graphics4/VertexStructure.h>
#include <kha/graphics4/VertexElement.h>
#include <hl/natives.h>
int kha_graphics4_VertexStructure_size(kha__graphics4__VertexStructure);
kha__graphics4__VertexElement kha_graphics4_VertexStructure_get(kha__graphics4__VertexStructure,int);
#include <kha/arrays/ByteArrayPrivate.h>
extern hl_type t$kha_arrays_ByteArrayPrivate;
int kha_graphics4_VertexBuffer_count(kha__graphics4__VertexBuffer);
int kha_graphics4_VertexBuffer_stride(kha__graphics4__VertexBuffer);
void kha_arrays_ByteArrayPrivate_new(kha__arrays__ByteArrayPrivate,int,int);

void kha_graphics4_VertexBuffer_new(kha__graphics4__VertexBuffer r0,int r1,kha__graphics4__VertexStructure r2,int r3,int* r4,bool* r5) {
	String r17;
	bool r7, r9;
	kha__graphics4__VertexElement r15;
	vbyte *r8, *r16, *r18;
	int r6, r11, r12, r13, r14, r19, r20;
	if( r4 ) goto label$f040c4f_1_3;
	r6 = 0;
	goto label$f040c4f_1_4;
	label$f040c4f_1_3:
	r6 = *r4;
	label$f040c4f_1_4:
	if( r5 ) goto label$f040c4f_1_7;
	r7 = false;
	goto label$f040c4f_1_8;
	label$f040c4f_1_7:
	r7 = *r5;
	label$f040c4f_1_8:
	if( r2 == NULL ) hl_null_access();
	r9 = r2->instanced;
	r8 = hl_kinc_create_vertexstructure(r9);
	r11 = 0;
	r12 = kha_graphics4_VertexStructure_size(r2);
	label$f040c4f_1_13:
	if( r11 >= r12 ) goto label$f040c4f_1_142;
	r13 = r11;
	++r11;
	if( r2 == NULL ) hl_null_access();
	r15 = kha_graphics4_VertexStructure_get(r2,r13);
	r14 = 0;
	if( r15 == NULL ) hl_null_access();
	r17 = r15->name;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->bytes;
	r4 = &r14;
	r19 = 0;
	r18 = hl_utf16_to_utf8(r16,r19,r4);
	r19 = r15->data;
	switch(r19) {
		default:
			goto label$f040c4f_1_140;
		case 0:
			r20 = 1;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 1:
			r20 = 2;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 2:
			r20 = 3;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 3:
			r20 = 4;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 4:
			r20 = 5;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 5:
			r20 = 6;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 6:
			r20 = 7;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 7:
			r20 = 8;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 8:
			r20 = 9;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 9:
			r20 = 10;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 10:
			r20 = 11;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 11:
			r20 = 12;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 12:
			r20 = 13;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 13:
			r20 = 14;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 14:
			r20 = 15;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 15:
			r20 = 16;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 16:
			r20 = 17;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 17:
			r20 = 18;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 18:
			r20 = 19;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 19:
			r20 = 20;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 20:
			r20 = 21;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 21:
			r20 = 22;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 22:
			r20 = 23;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 23:
			r20 = 24;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 24:
			r20 = 25;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 25:
			r20 = 26;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 26:
			r20 = 27;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 27:
			r20 = 28;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 28:
			r20 = 29;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 29:
			r20 = 30;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 30:
			r20 = 31;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 31:
			r20 = 32;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 32:
			r20 = 33;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 33:
			r20 = 34;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 34:
			r20 = 35;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 35:
			r20 = 36;
			r19 = r20;
			goto label$f040c4f_1_140;
		case 36:
			r20 = 37;
			r19 = r20;
	}
	label$f040c4f_1_140:
	hl_kinc_vertexstructure_add(r8,r18,r19);
	goto label$f040c4f_1_13;
	label$f040c4f_1_142:
	r16 = hl_kinc_create_vertexbuffer(r1,r8,r3,r6);
	r0->_buffer = r16;
	return;
}

kha__arrays__ByteArrayPrivate kha_graphics4_VertexBuffer_lock(kha__graphics4__VertexBuffer r0,vdynamic* r1,vdynamic* r2) {
	kha__arrays__ByteArrayPrivate r5;
	int r6, r7, r8;
	vbyte *r3;
	r3 = r0->_buffer;
	r3 = hl_kinc_vertexbuffer_lock(r3);
	r5 = (kha__arrays__ByteArrayPrivate)hl_alloc_obj(&t$kha_arrays_ByteArrayPrivate);
	r6 = 0;
	r7 = kha_graphics4_VertexBuffer_count(r0);
	r8 = kha_graphics4_VertexBuffer_stride(r0);
	r7 = r7 * r8;
	kha_arrays_ByteArrayPrivate_new(r5,r6,r7);
	r5->self = r3;
	return r5;
}

void kha_graphics4_VertexBuffer_unlock(kha__graphics4__VertexBuffer r0,vdynamic* r1) {
	int r4;
	vbyte *r3;
	r3 = r0->_buffer;
	if( r1 ) goto label$f040c4f_3_4;
	r4 = kha_graphics4_VertexBuffer_count(r0);
	goto label$f040c4f_3_5;
	label$f040c4f_3_4:
	r4 = r1 ? r1->v.i : 0;
	label$f040c4f_3_5:
	hl_kinc_vertexbuffer_unlock(r3,r4);
	return;
}

int kha_graphics4_VertexBuffer_stride(kha__graphics4__VertexBuffer r0) {
	vbyte *r2;
	int r1;
	r2 = r0->_buffer;
	r1 = hl_kinc_vertexbuffer_stride(r2);
	return r1;
}

int kha_graphics4_VertexBuffer_count(kha__graphics4__VertexBuffer r0) {
	vbyte *r2;
	int r1;
	r2 = r0->_buffer;
	r1 = hl_kinc_vertexbuffer_count(r2);
	return r1;
}

