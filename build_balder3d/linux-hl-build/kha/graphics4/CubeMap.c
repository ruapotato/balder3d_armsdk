// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/graphics4/CubeMap.h>
kha__graphics4__CubeMap kha_graphics4_CubeMap_create2(int,int,bool,bool,int);
extern hl_type t$kha_graphics4_CubeMap;
int kha_graphics4_CubeMap_getDepthBufferBits(int);
int kha_graphics4_CubeMap_getRenderTargetFormat(int);
int kha_graphics4_CubeMap_getStencilBufferBits(int);
void kha_graphics4_CubeMap_initRenderTarget(kha__graphics4__CubeMap,int,int,int,int);
#include <hl/natives.h>
#include <kha/korehl/graphics4/Graphics.h>
extern hl_type t$kha_korehl_graphics4_Graphics;
extern hl_type t$vrt_7ced7cf;
void kha_korehl_graphics4_Graphics_new(kha__korehl__graphics4__Graphics,vvirtual*);
extern hl_type t$vrt_779b131;

void kha_graphics4_CubeMap_new(kha__graphics4__CubeMap r0) {
	return;
}

kha__graphics4__CubeMap kha_graphics4_CubeMap_createRenderTarget(int r0,vdynamic* r1,vdynamic* r2) {
	kha__graphics4__CubeMap r3;
	bool r5, r6;
	int r4, r7;
	if( r1 ) goto label$432ca3f_2_3;
	r4 = 0;
	goto label$432ca3f_2_4;
	label$432ca3f_2_3:
	r4 = r1 ? r1->v.i : 0;
	label$432ca3f_2_4:
	r5 = false;
	r6 = true;
	r7 = r2 ? r2->v.i : 0;
	r3 = kha_graphics4_CubeMap_create2(r0,r4,r5,r6,r7);
	return r3;
}

kha__graphics4__CubeMap kha_graphics4_CubeMap_create2(int r0,int r1,bool r2,bool r3,int r4) {
	kha__graphics4__CubeMap r5;
	int r7, r8, r9;
	r5 = (kha__graphics4__CubeMap)hl_alloc_obj(&t$kha_graphics4_CubeMap);
	kha_graphics4_CubeMap_new(r5);
	r5->format = r1;
	if( !r3 ) goto label$432ca3f_3_8;
	r7 = kha_graphics4_CubeMap_getDepthBufferBits(r4);
	r8 = kha_graphics4_CubeMap_getRenderTargetFormat(r1);
	r9 = kha_graphics4_CubeMap_getStencilBufferBits(r4);
	kha_graphics4_CubeMap_initRenderTarget(r5,r0,r7,r8,r9);
	label$432ca3f_3_8:
	return r5;
}

void kha_graphics4_CubeMap_initRenderTarget(kha__graphics4__CubeMap r0,int r1,int r2,int r3,int r4) {
	vbyte *r5;
	r5 = hl_kinc_cubemap_create(r1,r2,r3,r4);
	r0->_renderTarget = r5;
	r5 = NULL;
	r0->_texture = r5;
	return;
}

int kha_graphics4_CubeMap_getRenderTargetFormat(int r0) {
	int r1;
	switch(r0) {
		default:
		case 1:
			r1 = 0;
			return r1;
		case 0:
			r1 = 0;
			return r1;
		case 2:
			r1 = 3;
			return r1;
		case 3:
			r1 = 4;
			return r1;
		case 4:
			r1 = 1;
			return r1;
	}
}

int kha_graphics4_CubeMap_getDepthBufferBits(int r0) {
	int r1;
	switch(r0) {
		default:
			goto label$432ca3f_6_14;
		case 0:
			r1 = -1;
			return r1;
		case 1:
			r1 = 24;
			return r1;
		case 2:
			r1 = 24;
			return r1;
		case 3:
			r1 = 24;
			return r1;
		case 4:
			r1 = 32;
			return r1;
		case 5:
			r1 = 16;
			return r1;
	}
	label$432ca3f_6_14:
	r1 = 0;
	return r1;
}

int kha_graphics4_CubeMap_getStencilBufferBits(int r0) {
	int r1;
	switch(r0) {
		default:
			goto label$432ca3f_7_14;
		case 0:
			r1 = -1;
			return r1;
		case 1:
			r1 = -1;
			return r1;
		case 2:
			r1 = 8;
			return r1;
		case 3:
			r1 = 8;
			return r1;
		case 4:
			r1 = 8;
			return r1;
		case 5:
			r1 = 0;
			return r1;
	}
	label$432ca3f_7_14:
	r1 = 0;
	return r1;
}

int kha_graphics4_CubeMap_get_width(kha__graphics4__CubeMap r0) {
	int r2;
	vbyte *r1;
	r1 = r0->_texture;
	if( !r1 ) goto label$432ca3f_8_5;
	r1 = r0->_texture;
	r2 = hl_kinc_cubemap_texture_get_width(r1);
	return r2;
	label$432ca3f_8_5:
	r1 = r0->_renderTarget;
	r2 = hl_kinc_cubemap_target_get_width(r1);
	return r2;
}

int kha_graphics4_CubeMap_get_height(kha__graphics4__CubeMap r0) {
	int r2;
	vbyte *r1;
	r1 = r0->_texture;
	if( !r1 ) goto label$432ca3f_9_5;
	r1 = r0->_texture;
	r2 = hl_kinc_cubemap_texture_get_height(r1);
	return r2;
	label$432ca3f_9_5:
	r1 = r0->_renderTarget;
	r2 = hl_kinc_cubemap_target_get_height(r1);
	return r2;
}

vvirtual* kha_graphics4_CubeMap_get_g4(kha__graphics4__CubeMap r0) {
	vvirtual *r2, *r4;
	kha__korehl__graphics4__Graphics r3;
	r2 = r0->graphics4;
	if( r2 ) goto label$432ca3f_10_13;
	r3 = (kha__korehl__graphics4__Graphics)hl_alloc_obj(&t$kha_korehl_graphics4_Graphics);
	r4 = hl_to_virtual(&t$vrt_7ced7cf,(vdynamic*)r0);
	kha_korehl_graphics4_Graphics_new(r3,r4);
	if( r3 ) goto label$432ca3f_10_8;
	r2 = NULL;
	goto label$432ca3f_10_12;
	label$432ca3f_10_8:
	r2 = r3->f$1;
	if( r2 ) goto label$432ca3f_10_12;
	r2 = hl_to_virtual(&t$vrt_779b131,(vdynamic*)r3);
	r3->f$1 = r2;
	label$432ca3f_10_12:
	r0->graphics4 = r2;
	label$432ca3f_10_13:
	r2 = r0->graphics4;
	return r2;
}

