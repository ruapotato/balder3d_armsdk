// Generated by HLC 4.2.5 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/audio2/ogg/vorbis/Reader.h>
int haxe_io_BytesInput_set_position(haxe__io__BytesInput,int);
#include <kha/audio2/ogg/vorbis/VorbisDecoder.h>
#include <kha/arrays/ByteArrayPrivate.h>
extern hl_type t$haxe_io_BytesInput;
void haxe_io_BytesInput_new(haxe__io__BytesInput,haxe__io__Bytes,vdynamic*,vdynamic*);
#include <haxe/io/Input.h>
kha__audio2__ogg__vorbis__VorbisDecoder kha_audio2_ogg_vorbis_VorbisDecoder_start(haxe__io__Input);
extern hl_type t$fun_d8cbd66;
void kha_audio2_ogg_vorbis_VorbisDecoder_setupSampleNumber(kha__audio2__ogg__vorbis__VorbisDecoder,vclosure*,int);
kha__arrays__ByteArrayPrivate kha_arrays__Float32Array_Float32Array_Impl___new(int);
int kha_audio2_ogg_vorbis_VorbisDecoder_read(kha__audio2__ogg__vorbis__VorbisDecoder,kha__arrays__ByteArrayPrivate,int,int,int,bool);
#include <hl/natives.h>
void haxe_io_Output_writeFloat(haxe__io__Output,double);

void kha_audio2_ogg_vorbis_Reader_seekBytes(haxe__io__BytesInput r0,int r1) {
	int r2;
	if( r0 == NULL ) hl_null_access();
	r2 = haxe_io_BytesInput_set_position(r0,r1);
	return;
}

void kha_audio2_ogg_vorbis_Reader_readAll__$1(haxe__io__BytesInput r0,int r1) {
	kha_audio2_ogg_vorbis_Reader_seekBytes(r0,r1);
	return;
}

kha__audio2__ogg__vorbis__data__Header kha_audio2_ogg_vorbis_Reader_readAll(haxe__io__Bytes r0,haxe__io__Output r1,bool* r2) {
	kha__audio2__ogg__vorbis__VorbisDecoder r8;
	haxe__io__BytesInput r4;
	bool r3, r17;
	kha__audio2__ogg__vorbis__data__Header r11, r16;
	kha__arrays__ByteArrayPrivate r13;
	float r21;
	double r25;
	vclosure *r9;
	vdynamic *r5, *r6;
	vbyte *r22;
	int r10, r12, r14, r15, r18, r19, r20, r23, r24;
	if( r2 ) goto label$fec0647_3_3;
	r3 = false;
	goto label$fec0647_3_4;
	label$fec0647_3_3:
	r3 = *r2;
	label$fec0647_3_4:
	r4 = (haxe__io__BytesInput)hl_alloc_obj(&t$haxe_io_BytesInput);
	r5 = NULL;
	r6 = NULL;
	haxe_io_BytesInput_new(r4,r0,r5,r6);
	r8 = kha_audio2_ogg_vorbis_VorbisDecoder_start(((haxe__io__Input)r4));
	if( r8 == NULL ) hl_null_access();
	r9 = hl_alloc_closure_ptr(&t$fun_d8cbd66,kha_audio2_ogg_vorbis_Reader_readAll__$1,r4);
	if( r0 == NULL ) hl_null_access();
	r10 = r0->length;
	kha_audio2_ogg_vorbis_VorbisDecoder_setupSampleNumber(r8,r9,r10);
	r11 = r8->header;
	r10 = 0;
	r12 = 4096;
	if( r11 == NULL ) hl_null_access();
	r15 = r11->channel;
	r14 = r12 * r15;
	r13 = kha_arrays__Float32Array_Float32Array_Impl___new(r14);
	label$fec0647_3_21:
	r17 = true;
	if( !r17 ) goto label$fec0647_3_53;
	if( r8 == NULL ) hl_null_access();
	if( r11 == NULL ) hl_null_access();
	r15 = r11->channel;
	r18 = r11->sampleRate;
	r14 = kha_audio2_ogg_vorbis_VorbisDecoder_read(r8,r13,r12,r15,r18,r3);
	r15 = 0;
	r19 = r11->channel;
	r18 = r14 * r19;
	label$fec0647_3_32:
	if( r15 >= r18 ) goto label$fec0647_3_47;
	r19 = r15;
	++r15;
	if( r1 == NULL ) hl_null_access();
	if( r13 == NULL ) hl_null_access();
	r22 = r13->self;
	r20 = r13->byteArrayOffset;
	r24 = 4;
	r23 = r19 * r24;
	r20 = r20 + r23;
	r21 = hl_kinc_bytearray_getfloat32(r22,r20);
	r25 = (double)r21;
	haxe_io_Output_writeFloat(r1,r25);
	goto label$fec0647_3_32;
	label$fec0647_3_47:
	r18 = 0;
	if( r14 != r18 ) goto label$fec0647_3_50;
	goto label$fec0647_3_53;
	label$fec0647_3_50:
	r15 = r10 + r14;
	r10 = r15;
	goto label$fec0647_3_21;
	label$fec0647_3_53:
	if( r8 == NULL ) hl_null_access();
	r16 = r8->header;
	return r16;
}

